"As a developer, I'd like to move k8s SPI to it s own repo.",XD-3715,
"As a developer, I'd like to upgrade Spring XD s ambari plugin to 1.3 release.",XD-3714,
"As a developer, I'd want to document the limitations of HSQL DB when using composed jobs. ",XD-3708,
"As a developer, I'd like to upgrade Boot and Spring Cloud Build revisions, so I can leverage the latest updates.",XD-3705,
"As a developer, I want to be able to set a partitioning key for the Kafka bus even when there is a single downstream module, so that I can take advantage of the native Kafka partitioning and message ordering support.",XD-3702,
"When a problem occurs connecting to admin, we just get Unable to contact Data Flow Admin even if the connection is successful and some problem occurs when interpreting the result. The exception is eaten. Log an error including the exception. Currently investigating an NPE in DataFlowTemplate line 77.",XD-3701,
"As a developer, I'd like to upgrade to SI 4.2.2.GA release, so I can leverage the latest improvements.",XD-3696,
"As a developer, I'd like to upgrade to 2.2.1 GA release, so I can leverage the latest improvements without breaking backwards compatibility. SHDP 2.3.0 uses Boot 1.3 and HDP and CDH versions that drop older Hive support. To avoid breaking changes we should instead use SHDP 2.2.1 that has backported any improvements that we need as well as move Spring and Hadoop versions to more recent ones.",XD-3695,
I'don t recall why this commit https github.com garyrussell spring xd commit ba15a1390f7e448dbc723ee76a45c2e239e0994e was not applied to master but having the timestamp for each step in the history will be useful. See this github issue https github.com spring projects spring xd modules issues 24 issuecomment 154436643 . ,XD-3693,
"As a developer, I'd like to optimize YARN deployer, so I can deploy stream and the modules part of the definition rapidly.",XD-3692,
Make it more clear what drivers need to be copied where. See https github.com spring projects spring xd issues 1653,XD-3690,
Users want the ability to use Composed Jobs specifically parallel Jobs without having to update the configurations for the hsqldb and the Isolation Level for spring batch. These should be set by default. ,XD-3689,
Need to add the following instructions to setup the configurations for the Batch Repo to Composed Job Docs to support parallel jobs 1 uncomment and change the following from spring batch Configure other Spring Batch repository values. Most are typically not needed isolationLevel ISOLATION SERIALIZATION to spring batch Configure other Spring Batch repository values. Most are typically not needed isolationLevel ISOLATION READ COMMITTED And update the hsqldb datasource to spring datasource url jdbc hsqldb hsql hsql.server.host localhost hsql.server.port 9101 hsql.server.dbname xdjob ;sql.enforce strict size true;hsqldb.tx mvcc,XD-3687,
"As a developer, I'd like to add undeployed status for Mesos SPI, so I can represent the correct status instead of the current unknown state.",XD-3682,
"As a developer, I'd like to add undeployed status for k8s SPI, so I can represent the correct status instead of the current unknown state.",XD-3681,
"As a developer, I'd like to add support for undeployed status consistently across all the deployers, so I can present the correct status instead of the current unknown . This is applicable for existing streams without any deployment context associated with it. ",XD-3680,
"As a developer, I'd like to add undeployed status for Lattice SPI, so I can represent the correct status instead of the current unknown state.",XD-3679,
"As a developer, I'd like to add undeployed status for CF SPI, so I can represent the correct status instead of the current unknown state.",XD-3678,
"As a developer, I'd like to create separate repo for Lattice SPI, so I'don t have to bundle all SPI variants under one admin project.",XD-3675,
"As a developer, I'd like to submit a PR for existing work on Mesos SPI. ",XD-3672,
"As a user, I'd like to have direct shell commands to scale up down a given module instance, so I can avoid SPI specific CLI commands that needs run outside of data flow.",XD-3671,
"As a developer, I'd like to revisit the existing design and identify known limitations and or the gaps. ",XD-3670,
"As a user, I'd like Flo Graphs as screenshots while referring to the batch DSL, so it will be easy for me to relate to concepts. ",XD-3669,
"As a user, I'd like to see the version and SPI type in the about section, so I can confirm which build of admin ui I m currently using. ",XD-3668,
"As a user, I'd like to use the admin ui and flo with consistent look and feel. ",XD-3666,
"As a developer, I'd like to replace all Job s references with Task s . ",XD-3664,
"As a developer, I'd like to replace all references of Spring XD with Spring Cloud Data Flow. ",XD-3662,
"As a developer, I'd like to split admin artifact packaged with hadoop distro specific libraries, so I could avoid adding all variations of hadoop libraries under one project. ",XD-3659,
"As a developer, I'd like to add undeployed status for YARN SPI, so I can represent the correct status instead of the current unknown state.",XD-3656,
"As a user, I'd like to refer to job orchestration documentation, so I can use it as guideline for building batch workflows. ",XD-3654,
"As a user, I'd like to use SpEL expressions inline at the stream definition level, so I can operate on the payload consistently while using any OOTB, including the custom modules. ",XD-3649,
"As a developer, I'd like to enhance test coverage to capture DSL and XML generation variants. ",XD-3644,
"As a developer, I'd like to review and refactor JobLaunchingTasklet , so I can improve performance characteristics. ",XD-3641,
See https github.com spring cloud spring cloud dataflow issues 128 This is needed to support channel channel type constructs,XD-3639,
"As a developer, I'd like to upgrade to SI 4.2.1 release, so I can take advantage of the latest improvements.",XD-3637,
"As a Flo user, I'd like to have timeout and pollInterval as global options at the DSL level, so I can override the defaults at will. ",XD-3636,
"As a developer, I'd like to resolve remaining gaps wrt CI pipelines for Data Flow and the family, so I can continuously evaluate functionalities on every commit.",XD-3635,
"As a user, I'd like to use SFTP source module, so I can create streaming pipeline with it. However, I cannot see SFTP as OOTB module listed on module list and as well as the module bits are not available in maven repo http repo.spring.io libs snapshot org springframework cloud stream module . ",XD-3633,
"As a user, I'd like to use the latest release of gemfire sink, so I can create a streaming pipeline to land data in gemfire. ",XD-3631,
"As a developer, I'd like to get rid off XDRuntimeException from XD.",XD-3627,
"As a s c d developer, I'd like to break the build lifecycle to bundle SPI'deployers individually, so I'don t have to build admin with all the deployer variations as one whole thing.",XD-3624,
"As a developer, I'd like to port file module from XD to s c s repo, so I can use it as source module to build streaming pipeline.",XD-3622,
"As a s c d user, I'd like to deploy data flow on YARN, so I can reuse the existing Hadoop cluster and leverage data flow features to build streaming or batch pipelines.",XD-3619,
"As a s c d user, I'd like to have runtime info as shell command, so I can use this to list the details about the module such as host , port and the like.",XD-3618,
"There is a need to customize the ModuleLauncher behavior itself, NOT pass options to modules that are launched, which is already supported for example to set the location of the maven repository. ",XD-3616,
"Currently, s c s modules all come with baked in support for multiple cloud binding technologies code xml ! Lattice core dependency that activates cloud,lattice profiles when running on Lattice dependency groupId org.springframework.cloud groupId artifactId spring cloud lattice core artifactId version spring cloud lattice.version version optional true optional dependency ! Cloud connector dependencies ! Lattice connector dependency to create services info from lattice dependency groupId org.springframework.cloud groupId artifactId spring cloud lattice connector artifactId version spring cloud lattice.version version optional true optional dependency ! CF connector dependency to create services info from CF dependency groupId org.springframework.cloud groupId artifactId spring cloud cloudfoundry connector artifactId optional true optional dependency ! dependency to connect to detected cloud services dependency groupId org.springframework.cloud groupId artifactId spring cloud spring service connector artifactId optional true optional dependency code Should the deployers add those at runtime instead?",XD-3615,
"As a developer, I'd like to port rich gauge module from XD to s c s repo, so I can use it as sink module to build streaming pipeline.",XD-3608,
"As a developer, I'd like to port gauge module from XD to s c s repo, so I can use it as sink module to build streaming pipeline.",XD-3607,
"As a developer, I'd like to port aggregate counter module from XD to s c s repo, so I can use it as sink module to build streaming pipeline.",XD-3606,
"As a developer, I'd like to port field value counter module from XD to s c s repo, so I can use it as sink module to build streaming pipeline.",XD-3605,
"As a XD user, I'd like to have job DSL as an option, so I can leverage the DSL to create comprehensive workflows and orchestrate jobs. ",XD-3603,
"As a developer, I'd like to port Log module from XD to s c s repo, so I can use it as sink modules to build streaming pipeline.",XD-3602,
"We need to make sure that JMX MBean names are unique, even in the case of labeled modules. The following stream fails for example http filter filter2 filter log A good candidate could be stream name group module label.",XD-3601,
"Described in https github.com spring cloud spring cloud stream issues 144 As a developer, I want Input enpoints to be started after all the beans in the context, so that received messages can be delivered to components. ",XD-3597,
"As a s c d user, I should be prevented from creating streams with duplicate name. I'd expect streams to have unique names all the time. ",XD-3596,
"As a s c d developer, I'd like to add test coverage for StreamController , so I can verify API contracts at build time. ",XD-3595,
"As an s c d user, I'd like to have the option to use named channels , so I can create streaming pipelines without source or sink modules. ",XD-3594,
"As a SCDF user, I want to be able to register artifacts as libraries, so that I can reference them in include and exclude statements.",XD-3593,
"As an s c d user, I'd like to take advantage of admin running on variety of platforms such as Lattice, YARN or CF. I'd like to access REST APIs consistently across these platforms.",XD-3592,
"As an XD developer, I need to be able to create a composed job module as XML from the DSL an store it in the Module File repository. While the user uses the composed job as if it is a normal job including seeing only the DSL. In the background the JobFactory will deploy the composed job module. When the user destroys the job the module will be deleted from the file module repository. When the user creates the job a module will be created in the file Module repository. ",XD-3589,
"As an s c d developer, I'd like to move rabbit Rule to a separate repo, so I can consume the test fixtures in different projects.",XD-3587,
"As an s c d developer, I'd like to move kafka Rule to a separate repo, so I can consume the test fixtures in different projects.",XD-3586,
"As an s c d developer, I'd like to move redis Rule to a separate repo, so I can consume the test fixtures in different projects.",XD-3585,
"As an s c d user, I'd like to deploy s c d on Mesos.",XD-3583,
"As an s c d user, I'd like to have tab completion on shell, so I can interact with the modules and its available options.",XD-3582,
"As a spring cloud stream user, I'd like to build stream definitions using dot delimited syntax for resolving properties for Tuple and JSON.",XD-3581,
"As a s c d developer, I'd like to explore options to bootstrap and setup Lattice based infrastructure for s c d s bare metal deployment.",XD-3580,
"As an XD user, I'd like have support restart an existing composed job, so I could re launch it at will.",XD-3578,
"As an XD user, I'd like to click to go the detail page of the job page whether or not the selected entity is singular or part of a composed job.",XD-3576,
"As an XD user, I'd like to be able to visually differentiate between job composition workflow and single job.",XD-3575,
"As an XD user, I'd like to have a REST endpoint that returns job composition graph, so I can use it to build visual representation of parent child relationship. ",XD-3574,
"As an XD user, I'd like to have a REST endpoint that returns job composition flag , so I can use it to differentiate visual representation between parent child relationship and standalone jobs. ",XD-3573,
"As a Spring XD developer, I'd like to port analytic pmml module from XD to s c s repo, so I can use it as processor module to build streaming pipeline.",XD-3572,
"As a Spring XD developer, I'd like to move cassandra module from XD to s c s repo, so I can use it as sink to build streaming pipeline.",XD-3571,
"In https github.com spring cloud spring cloud dataflow blob master README.md running on cloud foundry the section starting Now we can configure the app needs to be revised the information is both out of date and, even if up to date, misleading it includes some values as if they are universal, when they are really just examples .",XD-3570,
As an XD module developer I would like to use HDFS for my custom module location even when my namenode is configured for HA. We had an issue filed in the spring xd ambari project It seems like custom module doesn t pickup namenode HA? and still use NameNodeProxies.createNonHAProxy? see https github.com spring projects spring xd ambari issues 14,XD-3569,
XD Developer does not want the the twitter stream acceptance tests to interfere with other tests.,XD-3566,
"As a developer, I want to be able to connect to multiple external systems for the same binding type, so that I can read data from a system and write it to another.",XD-3565,
"As a developer, I want to have a BinderFactory abstraction, so that I can support multiple binder types in the future.",XD-3563,
"When a default value is an array, the current behavior using toString not only produces useless results like Ljava.lang.String; 2638011 but also constantly changing results.",XD-3560,
"As a XD user, I'd like to restart the composed job workflow from Shell UI. ",XD-3559,
Verify that the job launch works as we expect for the composed job. ,XD-3558,
"As the system, I would like a way to launch a previously deployed job module from another job module. ",XD-3556,
"As an XD developer, I'd like to explore options to remove composed job, so I can clean up unused resources and memory footprints. ",XD-3554,
"As an XD developer, I'd like to explore options to represent composed job, so I can create a workflow to orchestrate multiple jobs. ",XD-3553,
"For example the generated value for the cassandra sink results in entityBasePackages the base packages to scan for entities annotated with Table annotations String; , default Ljava.lang.String; 2638011 where the default value changes each time the build is run. ",XD-3552,
"As a Spring XD developer, I'd like to port splitter module from XD to s c s repo, so I can use it as processor module to build streaming pipeline.",XD-3549,
"As a Spring XD developer, I'd like to port shell module from XD to s c s repo, so I can use it as processor module to build streaming pipeline.",XD-3548,
"As a Spring XD developer, I'd like to port script module from XD to s c s repo, so I can use it as processor module to build streaming pipeline.",XD-3547,
"As a Spring XD developer, I'd like to port object to json module from XD to s c s repo, so I can use it as processor module to build streaming pipeline.",XD-3546,
"As a Spring XD developer, I'd like to port json to tuple module from XD to s c s repo, so I can use it as processor module to build streaming pipeline.",XD-3545,
"As a Spring XD developer, I'd like to port http client module from XD to s c s repo, so I can use it as processor module to build streaming pipeline.",XD-3544,
"As a Spring XD developer, I'd like to port aggregator module from XD to s c s repo, so I can use it as processor module to build streaming pipeline.",XD-3543,
"As a Spring XD developer, I'd like to move jdbc module from XD to s c s repo, so I can use it as source to build streaming pipeline. ",XD-3542,
"As a Spring XD developer, I'd like to move tcp module from XD to s c s repo, so I can use it as sink to build streaming pipeline. ",XD-3541,
"As a Spring XD developer, I'd like to move splunk module from XD to s c s repo, so I can use it as sink to build streaming pipeline. ",XD-3540,
"As a Spring XD developer, I'd like to move shell module from XD to s c s repo, so I can use it as sink to build streaming pipeline. ",XD-3539,
"As a Spring XD developer, I'd like to move null module from XD to s c s repo, so I can use it as sink to build streaming pipeline. ",XD-3538,
"As a Spring XD developer, I'd like to move mqtt module from XD to s c s repo, so I can use it as sink to build streaming pipeline. ",XD-3537,
"As a Spring XD developer, I'd like to move mongo module from XD to s c s repo, so I can use it as sink to build streaming pipeline. ",XD-3536,
"As a Spring XD developer, I'd like to move mail module from XD to s c s repo, so I can use it as sink to build streaming pipeline. ",XD-3535,
"As a Spring XD developer, I'd like to move hdfs dataset module from XD to s c s repo, so I can use it as sink to build streaming pipeline. ",XD-3534,
"As a Spring XD developer, I'd like to move gpfdist module from XD to s c s repo, so I can use it as sink to build streaming pipeline. ",XD-3533,
"As a Spring XD developer, I'd like to move tcp client module from XD to s c s repo, so I can use it as source to build streaming pipeline. ",XD-3532,
"As a Spring XD developer, I'd like to move tcp module from XD to s c s repo, so I can use it as source to build streaming pipeline.",XD-3531,
"As a Spring XD developer, I'd like to move mail module from XD to s c s repo, so I can use it as source to build streaming pipeline.",XD-3530,
"As a Spring XD developer, I'd like to move syslog module from XD to s c s repo, so I can use it as source to build streaming pipeline. ",XD-3529,
"As a Spring XD developer, I'd like to move stdout module from XD to s c s repo, so I can use it as source to build streaming pipeline.",XD-3528,
"As a Spring XD developer, I'd like to move reactor ip module from XD to s c s repo, so I can use it as source to build streaming pipeline.",XD-3527,
"As a Spring XD developer, I'd like to move mqtt module from XD to s c s repo, so I can use it as source to build streaming pipeline. ",XD-3526,
"As a Spring XD developer, I'd like to move mongo module from XD to s c s m repo, so I can use it as source to build streaming pipeline. ",XD-3525,
"As a Spring XD developer, I'd like to move mail module from XD to s c s m repo, so I can use it as source to build streaming pipeline. ",XD-3524,
"As a Spring XD developer, I'd like to move jms module from XD to s c s m repo, so I can use it as source to build streaming pipeline. ",XD-3523,
"As an s c d user, I'd like to contribute modules that immediately reflects in module registry, so I can create stream or task definitions using the shell rest api s. Currently the registry isn t flexible, as it is pretty much hard coded at registry bootstrap level https github.com spring cloud spring cloud dataflow blob master spring cloud dataflow admin src main java org springframework cloud dataflow admin config ModuleRegistryPopulator.java L75 . ",XD-3522,
"As an s c d user, I'd like to upload custom modules using shell rest api, so I can contribute modules and create streaming batch pipelines. ",XD-3521,
"As an s c d user, I'd like to tap the primary pipeline, so I can fork the same data and do some ad hoc analysis without impacting the original stream.",XD-3519,
"As an s c d user, I'd like to refer to documentation on direct binding , so I can use it as a reference to deploy a stream that includes directly bound modules. Example code java jar spring cloud stream module launcher target spring cloud stream module launcher 1.0.0.BUILD SNAPSHOT.jar modules org.springframework.cloud.stream.module time source 1.0.0.BUILD SNAPSHOT,org.springframework.cloud.stream.module filter processor 1.0.0.BUILD SNAPSHOT,org.springframework.cloud.stream.module filter processor 1.0.0.BUILD SNAPSHOT args.0.fixedDelay 7 args.1.expression payload.contains 6 aggregate true spring.cloud.stream.bindings.output filtered code ",XD-3517,
"As an s c d user, I'd like to have documentation on deployment manifest, so I could refer to the relevant bits on partitions . I'd like to understand how streams withe ",XD-3516,
"As a s c s user, I'd like to have Gemfire message channel binder, so I can use Gemfire as the messaging middleware for low latency use cases. ",XD-3512,
"As a s c s user, I'd like to have the option to use more than one binder connection factory, so I can mix and match where I consume and publish data. More details here https github.com spring cloud spring cloud stream issues 140 .",XD-3504,
We do set a default value in xd lib spring xd dirt 1.2.1.RELEASE.jar application.yml code ... xd data home file XD HOME data config home file XD HOME config module home file XD HOME modules customModule home file XD HOME custom modules ui home file XD HOME spring xd ui dist allow origin http localhost 9889 ... code We need to document how this property can be used to allow for external services to use the XD Rest API and how you can customize it using servers.yml ,XD-3503,
"As a user, I m not able to shutdown container from Admin UI with the following stream definition deployed. code stream create swagataTestIssue definition jdbc query select employee id, employee name, employer from EMPLOYEE url jdbc oracle thin localhost 1521 orcl username springxd password xdpwd driverClassName oracle.jdbc.OracleDriver testOnBorrow false hdfs inputType application json deploy code More details here https issuetracker.springsource.com browse VESC 504 .",XD-3501,
"As a s c d developer, I'd like to document the use of BOM templates, so the general audience can use it as a reference to include external libraries dynamically.",XD-3494,
"As a XD developer, I'd like to upgrade to SI 4.2, Spring 4.2.1, and AMQP 1.5 dependencies, so I can take advantage of the latest improvements. ",XD-3493,
"As a XD developer, I'd like to move header enricher from modules repo to XD proper. ",XD-3492,
"As a s c d user, I'd like to have the option to choose Hadoop distribution of choice, so I can load the right Hadoop libraries in the CP. ",XD-3489,
"As a s c d developer, I'd like to refactor CC SPI'deployer with CF java client, so I can improve the overall design and performance. ",XD-3488,
"As a s c d developer, I'd like to pass any overrides via external config file, so I can influence and override the default module configurations. ex module resolution from a different maven coordinate . ",XD-3487,
"As a s c d developer, I'd like to add support for having different binder types for module s channels, so I can plug rabbit , redis , or kafka as the source or sink to read and write respectively.",XD-3486,
"As a s c d developer, I'd like to move rabbit module from XD to s c s repo, so I can use it as sink to build streaming pipeline.",XD-3485,
"As a s c d developer, I'd like to move kafka module from XD to s c s repo, so I can use it as sink to build streaming pipeline.",XD-3484,
"As a s c d developer, I'd like to move kafka module from XD to s c s repo, so I can use it as source to build streaming pipeline.",XD-3483,
"As a s c s m developer, I'd like to move jdbc module from XD to s c s repo, so I can use it as sink to build streaming pipeline. See also XD 2250",XD-3482,
"As a s c s developer, I'd like to support XD like features where modules bind to incoming messages via expressions or other mechanism, so I can bind message properties to every microservice modules. ",XD-3481,
"As a XD user, I'd like to orchestrate composed jobs, so I can bring multiple jobs into single workflow and operationalize.",XD-3479,
"As a XD developer, I'd like to explore repository options for composed jobs , so I have the leverage to read write composed job definitions.",XD-3478,
"The CF implementation requires that a route be created for each new app. This works fine on the happy path, but is brittle. For example, it will fail if the route required already exists.",XD-3471,
"As a s c d developer, I'd like to add hdfs sink to module registry, so I can use this module to build streaming pipeline and write to Hadoop.",XD-3466,
"As a s c d developer, I'd like to document Running on Cloud Foundry https github.com spring cloud spring cloud dataflow running on cloud foundry section in README, so it can be publicly available as deployment guideline.",XD-3463,
"As a s c d user, I'd like to create a new banner, so I can embed and display the banner when the shell server boots up. Perhaps use this banner generator http patorjk.com software taag p display f Standard t Spring 20Cloud 0AData 20Flow 20 20 3E 3E 3E 3E 3E 20 ?",XD-3462,
We currently use fixed paths like spring cloud data yarn spring cloud data yarn appmaster target spring cloud data yarn appmaster 1.0.0.BUILD SNAPSHOT.jar in yml files. Need to make define version during a build and allow to override location of those files.,XD-3461,
Create Parent pom file for build Create .settings file Migrate Timestamp task from SCSM to SCTM. ,XD-3456,
"As a module author, I would like to apply RxJava processor module with spring cloud stream. ",XD-3454,
"Upload of module launcher bits is slow because we do not take into account the CC cache. To fix this we need to use an async upload, and to somehow generate the SHA, etc, for the Module Launcher so that CC can pre empt uploading all the bits every time.",XD-3453,
"Currently we handle only a single page response from CC SPI list requests, but potentially there could be multiple ones.",XD-3452,
Currently only the STARTED application and application instance status is recognised. This issue will look at the other possible states and report them as module instance states. This would be trivial if we knew what the possible states might be and how we should interpret them for module instance state.,XD-3451,
"Currently we deploy a single instance, and ignore the ModuleDeploymentRequest instances setting. It is easy to change this in the ModuleDeployer, but there is no guarantee this will work in the ModuleLauncher, so we hold off until that can be verified.",XD-3450,
"As a s c d developer, I'd like to produce ref. documentation for s c d architecture, so I could define 1.x and 2.x deployment differences. ",XD-3447,
"Deploying a Stream with HDFS sink and JDBC as source displays incorrect information on the tooltip for the JDBC source. The issue occurs when there are more than 1 containers deployed and the source is deployed on one container and the sink is deployed on another container. I have checked the REST endpoints and they seem to show the correct information. http localhost 9393 runtime containers.json In my test case, say if there are 2 containers and source and sink are deployed on the same container, the tooltip s show correct information. The Stream I used for testing purposes is as follows noformat stream create swagataTestIssue definition jdbc query select employee id, employee name, employer from EMPLOYEE url jdbc oracle thin localhost 1521 orcl username springxd password xdpwd driverClassName oracle.jdbc.OracleDriver testOnBorrow false hdfs inputType application json deploy noformat I will attach the screenshots. This issue has also been reported when using Gemfire as source and HDFS as sink. Thanks, Swagata",XD-3446,
"As a s c s developer, I'd like to fix the Kafka binder, so I can create messaging microservices apps and successfully bind them to an operational Kafka broker. ",XD-3445,
"As a s c d developer, I'd like to setup gh pages branch for s c d and s c s m repos, so I can start pushing documentation with PR commits.",XD-3444,
Create a timestamp job that will be used a a sample for users to create their own spring boot based jobs. ,XD-3436,
"The s c s module launcher document requires update for running it on standalone, docker, lattice. Also, the docker compose yml requires fix so that modules in there are bound together.",XD-3432,
"Instead of using real moduleDeployer , try using mocks so that the module deployer downloading the maven co ordinates from repo can be avoided for module deployment case . Since module deployer and controllers are tested individually, it would be good to focus on shell functionality only for the shell tests.",XD-3431,
"As a s c d developer, I'd like to provide optional key value pairs as deployment properties, so I could leverage them at the runtime to instruct how the modules will be deployed. The scope of this story is to specifically support count to represent N instances of modules that share the same environment variables. ",XD-3430,
"As a s c d developer, I'd like to have module info , module list , module register , and module unregister commands, so I can interact with ModuleRegistry .",XD-3425,
"As a user, I need to be able to deploy a task boot jar via the CLI. ",XD-3423,
Can take from previous implementation in XD SI Boot. Should have a way to enforce not skipping tests based on an environment variable. Consider moving this coverage to SI commons or equivalent. ,XD-3421,
"As a s c d developer, I'd like to create ModuleRegistry implementation, so I can use this infrastructure to lookup module coordinates by name.",XD-3419,
"As a s c s developer, I'd like to enable offline mode for AetherModuleResolver , so I can pull the module artifacts from local instead of remote maven repo.",XD-3418,
Make ChannelBindingAdapter implement SmartLifecycle so that it gets started with the highest precedence and before any other message producing bean.,XD-3417,
"As a s c d developer, I'd like to create foundation to support processor as OOTB modules, so I can use the processor modules from s c s m repo to build streaming pipeline.",XD-3416,
"As a s c d developer, I'd like to create a new project to contain all the rules associated RedisRule contract, so it is isolated from core functionalities and reusable by test coverage as needed. Consider moving this coverage to SI commons or equivalent. ",XD-3414,
"As a Spring XD developer, I'd like to port SFTP module from XD to s c s repo, so I can use it as source modules to build streaming pipeline. ",XD-3412,
"As a s c d developer, I'd like to move the external library to its own project, so we have a clear separation of functionalities in s c d repo.",XD-3411,
"As a s c s developer, I'd like to refactor the current ModuleLauncher contract with Boot s JarLauncher API, so we don t have to maintain duplicate functionality.",XD-3406,
"As a s c d developer, I'd like to experiment how do we resolve and then add module dependent JAR s to Boot loader, so I have an approach to handle external libraries required by OOTB modules. ",XD-3405,
"As a s c d developer, I'd like to make the deployer work asynchronously, so I can use the shell to return quickly and also queue deploy operations within YARN as tasks.",XD-3404,
"As an s c d developer, I'd like to add support to negotiate with the ResourceManager REST APIs to deploy modules by groups. so I can build instrumentation to start the App instances automatically. Perhaps also take into account of the App specifics such as appType CLOUDDATA and appName spring cloud data yarn app . ",XD-3402,
"As a s c d developer, I'd like to add support to deploy YARN App into HDFS automatically, so I can have the xd admin orchestrate overall deployment by leveraging the manifest to deploy where and with what assets.",XD-3401,
"As a s c d user, I'd like to have the option to support passing definition parameters into YARN container, so I can effectively use those params within the module running inside the container.",XD-3400,
Build SCS and SCD projects upon change in github repo. Push docker image for SCD Admin to docker hub,XD-3399,
"As a s c s developer, I'd like to create auto configuration for singlenode binder configuration properties, so I can automatically configure the Spring application based on the dependencies.",XD-3398,
As a user I should be able to use the existing admin UI client for spring cloud data admin with the appropriate server configurations.,XD-3397,
"Spring cloud data admin requires lattice connector and spring cloud spring service connector dependencies so that the admin controllers get access to any services while running on lattice. One example is, CounterContoller using redis service for MetricRepository.",XD-3396,
Improve Spring Cloud Stream module launcher resolver properties 1 Support comma separated remoteRepositories 2 Classify group the properties,XD-3395,
"Spring Integration 4.2 changed the default SFTP session factory to not accept keys from unknown hosts by default. This is more secure. You either have to provide a pre populated known hosts file or set allowUnknownKeys to true. If you do both, the keys will be automatically added to the known hosts file. When updating XD to 4.2.0.RC1 I simply set the boolean to true, to retain the previous behavior. Add properties to the SFTP source to allow configuration of these properties at the stream level. ",XD-3394,
"As a s c d developer, I'd like to upgrade receptor client to comply with latest Receptor API changes, so I can sync up and take advantage of the recent improvements. ",XD-3393,
"As a Spring XD developer, I'd like to move trigger module from XD to s c s repo, so I can use it as source to build streaming pipeline. ",XD-3388,
"Hi, Passwords are visibly when using custom modules. Attached is example custom module code and xd shell script to reproduce the problem using stream module of type processor on Spring XD 1.2.1.RELEASE. Compile with Maven mvn clean install and run xd shell script xd shell cmdfile . runme.cmd . ",XD-3387,
"As an s c d developer, I'd like to investigate the distributed deployment of s c s modules on YARN, so I can experiment the implementation of YARN SPI and derive the strategy for YARNModuleDeployer .",XD-3384,
"As a module author, I want to be able to test my code in next to real world conditions ie Integration Testing, but not really I want all my module wiring to be testable I want all my module configuration ConfigurationProperties to be in effect, and I want to be able to test various combination of props I want to be able to send data to my module and assert what is coming at the other end I want an idiomatic way of asserting the above eg integration with Hamcrest, etc I DONT want to have to send data to an actual bus redis, rabbit, etc ",XD-3381,
"Currently, EnableModule hardcodes references to both the redis and rabbit configuration classes, which trigger or don t trigger based on the presence of another jar which itself has the meat of the configuration . This is typically what boot AutoConfiguration is for. Moreover, adding a new binding eg Kafka or a stub for module testing would require to crack open EnableModule",XD-3380,
"As a Spring XD user, I'd like to use the latest releases of HDP PHD distros, so I can leverage the latest features to create pipelines involving HDFS .",XD-3378,
Currently the DSL parsing for tasks is a copy and paste of what it is for streams minus the ability to parse multiple modules . This results in a lot of duplication. This should be refactored to remove duplication and remove explicit references to either streams or tasks in common code.,XD-3377,
"As a Spring XD developer, I'd like to move gemfire module from XD to s c s repo, so I can use it as sink to build streaming pipeline.",XD-3376,
"As a s c d developer, I'd like to move rabbit module from XD to s c s repo, so I can use it as source to build streaming pipeline.",XD-3375,
"As a Spring XD developer, I'd like to move redis module from XD to s c s repo, so I can use it as sink to build streaming pipeline.",XD-3374,
"As a Spring XD developer, I'd like to port FTP module from XD to s c s repo, so I can use it as sink modules to build streaming pipeline.",XD-3370,
"As a Spring XD developer, I'd like to port file module from XD to s c s repo, so I can use it as sink module to build streaming pipeline.",XD-3369,
"As a Spring XD developer, I'd like to port router module from XD to s c s repo, so I can use it as sink module to build streaming pipeline.",XD-3368,
"As a Spring XD developer, I'd like to port transform module from XD to s c s repo, so I can use it as processor module to build streaming pipeline.",XD-3367,
"As a Spring XD developer, I'd like to port filter module from XD to s c s repo, so I can use it as processor module to build streaming pipeline.",XD-3366,
"As a Spring XD developer, I'd like to move twittersearch module from XD to s c s repo, so I can use it as source modules to build streaming pipeline. ",XD-3365,
"As a Spring XD developer, I'd like to move twitterstream module from XD to s c s repo, so I can use it as source modules to build streaming pipeline. ",XD-3364,
"As a Spring XD developer, I'd like to port tcp module from XD to s c s repo, so I can use it as source module to build streaming pipeline. ",XD-3363,
"As a Spring XD developer, I'd like to port http module from XD to s c s repo, so I can use it as source module in streaming pipeline. ",XD-3362,
Enable spring cloud config for all modules Add spring cloud config client to pom dependencies. Add bootstrap.yml to scs project ,XD-3360,
"User can configure spring cloud data via via Spring Cloud Config, data admin.yml or Spring Cloud Connector Add bootstrap.yml to spring cloud data create a default data admin.yml and configure spring data to look for this vs application.yml. Spring Cloud Data will have Spring Cloud Config enabled by default User has the ability to disable it via the bootstrap.yml",XD-3359,
"As a s c d developer, I'd like to derive a strategy for module metadata via ConfigurationProperties , so I can implement module info command in shell to list all the module properties. ",XD-3355,
This could focus only on the subset Stream operations ,XD-3354,
As a user I would like to have shell interface to the spring cloud data rest API. The scope for this JIRA could be limited to stream commands.,XD-3353,
Create Confguration and ConfigurationProperties. Configuration must support replacing the default Kryo Codec implementation with something else.,XD-3352,
"As a s c d developer, I'd like to add support to expose counter metrics endpoints, so I can consume to feed the dashboards to demonstrate firehose counter pipe.",XD-3350,
"As an s c s developer, I'd like to brainstorm and design the foundation to port XD modules as s c s modules, so I can use it as the base and start migrating the modules.",XD-3349,
"As a s c d developer, I'd like to add support for profiles to the core Admin application, so I can back the stream repository with respective backend strategy. For example local profile would use in memory strategy to store the metadata.",XD-3348,
Apply the same strategy for the Module Command Tests also to all other Shell integration tests.,XD-3347,
"As a s c d developer, I'd like to implement undeploy operation for singlenode single JVM , so I can use this target to undeploy a running stream. More details in this PR https github.com spring cloud spring cloud data pull 19 . Note Its a prerequisite to determine consistent undeploy strategy for both jobs and streams . ",XD-3344,
"As a s c d developer, I'd like to publish the s c d image to DockerHub, so I can incrementally push the latest commits to the remote location.",XD-3341,
"As a s c d developer, I'd like to add support for dependency resolution, so when two or more modules use different version of jars ex direct binding of two modules that include different versions of spring data , I have the capability to resolve and include the right bits at runtime.",XD-3339,
"As a s c d developer, I'd like to investigate how to include exclude msg bus binding jars, so I can decide the binding selection and fallback mechanism when there is none setup.",XD-3337,
"The current implementation makes use of cf java client, which is relatively heavy for our needs. It should be removed in favour of a bespoke RestOperations wrapper. See https github.com Zteve test cc oauth for sample code.",XD-3334,
This class should not know what the test app is. This means changing the constructors on CloudFoundryApplication.,XD-3333,
As part of moving to a bespoke RestOperations application we will need credentials to access CloudFoundry. These will need to be supplied from the new XD Admin app at runtime.,XD-3332,
The current ModuleRunner is test app used for validation. This should be replaced by a real app.,XD-3331,
Currently undeploy is a no op.,XD-3330,
Currently there is no ModuleInstanceStatus returned. This issue will fill in the details.,XD-3329,
Remove all stubs and check all required information is returned accurately.,XD-3328,
"A ModuleDefinition contains parameters, which need to be passed to the CloudFoundry application. Currently these are put directly into the application s environment. This issue will verify they are correctly named.",XD-3326,
ModuleDefinition contains bindings that need to be passed to the ModuleRunner app. It appears these can be included in the application s environment.,XD-3325,
"As a s c s developer, I'd like to setup CI infrastructure for spring cloud stream modules s c s m repo, so I can build the project continuously on every commits. ",XD-3322,
"As a s c d user, I'd like to add REST support for stream commands, so I can maneuver streaming pipeline backed by StreamController.",XD-3320,
"As a s c s developer, I'd like to investigate the right approach to port PHD as the provider to support HDFS module from XD, so I can decide better handling of HDFS dependencies, which needs loaded and available in root CP at the runtime. ",XD-3319,
"As a s c s developer, I'd like to bootify ModuleLauncher , so I can use Spring Boot s support for property, setting, as well as adding options and new functionality in the future, such as CP augmentation. ",XD-3318,
"As a s c d developer, I'd like to resolve and then add module dependent JAR s to Boot loader, so I have an approach to handle external libraries ex database drivers required by OOTB modules. ",XD-3317,
"As a s c d developer, I'd like to setup CI infrastructure for s c d repo https github.com spring cloud spring cloud data , so I can build the project continuously on every commits. ",XD-3316,
"As a s c s developer, I'd like to adapt redis counter from XD to s c s, so I can build streaming pipes using s c s modules with simple counters to feed dashboards. ",XD-3315,
"As a s c d developer, I'd like to invoke REST APIs via shell, so I can validate StreamController operations.",XD-3314,
"As a spring cloud data developer, I'd like to use an in memory stream definition repository, so I'don t have to spin up a store; obviously, this will not persist between application executions, but it will be useful for a simplified development experience. ",XD-3313,
"As a s c s developer, I'd like to move spring cloud stream modules from s c s to s c repo, so I can cleanup s c s project and at the same time make these modules visible outside of s c s.",XD-3312,
"As a s c d developer, I'd like to create ModuleRegistry stubs, so I can create mock streams by interacting with the registry APIs.",XD-3311,
"As a s c d developer, I'd like to establish the foundation to expose REST APIs to interact with the xd admin and likewise perform CRUD operations to maneuver streaming and batch pipelines. ",XD-3310,
"As a s c s user, I'd like to have the option to direct bind modules , so I'don t have to use messaging middleware and I can eliminate latency between them. This is important for high throughput and low latency use cases. ",XD-3309,
"As a developer, I need to be able to run batch jobs that use the centrally configured job repository to store job state. h2. Back story The XD containers each used a BatchConfigurer implementation RuntimeBatchConfigurer to add a consistent configuration for the job repository. This functionality needs to be replicated in some way in just a regular Spring Boot application.",XD-3300,
"As Spring XD, I will be able to launch Spring Boot jar files as Diego Tasks. h2. Back story The TaskLauncher will be responsible for listening for launch requests, looking up the definition in the TaskDescriptorRepository , and launching it. The first implementation of this would be a Receptor based implementation. The scope here is to produce a basic version of TaskLauncher and incrementally evolve into comprehensive launch capabilities. See https docs.google.com document d 1q964adRCA kJke i0GBToJHLXJJTV 7TaTpQT0ymsbc edit",XD-3298,
"As a developer, I'd like to be able to run a boot jar as a task on CF and obtain the result reliably. h2. Back story Currently Lattice Diego s tasks implementation provides the ability to run things as short lived tasks. However, obtaining the result of said task can be an issue. There are two ways to do so Poll for the result. Register a callback URL to be called once the task completes. Since a task is only available for a short time after its completion before it is deleted, polling can run the risk of missing the result completely. When you consider the fact that the provided GUIDs that identify tasks can be re used polling becomes a precarious option. Registering a callback URL would be a better option, however there are no good guarantees that the message will be delivered. The service will try to execute the callback until it s successful or the task is cleaned up. Successful is defined in this case as anything other than a 502 or a 503 return code. In order for Spring XD to be able to support Diego tasks, a more durable option for maintaining the result of tasks will need to be developed. Note The outcome of this spike may be feature requests for the CF Diego team.",XD-3296,
"As a developer, I'd like to be able to configure common dependencies for the entire environment. An example could be that I use MySql for my databases. I want to be able to configure the MySql driver once and have all modules use it. h2. Back story Spring Batch uses a database to store job state the job repository . This is a shared resource across all jobs both custom developed and OOTB . In order to support OOTB jobs, we ll need to have a way for users to provide the db driver to each module. Ideally this would be possible without requiring that each of our OOTB modules be repackaged. ",XD-3295,
"As a s c s developer, I'd like to setup a CI workflow to build, bundle and upload the module launcher image to DockerHub, so I'don t have to worry about having a local private docker registry for development testing. It could be nice to have the image uploaded to existing spring cloud https registry.hub.docker.com repos springcloud DockerHub location. ",XD-3288,
"As a Spring XD developer, I'd like to port FTP modules from XD to s c s repo, so I can use them as source modules to build streaming pipeline.",XD-3283,
"As a s c s developer, I'd like to setup CI builds for s c s builds, so I can incrementally build and test code commits automatically.",XD-3282,
"As a Spring XD developer, I'd like to self register xd admin server with Eureka , so I could have admin server exposed as discoverable endpoint. ",XD-3281,
"As a Spring XD developer, I'd like to refactor current controller with SPI calls, so I can invoke the respective Admin SPI implementation based on the deployment. Controllers to Refactor ContainersController StreamsController ModulesController JobsController ",XD-3277,
"As a s c s user, I'd like to have my modules add update it s current state to Eureka, so I can use the repository to discover the current sate of the module as needed. ",XD-3276,
"As a s c s user, I'd like to store module metadata in Eureka , so I can use the repository to determine the current state.",XD-3275,
"As a s c s user, I'd like to search the modules by it s name aside from the default spring.application.name offered by boot, so I can also fetch modules by it s name.",XD-3274,
"As a s c s user, I'd like to have the modules self register itself with Eureka whenever they re installed, so I can also discover the same modules using Spring XD Admin SPI and reuse them to create data pipelines. ",XD-3273,
"As a Spring XD user, I'd like to make SPI implementation profile aware, so I can run java jar admin or cf push admin or ltc create admin and the corresponding implementation gets wired in automatically.",XD-3271,
"As a Spring XD developer, I'd like to create initial version of the new module registry abstraction, so we could leverage the foundation to make progress and test the respective SPI receptor or cloudcontroller implementations.",XD-3270,
"As a Spring XD developer, I'd like to have a permanent location of SPI implementations, so I could use the common repo every time I contribute or enhance the test coverage. ",XD-3269,
"As a Spring XD on CF user, I'd like to use Receptor implementation of Admin SPI every time I'deploy Spring XD modules, so I can leverage the SPI to query for module status and health metrics. Possible APIs code ModuleStatus getStatus ModuleDescriptor descriptor ; Collection ModuleDescriptor listModules ; Map ModuleDescriptor.Key, ModuleStatus code ",XD-3267,
"As a Spring XD user, I'd like to use CloudController based implementation of XD Admin SPI based on ModuleLauncher , so I can run data pipeline use cases running on CF. Relevant repos spring cloud data https github.com spring cloud spring cloud data tree master spring cloud data module deployers spring cloud stream https github.com spring cloud spring cloud stream Please refer to XD 3194 or XD 3229 as sample spike deliverables google doc that were completed in the last sprint. ",XD-3265,
Add Pagination to Containers Page,XD-3262,
There is a vulnerability in Groovy that is fixed in 2.4.4 CVE 2015 3253 Remote execution of untrusted code See http groovy lang.org security.html http mail archives.apache.org mod mbox incubator groovy users 201507.mbox 3CCADQzvmmYC7RbZnsQ8O63XN4HCMYh9RGRdMiuWupVt u pjH8 g mail.gmail.com 3E ,XD-3261,
"As a developer, I'd like to move serialization codec from Spring XD repo into SI, so I can update Spring XD to inherit the features functionalities via maven dependency.",XD-3260,
replace with xd.messagebus prefix with spring.cloud.stream.binder,XD-3259,
We need to have some jars as part of the Sqoop job submission to YARN for Avro we need avro 1.7.6.jar avro mapred 1.7.6.jar for Snappy we need snappy java 1.0.5.jar note the 1.1.0.1 version from xd lib doesn t work commons compress 1.4.1.jar We can either have these included using the libjars option or automatically include them. ,XD-3258,
"As a developer, I'd like to brainstorm and investigate various techniques around installation of XD modules from a maven repo, so I could define the module artifactId from CLI to have the module downloaded from the repo and installed to a running Spring XD runtime.",XD-3256,
"The spring cloud streams samples have module options classes copied over from XD. They should use a pure ConfigurationProperties approach, making sure metadata is generated hand written as appropriate. Mixins are still referenced there but obviously can t work, so provide an equivalent",XD-3250,
"This better aligns with boot. Moreover, using Class was a bad design choice one can always get a Class from a String modulo knowing which CL to use , while to converse is not always easy CL not being available ",XD-3249,
"Currently we can only do plain inserts, should follow same logic from native gpfdist sink and add upserts.",XD-3241,
Currently only database connection info can be read from a control file yml format. Should add rest of the missing options to align how native format works.,XD-3240,
"As a developer, I'd like to move 1.2.x branch to EC2 infrastructure, so I can reliably run CI test suites.",XD-3239,
"As a developer, I'd like to complete the remaining Kryo optimization changes, so I can polish and get the guidelines documented appropriately. ",XD-3238,
The XML REST endpoints are not working correctly interfere with security are not used ,XD-3234,
"As a developer, I'd like to create an annotation EnableModule driven programming model for modules, so instead of explicitly defining I O channels as beans on the module, for classes annotated with EnableModule , the application would be responsible for creating the actual channel beans and channel adapters vs. the developer creating concrete channel instance types. The Input and Output annotations will be used to indicate the input and output channels of the module. ",XD-3233,
"Also Spring Framework 4.2.0.RC2, Spring AMQP 1.5.0.M1 Also Batch 3.0.4",XD-3232,
"As a developer, I'd like to update Ambari installed Spring XD cluster to spin up multiple instances of XD Admin servers, so it is setup for HA. ",XD-3231,
"As a developer, I'd like to upgrade to Reactor 2.0.4 release, so I could leverage the latest improvements and bug fixes.",XD-3230,
"As a s c s user, I'd like to investigate the possibility of s c s modules self registering themselves to service discovery, so I could use Spring XD runtime running on CF to discover and orchestrate such modules through streams.",XD-3229,
"As a Spring XD user, I'd like to use Diego based Receptor implementation of XD Admin SPI based on ModuleLauncher , so I can run data pipeline use cases running on CF Lattice Diego. ",XD-3228,
"As a developer, I'd like to develop a singlenode in a single JVM implementation of XD Admin SPI based on Module Launcher , so I can run data pipeline use cases locally. ",XD-3227,
"As a developer, I'd like to move serialization codec from Spring XD repo into spring bus, so I can update Spring XD to inherit the features functionalities via maven dependency.",XD-3226,
"As a developer, I'd like to move input output type conversion from Spring XD repo to spring cloud dataflow, so I can implement a custom module which produces or consumes a custom domain object.",XD-3225,
"As a developer, I'd like to move message bus from Spring XD repo into spring bus, so I can update Spring XD to inherit the features functionalities via maven dependency. ",XD-3224,
As a user I would like to connect the Sqoop batch job to Teradata for import jobs. I have tried the Teradata JDBC driver directly using code job create tdTest definition sqoop command import args table Frequent Flyers connect jdbc teradata tdexpress DATABASE transportation driver com.teradata.jdbc.TeraDriver username dbc password dbc target dir xd teradata num mappers 1 code but that results in an NPE. The only way so far is to use the Hortonworks Connector for Teradata http public repo 1.hortonworks.com HDP tools 2.2.4.2 hdp connector for teradata 1.3.4.2.2.4.2 2 distro.tar.gz That one allows me to use the following code job create tdTest definition sqoop command import args table Frequent Flyers connect jdbc teradata tdexpress DATABASE transportation connection manager org.apache.sqoop.teradata.TeradataConnManager username dbc password dbc target dir xd teradata num mappers 1 code ,XD-3222,
"As a user, I'd like to upgrade Spring XD from 1.2 RC to 1.2 GA using the Ambari plugin, so I can work on the latest release bits. I'd like to refer to the documentation to do so.",XD-3205,
"As a spring bus lead, I'd like to review the current spring bus architecture and the design specs, so I can address any foundation level gaps.",XD-3204,
"As a developer, I'd like to investigate channel performance issues in SI 4.2, so I can determine the bottlenecks and take corrective actions to improve overall channel performance. ",XD-3202,
"As a developer, I'd like to use spring cloud config server for spring bus modules, so I can centrally manage external properties.",XD-3198,
"As a developer, I'd like to migrate the current MASTER branch CI builds to EC2 instances, so I can manage them all in one place reliably.",XD-3196,
"As a developer, I'd like to have a central place to manage external properties for applications across all the environments, so I can provide server and client side support for externalized configuration for XD Admin and XD Container servers. ",XD-3194,
"As a developer, I'd like to handle module options via pure boot property source management, so I can leverage Boot s module METADATA http docs.spring.io spring boot docs current SNAPSHOT reference htmlsingle configuration metadata option to inject module options as opposed to maintaining them in core Spring XD runtime CP. ",XD-3193,
"As a user, I'd like to have the module app specific metrics consumed directly from Boot actuator export https github.com spring projects spring boot blob master spring boot actuator src main java org springframework boot actuate autoconfigure MetricRepositoryAutoConfiguration.java API, so I can have insight on how it is performing, being used and that it works etc. ",XD-3192,
User s need ability to wait for user specified time in millis for a file to be created in the XD directory. If file is not created in allotted time then return false else return true. Also check to see if a file exists in the XD directory. ,XD-3189,
We need to add the settings needed to run XD on YARN when using Hortonworks HDP 2.2.6.0 which is the version you now get when installing with Ambari.,XD-3184,
"Spring Boot 1.2.4 and earlier does not allow for the retrieval of boolean values from the vcap environment. This means that when XD Admin tries to retrieve the value of for example vcap.services.rabbitmq.credentials.protocols.amqp.ssl it will fail, as that value returns a boolean. Spring Boot 1.2.5 as yet unreleased contains a fix for this issue https github.com spring projects spring boot pull 3237 ",XD-3183,
spring xd Can drag way to configure flow in the form of figure? Similar to configure a workflow graphical interface Looking forward to reply,XD-3180,
"When the bus is used outside of the XD container e.g. spring bus , the inheritance from Spring Boot configuration is broken no application.yml or servers.yml on the cp . Make the bus properties optional Add ",XD-3177,
Depends on INT 3727,XD-3172,
As a user I need to know the Spark streaming features like adding tap at the spark module output and the examples need to be updated. The documentation also needs some more information on Reliable receiver.,XD-3170,
"As a developer, I'd like a job module to be bootstrapped when the job is launched and shut down once it is complete instead of the current behavior of bootstrapping the context when the module is deployed regardless of if it s being used so that I can achieve better resource utilization.",XD-3169,
"As a developer, I'd like to publish performance benchmarks along with the infrastructure specifics, so the users can use it as a reference while setting up Spring XD cluster. ",XD-3166,
"As a PM, I'd like to have XD and XD Ambari RPM scripts into a single public repo, so that users can go to a single location to use the respective build scripts.",XD-3165,
"As a developer, I want to be able to override Kafka bus defaults for module consumers and producers, so that I can finely tune performance and behaviour. Such properties should include autoCommitEnabled,queueSize,maxWait,fetchSize for consumers batchSize,batchTimeout for producers",XD-3164,
Need acceptance tests to run on the 1.2.X branch. Needs to be setup as a child of the Publish 1.2.x,XD-3161,
"Sort alphabetically, nest Available modules section appropriately. Optionally, move to a whole different PART in reference doc",XD-3160,
"As a developer, I in the new development of component source processor sink , how to get the module id and container id Because components need to generate log, log information must include the unique identifier xd runtime modules ",XD-3157,
"As a developer, I'd like to update to Spring Hadoop 2.2.0 GA release, so I can leverage the latest improvements. ",XD-3154,
"As a developer, I'd like to update to SI Kafka extension 1.2.0, so I can leverage the latest performance improvements.",XD-3153,
"As a developer, I'd like to update to the 4.1.5 SI release, so I can pickup the latest improvements to message channels.",XD-3152,
Some info is obsolete and add more content re. dependency management,XD-3151,
"The stream definition example uses old style syntax, should be mode ref instead of ref true ",XD-3149,
There is an hadoop core 2.5.0 mr1 cdh5.3.3.jar in the lib cdh5 directory we need to remove that from the dist,XD-3148,
"As a developer, I want to be able to construct jobs using a DSL similar to the current syntax for streams. ",XD-3147,
"As a user, I'd like to have a landing page with higher order links for sources, processors, sinks and jobs, so I can jump to right section from one place. ",XD-3140,
"As a user, I'd like to refer to the analytics tab docs, so I can understand how to use various widgets from streaming pipeline. ",XD-3139,
This is in reference to the investigation done as part of XD 2548,XD-3138,
This addresses The plugin issue https www.jfrog.com jira browse GAP 172 to disable spring xd pom.xml,XD-3137,
"As a user, I'd like to refer to OOTB batch jobs and the documentation, so I can jump to the right job section and review details. ",XD-3127,
"This is an enhancement to KryoClassRegistrar or a related mechanism to initialize codecs using custom serializers to improve serialization performance. Currently XD will support POJOs that implement the kryo Serializable interface to gain a 2x performance improvement, however initial benchmarks show that custom serializers are about 10 more performant than Serializable.",XD-3126,
"Currently kryo class registration is hard coded in spring xd codec. Users may register their own classes using an extension mechanism, but it is possible to conflict with internal XD class registration, e.g., Tuple. Exposing this using the same extension mechanism will make it more transparent. ",XD-3125,
"As a user, I'd like to start multiple instances of xd container s through the RPM scripts, so I can easily spin up instances on the same node vm.",XD-3118,
Occasional CI test build failures quote Caused by java.lang.IllegalStateException Container cache not initialized likely as a result of a ZooKeeper connection error at org.springframework.util.Assert.state Assert.java 385 at org.springframework.xd.dirt.container.store.ZooKeeperContainerRepository.ensureCache ZooKeeperContainerRepository.java 184 at org.springframework.xd.dirt.container.store.ZooKeeperContainerRepository.findOne ZooKeeperContainerRepository.java 263 quote e.g. https build.spring.io browse XD JDK8 JOB1 1514 Add logging to ensureCache e.g. in childEvent and closeCache to log that the cache was closed; it appears that s the only way the cache not initialized message can be emitted.,XD-3117,
RPM scripts will need to change.,XD-3116,
Provide unit tests,XD-3115,
https sonar.spring.io drilldown issues org.springframework.xd spring xd?severity CRITICAL,XD-3113,
This type is used in password field in the jdbc sink module provided by Spring XD defined in org.springframework.xd.jdbc.JdbcConnectionMixin class . It seems that Spring XD Admin UI is always displaying the password in plain text please see attached screen shot. Is there a way to somehow hide the passwords used as module properties in streams from being displayed in Spring XD Admin UI? This is similar issue as below and fixed in batch jobs but not in streams. https github.com spring projects spring xd pull 1325,XD-3112,
"As a developer, I'd like to clean up compiler and javadoc warnings from the build, so we don t see the warnings in build sysout.",XD-3110,
"As a XD build master, I'd like to fix local . gradlew dist and distZip targets the outstanding build issues, so I can evaluate that publish builds works as expected. ",XD-3107,
XD EC2 needs to allow user to set the XD JMX ENABLED flag in the environment prior to admin or container startups. ,XD-3106,
"As a developer, I'd like to have JMX turned off by default, so I can take advantage of the performance throughput benefits. ",XD-3105,
"As a developer, I'd like to upgrade to 2.0.3 release of Reactor, so I can inherit the latest optimizations to further improve XD performance characteristics. ",XD-3103,
"As a developer, I'd like to rerun baseline , Tuple , and Serialized payloads, so I can compare the differences in performance between 0.8.1 and 0.8.2 Kafka releases. Sinks to be included in test In Memory Transport Hdfs sink Direct Binding Transport Hdfs Sink Kafka Hdfs Sink",XD-3102,
Also provide better lifecycle shutdown mgmt of handler.,XD-3096,
"There are a range of issues such as XD 3083, XD 2671 that are caused by asynchronous deployments issued by the REST API. The flow of events is deploy undeploy request received by REST API controller queues up request to be processed by supervisor controller returns HTTP 2xx This proposal is to have the thread executing the deploy undeploy request block until the request has been processed by the supervisor. This will have the side effect of deploys appearing to take longer, but when the HTTP request completes, the deployment undeployment will have been fulfilled. ",XD-3092,
The incremental load introduced with XD 2309 should be added to the batch docs,XD-3089,
"As a developer, I'd like to default to HDFS as distributed remote location for custom module registry, so I can use xd shell or the REST API'directly to upload the custom module bits. I would also like to remove custom modules.zip artifact from YARN distribution.",XD-3077,
"As a user, I'd like to use the Mail source to connect to secured IMAP and or SMTP mail servers. Mail source config file requires a util properties bean with ssl tls properties , provided to the adapter via the java mail properties attribute. Ref. Example http docs.spring.io spring integration docs latest ga reference html mail.html . code xml beans beans profile default util properties id javaMailProperties beans prop key mail.imap.socketFactory.class javax.net.ssl.SSLSocketFactory beans prop beans prop key mail.imap.socketFactory.fallback false beans prop beans prop key mail.store.protocol imaps beans prop beans prop key mail.debug false beans prop util properties beans beans code List of all java mail properties https javamail.java.net nonav docs api com sun mail smtp package summary.html ",XD-3076,
"As a Flo developer, I'd like to add improvements to existing Flo parser endpoints, so I can streamline the error reporting strategy.",XD-3072,
"As a developer, I'd like to bench Rabbit on rackspace infrastructure, so I can have a sense on how it scales as we add more xd container nodes.",XD-3071,
"The POC for XD on Lattice uses the following interface for module deployment https github.com markfisher xolpoc admin blob master src main java xolpoc spi ModuleDeployer.java code public interface ModuleDeployer void deploy ModuleDescriptor descriptor ; void undeploy ModuleDescriptor descriptor ; ModuleStatus getStatus ModuleDescriptor descriptor ; code This spike is to introduce this interface and the Lattice implementation in the XD admin. The goals are to Demo a POC showing simple stream deployment with the existing shell admin to Lattice Learn from the experience to help guide the re architecture splitting of stream job repositories especially in regard to AbstractDeployer and related classes . Note that this work will not necessarily be merged into XD itself, although some of the concepts may be included in a future PR.",XD-3070,
"If you have a an option mode textLine , presently the enum MUST be named textLine . I think it would improve the user experience if we allowed users to pass in values such as mode textLine mode text line mode TEXT LINE ",XD-3066,
"Polled message sources return only one message per poll by default. When polling, say, a file directory with many files, files will be emitted once per fixedDelay . As a user I need to configure a limit for the number of messages that will be emitted per poll.",XD-3063,
"This is a source module for video ingestion the modules captures video frames from a camera or from a video file. For camera, the frames are grabbed from the rtsp video stream. This module will generate message with the frame image encoded with JPEG as the payload. ",XD-3056,
"As a developer, I'd like to move the project reactor based gpfdist https github.com spring projects spring xd modules tree master gpfdist from spring xd module repo to the core, so I can natively use this sink to write to GPDB HAWQ. ",XD-3052,
"As a developer, I'd like to move the project reactor based data processor module https github.com spring projects spring xd modules tree master spring xd reactor from spring xd module repo to the core, so I can natively use Reactor s Stream API to build processor modules. ",XD-3050,
Identify and report hotspots while running the load generator source and the throughput sink on Singlenode In Memory Transport Singlenode Kafka Transport Admin Container Kafka Transport,XD-3049,
Complete and submit DEBS 2015 paper as described here http www.debs2015.org camera ready instructions.html,XD-3047,
"As a user, I'd like to use the GF source along with native GF authentication enabled, so I can consume data from GF in a secured way. I'd like to refer to documentation on where the GF specific native and security properties needs configured. See this SC post https gopivotal com.socialcast.com messages 24377202 for more details.",XD-3043,
"As a user, I'd like to use Boot based ModuleRunner for use in container managed environments, so I can run XD without xd containers . Scope ",XD-3040,
See http docs.spring.io spring xd docs current SNAPSHOT reference html introduction 26 There should be chapter section title before this.,XD-3036,
"Spring Data Gemfire is version 8.0.0 in Folwer, which is the same as in BDS Should check minor version number in BDS . ATM we are using gemfire 7.0.x",XD-3033,
4.1.4 and 1.4.5 respectively.,XD-3027,
"As a user, I'd like to have a REST API to get all the counters , gauges , and rich gauges in a single request, so I'don t have to issue multiple request to fetch each one of the metrics by name id for custom dashboards. Example code metrics counters all fetches all available counters metrics gauges all fetches all available gauges metrics rich gauges all fetches all available rich gauges code ",XD-3024,
"As a user, I'd like to refer to the documentation, so I can configure HDFS backed module registry XD 2287 as recommended. ",XD-3019,
"We should update to use spring data hadoop 2.2.0.M1in order to use the fixes available for the HDFS writing there syncable writes, timeout . A few things to keep in mind this updates Cloudera CDH to 5.3.3 Kite version is now 1.0 need to test the hdfs dataset sink ",XD-3018,
See https sonar43.spring.io drilldown measures 7173?metric package tangle index,XD-3017,
"For example, how to specify the partition count for topics that are created by the message bus.",XD-3016,
"The file and ftp sources allow working with either the java.io.File or its contents. For consistency, the sftp source should support the same mechanism. ",XD-3013,
"Created a single definition Sqoop Job create statement. When processed through Sqoop direct see attach image for props in repos. jobname sqoop2 Notice job definition set db.require.password false and has a propname called db.password that holds the value for password. When same definition is created as a batch job via Spring XD see image jobname lookupd job , the db.require.password prop is set to TRUE and the db.password is not even created as a row. This causes a password prompt when trying to execute the job in Sqoop direct, that was created via a spring XD batch job. Note the job definition for Spring XD job contains meta connect with username and password defined as well as import jdbc connect username and password. When created via Sqoop no Spring XD password is stored and job is able to execute with no prompt. Please see attachment for repository job values. Highlighted in yellow is the discrepant property and value attribution. Please reach out if there are questions or need further details. To automate Spring XD batch job using Sqoop via Spring we can not be prompted for password. Spring XD Job definition job create sqoop lookup d job v1 definition sqoop command job args create lookupd job meta connect jdbc postgresql xx.xxx.xx.xx 5433 bdl?user xxxxx password xxxxxx import connect jdbc oracle thin xxxxxx.com xxxx GDWP username xxxxx password xxxxx query SELECT ROW WID, LKUP ID, TRIM TRANSLATE LKUP CD, CHR 10 CHR 13 , AS LKUP CD, TRIM TRANSLATE LKUP DESC, CHR 10 CHR 13 , AS LKUP DESC, TRIM TRANSLATE LKUP TYPE, CHR 10 CHR 13 , AS LKUP TYPE, TRIM TRANSLATE LKUP VAL, CHR 10 CHR 13 , AS LKUP VAL, SRC STRT DT, SRC END DT, W INSERT DT, W UPDATE DT FROM MASTERDATA.W LOOKUP D WHERE 1 1 AND CONDITIONS incremental append check column ROW WID last value 10150 target dir user monasj1 bdl data sqoop jobtest num mappers 1 fields terminated by append Sqoop Direct Definition sqoop job create sqoop2 meta connect jdbc postgresql xx.xxx.xx.xx 5433 bdl?user xxxxx password xxxxxx import connect jdbc oracle thin xxxxxx.com xxxx GDWP username xxxxx password xxxxx query SELECT ROW WID, LKUP ID, TRIM TRANSLATE LKUP CD, CHR 10 CHR 13 , AS LKUP CD, TRIM TRANSLATE LKUP DESC, CHR 10 CHR 13 , AS LKUP DESC, TRIM TRANSLATE LKUP TYPE, CHR 10 CHR 13 , AS LKUP TYPE, TRIM TRANSLATE LKUP VAL, CHR 10 CHR 13 , AS LKUP VAL, SRC STRT DT, SRC END DT, W INSERT DT, W UPDATE DT FROM MASTERDATA.W LOOKUP D WHERE 1 1 AND CONDITIONS incremental append check column ROW WID last value 10150 target dir user monasj1 bdl data sqoop jobtest num mappers 1 fields terminated by append ",XD-3006,
"The call to modules?detailed true that was introduced for Flo proves to be a performance hog, most certainly because of all the metadata resolution that has to occur there and no caching takes place ",XD-3004,
"As a user, I'd like to have the option to change the default Sqoop metastore , so I can implement a DB of my choice and not tied to default specifications. Refer to this thread http stackoverflow.com questions 24078668 how to change sqoop metastore for more details. ",XD-3003,
"Running a SQOOP Job create from within Spring XD JOB create statement runs successfully.Unable to run the Sqoop Job exec from within Spring XD Job CREATE DEFINITION job create sqoop lookup d job v1 definition sqoop command job args create lookupd job meta connect jdbc postgresql xx.xxx.xx.xx 5433 bdl?user xxxxx password xxxxxx import connect jdbc oracle thin xxxxxx.com xxxx GDWP username xxxxx password xxxxx query SELECT ROW WID, LKUP ID, TRIM TRANSLATE LKUP CD, CHR 10 CHR 13 , AS LKUP CD, TRIM TRANSLATE LKUP DESC, CHR 10 CHR 13 , AS LKUP DESC, TRIM TRANSLATE LKUP TYPE, CHR 10 CHR 13 , AS LKUP TYPE, TRIM TRANSLATE LKUP VAL, CHR 10 CHR 13 , AS LKUP VAL, SRC STRT DT, SRC END DT, W INSERT DT, W UPDATE DT FROM MASTERDATA.W LOOKUP D WHERE 1 1 AND CONDITIONS incremental append check column ROW WID last value 10150 target dir user monasj1 bdl data sqoop jobtest num mappers 1 fields terminated by append Validated job definition details stored in PostgreSQL repository Trying to run EXECUTE In Same fashion. EXECUTION DEFINITION job create sqoop lookup d exec v1 definition sqoop command job args exec lookupd job meta connect jdbc postgresql xx.xxx.xx.xx 5433 bdl?user xxxxx password xxxxx Stack Trace batch.stepType org.springframework.batch.core.step.tasklet.TaskletStep batch.taskletType org.springframework.xd.sqoop.SqoopTasklet sqoop.command job exec lookupd job meta connect jdbc postgresql xx.xxx.xx.xx 5433 bdl?user xxxxxx password xxxxxxx exec sqoop.errors No job operation specified Try help for usage instructions. Exception in thread main java.lang.RuntimeException Sqoop failed return code 1 at org.springframework.xd.sqoop.SqoopRunner.main SqoopRunner.java 81 sqoop.log 16 01 45,668 INFO main sqoop.SqoopRunner Sqoop command job 16 01 45,668 INFO main sqoop.SqoopRunner Using args exec, lookupd job, meta connect, jdbc postgresql xx.xxx.xx.xx 5433 bdl?user xxxxxxx password xxxxx 16 01 45,668 INFO main sqoop.SqoopRunner Mapreduce home opt pivotal spring xd 1.1.1.RELEASE xd lib phd21 16 01 45,679 INFO main sqoop.SqoopRunner Setting configuration property fs.defaultFS hdfs xxxxxxxxxxxxx.com 8020 16 01 45,759 INFO main sqoop.SqoopRunner Setting configuration property yarn.resourcemanager.address xxxxxxxxxxxx.com 8032 16 01 45,759 INFO main sqoop.SqoopRunner Setting configuration property yarn.application.classpath HADOOP CONF DIR, HADOOP COMMON HOME , HADOOP COMMON HOME lib , HADOOP HDFS HOME , HADOOP HDFS HOME lib , HADOOP MAPRED HOME , HADOOP MAPRED HOME lib , HADOOP YARN HOME , HADOOP YARN HOME lib , USS HOME , USS CONF 16 01 45,759 INFO main sqoop.SqoopRunner Setting configuration property mapreduce.framework.name yarn 16 01 45,817 WARN main tool.SqoopTool SQOOP CONF DIR has not been set in the environment. Cannot check for additional configuration. 16 01 45,863 INFO main sqoop.Sqoop Running Sqoop version 1.4.5 I have tested list, exec, delete they are all erroring same way. Looking at SqoopRunner not sure what makes create any different from other saved job functionality. Please let me know how i can call or execute save job definition s through spring xd Sqoop tasklet ",XD-3001,
Profile TupleCodec and implement performance optimizations,XD-3000,
"As a developer, I'd like to benchmark a stream with and without JMX enabled, so I can test in isolation, and document the differences in performance.",XD-2999,
"As a developer, I'd like to handle the non default ConfigurableConversionService tuples in an uniform manner, so they re not reset after deserialization. ",XD-2998,
"This tests should prove that Kafka can handle a module count greater than one with the proper concurrency settings. load generator should be used as the foundation for this test with the following settings module.load generator.count 10,module.throughput.consumer.concurrency 10 An environment should be provisioned to support the containers, Zookeeper and Kafka. ",XD-2994,
"As a Flo developer, I'd like to have a new DSL parser, so I can easily detect incorrect module option values when supplied from the Flo UI. Example MyStream mail log tap stream MyStream.bar log If parsed separately which Flo UI'does , the current parser endpoint will barf on the second stream because it doesn t know about the first stream MyStream . ",XD-2993,
"As a user, I'd like to consume multiple topic partitions, so I can have the option to consume from multiple data endpoints and still be able to serve the data via single queue.",XD-2992,
the update to the JMX was introduced in XD 2941. Also noticed that we should have been checking source and not sink . This was also resolved.,XD-2987,
"As a follow up to XD 2877, experiment with the removal of the list of modules from BaseDefinition and reparse as needed. Branch is here https github.com pperalta spring xd tree deploy refactor 2",XD-2986,
"As a user, I'd like to use Boot based ModuleRunner for use in container managed environments, so I can run XD without xd containers . Scope Complete the remaining deployment properties work",XD-2980,
"As a user, I'd like to use the Java receptor client, so I can interact with Diego runtime using the Java receptor REST APIs.",XD-2979,
"As a user, I'd like to run the sqoop jobs against secured hdfs cluster, so I can restrict access to only authorized users. ",XD-2973,
"As a user, I'd like to refer to the documentation to configure the properties file, so I can use it as recommended to represent the deployment manifest.",XD-2971,
"In XD today we use commons logging or slf4j APIs bound to log4j at runtime configured with log4j.properties . Boot uses slf4j APIs backed by logback. This causes some build incompatibilities building a component that depends on spring xd dirt and spring boot, requiring specific dependency exclusions. In order to simplify building and troubleshooting log dependencies, XD should standardize on slf4j APIs replace any commons logging Loggers with Slf4j . This is internal only, and would not impact users who are used to seeing log4j.properties. An additional step is to replace log4j with logback. This change would be visible to end users but will provide us greater affinity with boot and improve the developer experience. If we make this change it should go into 1.2 GA. ",XD-2970,
"As a developer, I'd like to study the state management requirements, so I can brainstorm and identify the design to natively add stateful stream processing support in XD. ",XD-2964,
"As a developer, I'd like to document performance benchmark results along with the infrastructure specifics, so I can publish the blog for customers users to use it as a reference while setting up Spring XD cluster.",XD-2962,
"As a developer, I'd like to rerun baseline , Tuple , and Serialized payloads, so I can compare the differences in performance between 0.8.1 and 0.8.2 Kafka releases. Note 1.1.1 Benched against 0.8.1 1.2 Benched against 0.8.2 ",XD-2961,
"As a developer, I'd like to upgrade to Kafka 0.8.2, so I can leverage the latest features in order to test the performance characteristics.",XD-2958,
"As a developer, I'd like to document the Kryo optimization guidelines, so the end users can refer to it while tuning to improve performance.",XD-2957,
"As a developer, I'd like revisit the design to determine the necessity for ID and TimeStamp attributes in Tuple , so I can refactor in order to improve performance throughput.",XD-2956,
"As a developer, I'd like to refactor the programmatic means by which the MessageBus transforms the Message so throughput performance can be optimized. ",XD-2955,
"Code that is in there could be moved to the SparkStreamingModule. Then, as part of a later refactoring, that plugin should be made part of the module and loaded by the module classloader ",XD-2953,
"When using the rest interface to create a Job with an empty description, used to generate the following exception, Definition can not be empty . Now generates XD112E pos 0 Unexpectedly ran out of input^ . The correct error should be, definition cannot be blank or null ",XD-2949,
"As a user, I'd like to have the ability to use expressions, so I can dynamically name directories files based on the timestamp or other intermediate data point.",XD-2947,
"As a user, I'd like to parameterize Merge Options, so I can incrementally consume the delta with the help of megastore. ",XD-2935,
"As a user, I'd like to parameterize CodeGen Options, so I can generate code on the fly as needed. ",XD-2934,
"As a user, I'd like to parameterize all Import Options, so I can eliminate the need for args option since it gets confusing.",XD-2933,
"As a developer, I'd like to document how to nest batch jobs and workflows in XD, so it will be easy for end users to use it as reference. ",XD-2929,
"The Sqoop module is generating a SQL statement for table argument that is not correct for Oracle source. The Job definition is job create sqoop lookup definition sqoop command import args connect jdbc oracle thin XXXXXXXXX driver oracle.jdbc.OracleDriver direct username password table W LOOKUP D target dir user zeybeb ingest gdw masterdata lookup d num mappers 1 deploy the table W LOOKUP D results in Sqoop Object generation 13 22 59,798 INFO main manager.SqlManager Executing SQL statement SELECT t. FROM W LOOKUP D AS t WHERE 1 0 13 22 59,861 ERROR main manager.SqlManager Error executing statement java.sql.SQLSyntaxErrorException ORA 00933 SQL command not properly ended the SQL shoudl be generate with table name t instead of table name AS t The table argument does not except a schema name. User should be able to provide schema.table name syntax. ",XD-2928,
"As a Spring XD user, I'd like to create streaming pipelines, so I can take advantage of latest specs from both XD and Spark Spark Streaming.",XD-2922,
"As a developer, I'd like to add documentation on escape quotes, so when someone using Sqoop job can double escape N instead of sending quotes N to successfully submit the job.",XD-2921,
"As a developer, I'd like to create persistent repository for streams, so I could leverage the persisted metadata and reestablish the streaming pipe under failure conditions.",XD-2919,
"As a developer, I'd like to define pluggable runtime SPI, so I have the option to choose the implementation based on deployment targets such as CF, on prem, Mesos etc.",XD-2918,
"As a developer, I'd like to create a java client https github.com markfisher receptor client for Receptor, so I can interact with Diego runtime via Receptor API calls from XD. ",XD-2916,
"As a developer, I'd like to build isolated Boot based ModuleRunner for use in container managed environments, so I can run XD without the hard requirement for running xd containers .",XD-2915,
"As a developer, I'd like to migrate module deployment from the repository abstraction used for stream job definitions , so I can create it as a pluggable runtime SPI.",XD-2914,
"As a developer, I'd like to bench test cases around TupleBuilder , so I can identify the bottlenecks and tune for performance optimizations. ",XD-2911,
"As a developer, I'd like to revisit performance benchmarks with new improvements, so I can verify the optimizations around jdbchdfs .",XD-2910,
After the Introduction to XD 2861 the acquisition of JobResources takes more time. We have to introduce a pause to wait for getJobDefinitionResource to be populated. ,XD-2908,
"As a developer, I'd like to add a new CI build to include install target, so I can verify the target expectations, as it is often time consuming to verify it in the development environment.",XD-2906,
"As a developer, I'd like to complete the remaining work with DEBS challenge, so I can submit by the deadline.",XD-2905,
"As a user, I'd like to upgrade to Spring Boot 1.2.3 release, do I can leverage the latest improvements and bug fixes. We should also sync up the following dependency updates to synchronize with Boot https github.com spring projects spring boot blob master spring boot dependencies pom.xml code logback.version 1.1.3 logback.version jackson.version 2.5.1 jackson.version gemfire.version 8.0.0 gemfire.version h2.version 1.4.185 h2.version javax mail.version 1.5.3 javax mail.version undertow.version 1.2.3.Final undertow.version joda time.version 2.7 joda time.version nekohtml.version 1.9.21 nekohtml.version activemq.version 5.11.1 activemq.version antlr2.version 2.7.7 antlr2.version commons dbcp2.version 2.0.1 commons dbcp2.version tomcat.version 8.0.21 tomcat.version aspectj.version 1.8.5 aspectj.version groovy.version 2.4.3 groovy.version crashub.version 1.3.1 crashub.version jetty.version 9.2.9.v20150224 jetty.version elasticsearch.version 1.4.4 elasticsearch.version flyway.version 3.2.1 flyway.version freemarker.version 2.3.22 freemarker.version jdom2.version 2.0.6 jdom2.version liquibase.version 3.3.2 liquibase.version mockito.version 1.10.19 mockito.version mongodb.version 2.13.0 mongodb.version slf4j.version 1.7.11 slf4j.version spring cloud connectors.version 1.1.1.RELEASE spring cloud connectors.version spring security.version 4.0.1.RELEASE spring security.version jedis.version 2.6.2 jedis.version spring ws.version 2.2.1.RELEASE spring ws.version code ",XD-2904,
"As a developer, I'd like to upgrade to SI Kafka release, so I can synchronize with latest improvements and bug fixes. ",XD-2903,
"As a developer, I'd like to upgrade to SI milestone GA release, so I can synchronize with JMX improvements. This is dependent on SI Milestone and GA release timelines.",XD-2902,
"As a developer, I would like to connect to the broker that hosts the Rabbit queue, so I can connect to a Rabbit cluster that s setup for HA FT. Perhaps consider having this feature natively supported in spring amqp itself.",XD-2899,
"As a user, I'd like to have the configuration option to use an alternative DLQ, so I can publish the message this time with additional headers, including one that contains the exception and stack trace . ",XD-2896,
While creation sqoop and providing the password for the sqoop jobs the guid does not mask the password with a .,XD-2895,
"Characters line t, n, etc. should be either escaped, or rendered as human readable variants in module info eg newline ",XD-2893,
"As a developer, I'd like to certify Spring XD against PHD 3.0, so I can synchronize with the latest ODP based bits. ",XD-2892,
"When uploading a new version of a module the admin container if there is already an existing module, the behavior should be to delete the existing contents of the module directory and replace it with that of the new upload jar. This would be an optional parameter.",XD-2891,
"Similar to the DetailedModuleDefinitionResource that is returned when querying a single module, but would be returned when listing provided a ?full flag has been turned on ",XD-2887,
"The current build ships everything that is found in the modules directory, including build artifacts such as build or IDEA .iml files. Restrict the build to only include config , lib at the moment.",XD-2885,
"As a user, I'd like to have an option to have the hdfs sink use Syncable writes to provide better resiliency in the case of sink container failures. I m willing to accept the performance penalty if I choose this option. ",XD-2882,
"As a developer, I'd like to add support for explicit partition count configuration, so I can use this option to cleverly route the payload to the intended consumer module .",XD-2879,
"As a user, I logged in with ROLE CREATE and I get an error while trying job creation from admin ui. I can create job from the shell successfully. Trying the same workflow with ROLE ADMIN results with the same error as well. I'don t see anything in the admin container logs about the error itself. ",XD-2869,
"Initial support for partitioned batch jobs initially tested with a local bus had an ExecutorChannel in the job context to enable multiple partitions to run. Otherwise, with a local bus, only one partition would run at a time. When further work was done to support other buses, this was removed and the bus was used to control partition concurrency. The LocalMessageBus was changed to use an unbounded task executor; this was wrong because now all partitions ran at once. Further changes to the local bus changed the task executor to be pooled, but with default properties that mean only one thread is used. Further, the pool configuration is bus wide so you can t use that configuration to select the concurrency for an individual job. The bottom line is that the local bus is not suitable for partitioned batch jobs; it was not anticipated that it would be used for this scenario. With 1.0.x too many partitions run all ; with 1.1.x only one thread runs by default . In the local bus, we need to use a configurable, dedicated, bounded task executor for each batch job. ",XD-2868,
"I had a custom module with a typo base packages base packages com.acme.config The module deploys without error but the stream hangs since the channels, etc. are not found in the stream plugin. Very hard to debug. ",XD-2864,
http localhost 9393 admin ui streams definitions test deploy ,XD-2859,
"As a developer, I'd like to add support for dynamic classpath for modules, so we can have the flexibility to load the right dependencies either based on module options 0 or via other properties such as including the dependencies from a specific location 1 . 0 code lib .jar lib distro .jar code 1 code xd.home lib hadoop distro .jar code Example code http hdfs distro PHD22 http myCustomModule classpath my funky dir http jpa provider eclipse jpa config lib something that is common.jar eclipse eclipse link 3.2.jar hibernate hibernate core 5.0.jar module.classpath lib .jar lib provider .jar code ",XD-2858,
"As a developer, I'd like to create a gpload tasklet, so I can ingest data from various sources into GPDB in an efficient manner.",XD-2852,
"As a developer, I'd like to use an efficient approach to read files, so I'don t have to read line by line and keep it in memory in order to consume write the file content. Would the tasklet approach be better as opposed to transmitting data via message bus as streams ? ",XD-2850,
"As a developer, I'd like to setup UI infrastructure, so I can integrate admin ui and Flo.",XD-2845,
"As a user, I'd like to have the OOTB gpfdist sink module, so I can use this module to do ultra fast data movement from various sources into GPDB HAWQ.",XD-2844,
"As a developer, I'd like to host read Python script file from HDFS, so I can use the shell processor in XD on CF to delegate data science functionality to Py runtime and receive the feedback back in XD.",XD-2839,
"As a developer, I'd like to update all the module docs to also include shortDescription so that it s available for users to learn more about the module.",XD-2838,
"As a developer, I'd like to continue XD on Lattice Diego PoC, and will be focused on the design of a pluggable SPI, so it is more generally applicable than Lattice, with the Receptor API being just one implementation option. ",XD-2835,
"Following the recent move of the doco to the main repo, it makes sense to have the doc generation be part of the main build, at an early stage, as an incentive for developers to push doc changes as soon as they change the code. ",XD-2834,
"As a developer, I'd like to create a custom job module using Java Config so that I'don t have to deal with XML configurations. While deploying launching the following job, I get the error attached below. code xml job create name CDK Global definition customBatchJob deploy module upload type job name customBatchJob file Users mminella Documents IntelliJWorkspace CustomBatchModule build libs CustomBatchModule 1.1.0.RELEASE.jar job launch name CDK Global code Error I m getting an exception that the job doesn t exist asking if it s deployed",XD-2832,
This keeps coming up as an issue that prevents us from publishing to maven central.,XD-2830,
Thanks to Gary I found this little gem of documentation to be able to use xpath expression in XD. Only hiccup is that I had to also add the spring xml.jar to the classpath otherwise it is missing XPathException class . http stackoverflow.com questions 29110757 spring xd work with xml payload,XD-2829,
"A placeholder to investigate what can be done with Spring configuration in Module Options Metadata classes to simplify enhance property configuration. With Configuration modules, these may now be beans in the module context. ",XD-2827,
Not going to integrate with Reactor for stream processing.,XD-2826,
"This apparently is not tested or used internally, but I expect it to fail having tried a similar approach to derive the class of a generic type in a different situation. This method does not always work due to type erasure http stackoverflow.com questions 3403909 get generic type of class at runtime. We need to verify if this is working, if not fix it. The API may require it, so possibly UnsupportedOperationException... code Infers the type from this class s generic type argument param kryo param input return protected T doDeserialize Kryo kryo, Input input Class T type Class T ParameterizedType this.getClass .getGenericSuperclass .getActualTypeArguments 0 ; return doDeserialize kryo, input, type ; code ",XD-2825,
"Currently when modules are composed to a single application context, properties are not inherited. https github.com spring projects spring xd wiki Modules placeholders available to all modules ",XD-2823,
"The current jdbchdfs job does not take advantage of all the features available to write into HDFS provided by Spring Hadoop s DataStoreWriter implementations, such as partitioning. Update the jdbchdfs job to use int hadoop store writer similar to the HDFS Sink inside a new ItemWriter implementation ",XD-2822,
"As a developer, I'd like to decouple execution context from job launch lifecycle so that we can avoid CL and serialization errors. This fix needs to be formally applied in Spring Batch itself. XD will upgrade to Batch release in order to inherit this functionality; hence, the current workaround with XD 2486 needs reafctored. ",XD-2821,
. gradlew install fails for spring xd extension batch and spring xd extension reactor. The first case is a simple update to gradle build extensions.gradle. The 2nd causes several compilation errors that are not trivial for a Reactor noob. ,XD-2818,
It should be possible to configure a short description for a module that is display above the module options via module info name .... . The description could contain a few lines describing the core functionality and potentially hyperlinks to additional information for a module. This information should be exposed via the REST interface as well. Currently only the module options are printed.,XD-2816,
"As a user, I'd like to use a jdbchdfs batch job as a passthrough without chunk processing so that I'don t have to incur the batch read write overhead.",XD-2815,
"If automatic binding of dead letter is enabled for rabbit mq and taps are deployed, anytime the tap is undeployed, the dead letter for that tap still remains. The tap uses a unique name and the queue for that is automatically deleted, but the dead letter queue for it is not. This problem becomes worse when containers are running in yarn and may not live for long periods of time. Many dead letter queues for taps can become overwhelming.",XD-2814,
Similar to Sqoop where we move data from RDBMS to HDFS we should look at integrating with Camus to load data from Kafka to HDFS.,XD-2813,
"The build has some inconsistencies that should be taken care of. Amongst the one I know The UI project is always getting cleaned, for no apparent reason there might have been one before , thus triggering a rebuild of everything downstream, most notably DIRT The exec task is not used anymore Lots of projects are getting the boot plugin applied to them. I m not sure 100 what that plugin does, but we don t need the repackage bit for example.",XD-2807,
"As a user, I'd like to add the Hadoop namenode specifics in a config file so that I'don t have to incur the hassle of pointing to the namenode location every time I open a new DSL session, but it is automatically configured. ",XD-2805,
"As a developer, I'd like to migrate the wiki to project repo so that it can be tagged with the code and versioned etc. ",XD-2802,
Mask out all properties for XD EC2,XD-2801,
"As a developer, I'd like to continue Lattice Diego POC so that I can identify the scope, risks, and the overall design for a pluggable SPI in XD runtime.",XD-2797,
"As a developer, I'd like to measure performance numbers for a simple stream so that I can characterize the overall throughput. ",XD-2795,
"As a developer, I'd like to fix the offset management with Kafka source module so that I can efficiently perform fetch operation from the given offsets.",XD-2793,
"As a build manager, I'd like to schedule CI builds for windows so that I can verify XD runtime features functionality. The scope is to isolate the remaining test failures; perhaps, experiment with new AMI images until we have a solid infrastructure to fix the failing tests.",XD-2791,
"Currently it is necessary to specify mappedRequestHeaders on the rabbit sink, otherwise no headers are mapped to AMQP. This should be the default behavior.",XD-2790,
"As a developer, I'd like to add load receiving sink module so that I can measure received throughput",XD-2788,
"As a developer, I'd like to add load generator source module so that I could use it for performance testing use cases. ",XD-2787,
"As a developer, I'd like to create EC2 AMI with the necessary packages so that I can run the Kafka Perf tests.",XD-2786,
"As a developer, I'd like to identify the Kafka configurations so that I could setup infrastructure to perform performance testing. ",XD-2785,
"As a developer, I'd like to research and Identify the EC2 infrastructure required so that I can run performance tests on Kafka. ",XD-2784,
"As a developer, I'd like to document the changes to message headers so that users can refer to the troubleshooting section if there are any serialization errors when reusing the 1.0 batch jobs in 1.1 release. Perhaps this could be part of troubleshooting https github.com spring projects spring xd wiki Deployment troubleshooting section in our wiki.",XD-2778,
"As a developer, I'd like to bench Kafka as message bus using in built perf testing producer consumer utilities so that I can use that as a foundation to build XD use cases and measure performance. I'd like to reproduce baseline performance metrics as identified by the Kafka engineering team https engineering.linkedin.com kafka benchmarking apache kafka 2 million writes second three cheap machines .",XD-2776,
Some modules inherit application.yml servers.yml via a properties file in config modules ; others have the values defined in the ...OptionsMetadata classes. Switch all modules to use the latter technique for consistency.,XD-2768,
"As a user, I'd like to have the description for each of the modules so that I can use it to understand the module purpose and it s capabilities presumably what is captured in javadoc for the module definition .",XD-2766,
"The current implementation of partitioned job management is entirely based on message exchange over the message bus, in a request reply scenario. This creates challenges when it comes to using certain types of transports, as well as acknowledging crashes. To that effect, the option of using a different partitioned job coordination strategy, that relies on a distributed computing coordination mechanism such as ZooKeeper should be investigated. ",XD-2765,
"As a build manager, I'd like to have Spring XD RPMs published in spring.io repository so that users can directly download the bits without having to go through appsuite repo or the EULA. Location for 1.1.0 RELEASE http repo.spring.io libs release local org springframework xd spring xd 1.1.0.RELEASE ",XD-2762,
Currently PojoCodec calls kryo.register Class ? type on every ser deser invocation. This fails with 1.1 because instances are pooled and a different instance may be used to serialize and deserialize. See https github.com EsotericSoftware kryo registration. The fix is to not register classes on the fly. Classes serialized by PojoCodec will not be registered by default. This will work but is less efficient. XD should provide an easy way to register types known to be serialized on the MessageBus passed between modules ,XD-2761,
"As a developer, I'd like to have the high level description for each of the modules so that I can use the description presumably what is captured in javadoc for the module definition to understand the purpose of the module itself. ",XD-2757,
"The spark streaming message bus receiver isn t reliable yet. The receiver needs to handle data loss in case of worker node that has it running. We currently handle the driver failure automatically by re deploying spark streaming module. But, this is about the data loss when the worker node dies. Please see the documents here https databricks.com blog 2015 01 15 improved driver fault tolerance and zero data loss in spark streaming.html http spark.apache.org docs latest streaming custom receivers.html",XD-2748,
"As a developer, I'd like to benchmark Rabbit performance so that I can use the results as reference to setup XD cluster.",XD-2747,
The scope is to address the sub tasks linked with this story. ,XD-2743,
"As a developer, I'd like to study the taxi trips based on a stream of trip reports from New York City so that I can evaluate event based systems in the context of real time analytics using Spring XD. Challenge Details http www.debs2015.org call grand challenge.html ",XD-2742,
"The configuration for the redis sink must be provided for explicitly instead of falling back to values defined in servers.yml. The default behavior configuration should be address in a manner consistent with the default behavior of module config for rabbit source sink, jdbc sink....",XD-2741,
"As a user, I'd like to have an optional arbitrary side channels created so that when creating a module channels other than the primary stream channels input, output could be added to the bus i.e. creating a tap channel within a flow . The optional side channels can be used to trace track module progress.",XD-2738,
"As a user, I'd like to have an optional trace as inline deployment properties for stream so that I can declare which module in the stream needs to be traced for logging or notifications. This gives the flexibility to track the stage progress between individual modules. Example code xml xd stream create foo http log xd stream deploy foo properties module.http.trace,module.log.trace or xd stream deploy foo properties module. .trace code Wildcard wiretap config http docs.spring.io spring integration reference html messaging channels section.html channel global wiretap",XD-2737,
"As a field engineer, I'd like to have reference architectures built on Spring XD so that I can use that as reference building POCs. The scope is to get the raw domain specific ideas captured as first step. ",XD-2734,
"Since the refactoring of the module registry that does not look inside a module, it can t know that the scripts directory is not a module. Everything that is a direct child of source, processor, sink, job should be a module archive. Everything else supporting that should be moved out, e.g. in modules common",XD-2732,
"As a user, I'd like to include the deployment manifest from the file so that I'don t have spend time typing as inline properties .",XD-2730,
Upload payload conversion demo such that a user can use the module upload feature against the sample.,XD-2729,
"To be added in AbstractMetricsController, as well as the various shell commands counter all delete , etc... ",XD-2726,
"As a user, I'd like to have the option of editing the deployed undeployed stream so that I'don t have to destroy to just change any deployment property.",XD-2724,
The partitionResultsTimeout is set to 300000 as default 5min . This is way to short for long running steps. We should increase this default.,XD-2723,
"As a user, I'd like to clean up stale queues topics associated with the stream so when the stream gets destroyed I can clean up resources. ",XD-2719,
"As a user, I'd like to clean up message bus resources associated with the stream so that when the stream is destroyed so does the coupled queues topics.",XD-2718,
"As a stream definer, when defining a stream ending with a file sink, I would like to have more flexibility for naming the file. Add an alternative nameExpression option, allowing complete control over the finename generator expression attribute. See http stackoverflow.com questions 28466477 issue with file sink and filename expression 28467069 28467069",XD-2717,
"As a developer, I'd like to create a example to demonstrate JDBC to HDFS data movement.",XD-2716,
"As a PM, I'd like to have the Smart Grid demo from s1 2014 ported into Spring XD samples repo.",XD-2715,
"As a field engineer, I'd like to have a comparison of Storm examples in Spring XD so that it is easy to relate from implementation standpoint. ",XD-2713,
Currently all message bus implementations are removed from the runtime classpath and loaded on demand from the file system according to the transport setting. Custom module projects that include in container testing must install messagebus local on the local file system. This is currently configured as a task for module build scripts. This is also a dependency for testing in the IDE and developers need to execute the build task or configure the messagebus manually. Embedding the local MB for the singlenode application local is not a valid transport for distributed eliminates this step.,XD-2712,
"code logger.error Failed to deliver message; retries exhausted; message sent to queue ERRORS name , context.getLastThrowable ; code Should be code logger.error Failed to deliver message; retries exhausted; message sent to queue ERRORS name , context.getLastThrowable ; code So the actual name is logged. ",XD-2706,
"See original report here https github.com spring projects spring xd issues 1300 I ve created a module with a custom Metric, Handler and Repository patterned after the AggregateCounter but then it appears that there doesn t seem to be a way to add anything to the Admin Context. The diagram at https github.com spring projects spring xd wiki Extending XD shows the Plugin Context as a sibling to the Admin Context which seems to verify my fears. It would be convenient to be able to add custom Metrics Controllers Repositories into the Admin Context so that they can be accessed through the same REST api as the other Metrics. ",XD-2705,
"As a consequence, change gradle script regarding generation of documentation remove pushGeneratedDocs task, etc remove link rewriting that is no longer needed ",XD-2704,
"As a developer, I'd like to build batch sample using Sqoop so that we can demonstrate some of the capabilities. Use cases to consider JDBC to HDFS HDFS to JDBC ",XD-2703,
"As a developer, I'd like to build data pipeline using Kafka as as message bus in XD so that we can demonstrate some of the capabilities. Use case to consider Log aggregation and analysis Lambda architecture how to avoid code duplication how to eliminate tight coupling of business logic how Kafka can be used for reliable reprocessing ",XD-2702,
remove spark and hadoop requirements from spring xd module parent and gradle module plugin,XD-2700,
"As a developer, I'd like to review the current sonar violations so that I can fix the relevant and update the irrelevant ones as invalid.",XD-2699,
"As a developer, I want to have to run Kafka tests on an external broker, so that I reduce the footprint of the build process. ",XD-2698,
Can revert part of the commit that went into upgrading to reactor 2.0 https github.com spring projects spring xd pull 1342 files ,XD-2696,
"As a developer, I'd like the publish maven.gradle script to use values for dependencies e.g. Spring Boot and hadoop common from our central dependency list in this case dependencies.properties so that I'don t have to update them manually anymore.",XD-2694,
"As a developer, I'd like to run Kafka tests with Kafka Server as a separate running process so that I can improve build experience. ",XD-2693,
Gradle 2.x is required for the latest Sonar version sonar.spring.io We may need to wait for a fix in Groovy itself 2.4.1 Please see the following links for details http forums.gradle.org gradle topics after upgrade gradle to 2 0 version the maven pom not support build property http jira.codehaus.org browse GROOVY 7023 ,XD-2691,
see https github.com spring projects spring boot issues 2454,XD-2690,
"As a user, I'd like to see the date in logs so that I can troubleshoot issues that had occurred on a specific day and time. Property that needs adjusted https github.com spring projects spring xd blob master config xd container logger.properties L11",XD-2686,
Min JDK version for XD 1.1 is 7. Change the sourceCompatibility to 1.7 but leave targetCompatibility at 1.6. Changes are also needed in the mdule parent pom and gradle plugins.,XD-2684,
"As a developer, I'd like to refer to wiki so that I can configure machines with recommended ulimit setting for XD s distributed setup. Note Recommended ulimit setting is 10K under Troubleshooting new section Exception reason to increase ulimit 8 25 52,266 1.1.0.SNAP ERROR DeploymentsPathChildrenCache 0 server.DeploymentListener Exception deploying module java.lang.IllegalStateException java.io.FileNotFoundException var vcap data packages springxd ee02bd3482eeb620a65862fb54e1f23fcece8022.1 bd a341640a5de2f922fd3db906ce504b85819c1e spring xd 1.1.0.BUILD SNAPSHOT xd config modules modules.yml Too many open files ",XD-2681,
"There are several issues making it hard to impossible to create batch jobs that use Pig, Hive, HBase or other technologies supported by Spring for Apache Hadoop project. We need to make the corresponding dependencies available on the Hadoop classpath.",XD-2676,
"As a scala developer, someone could easily deploy the spark streaming module developed using scala. ",XD-2672,
When available,XD-2670,
"As a developer, I'd like to upgrade to SHDP GA release so that I can sync up with the latest bits. ",XD-2667,
"As a developer, I'd like to upgrade to Kafka s SI GA release so that I can sync up with the latest bits. The scope is to backport Kafka XD changes to SI Kafka and then upgrade to the GA release.",XD-2666,
"As a PM, I'd like to have the copyright message in the reference guide PDF updated to include 2015 instead of 2014. ",XD-2665,
"As a developer, I'd like to build Spark Streaming as data processors in XD so that we can demonstrate some of the capabilities. Implement using Java Java Lambdas Scala",XD-2664,
"As a user, I'd like to build XD in Windows machine so that I can develop, test, and contributed to OSS.",XD-2661,
"As a user, I'd like to refer to a Pig script job sample so that I can use that as a reference to integrate Pig jobs in XD.",XD-2656,
"Use latest version, might need to exclude version from other dependencies, e.g. SI, in build common.gradle.",XD-2654,
"As a user, I'd like to migrate from 1.0 to 1.1 and be able to port my custom modules so that I can operationalize existing data pipelines and also take advantage of latest XD features.",XD-2652,
The scope is to research the available options to provide request reply support for Kafka. Document findings POCs Previous Desc The bindRequestor and bindReplier methods of the message bus need to be implemented.,XD-2651,
See RedisSingleNodeStreamDeploymentIntegrationTests etc.,XD-2648,
"Hey Guys, Im trying to run WordCount example in kerberized cluster with the attached job configuration. The job upload the test file to the HDFS without problems but it fails in wordcount step. I am running the example on singlenode and I configured the config hadoop.properties file for shell and container with kerberos setting such as https github.com spring projects spring xd wiki Hadoop Kerberos. The error log is attached. Thanks in advance for the help. Regards",XD-2642,
Multiple threads invoke the shell processor result in I O errors and or data corruption. send and receive should be synchronized. ,XD-2637,
"As a user, I'd like to refer to the wiki so that I can create a job with partitions that in turn expects tableName and columns be explicitly included in the job definition. It is also beneficial to call out sql and tableName metadata options are mutually exclusive. Following logic in JdbcHdfsOptionsMetadata needs documented. code java AssertTrue message Use tableName AND columns when using partition column boolean isPartitionedWithTableName if StringUtils.hasText partitionColumn return StringUtils.hasText tableName !StringUtils.hasText sql ; else return true; code ",XD-2635,
"As a developer, I'd like to use Ambari plugin so that I can provision, manage, and monitor Spring XD cluster using the same tool I use for Hadoop clusters.",XD-2630,
"Configure Redis Cluster with Sentinal v 2.8.19. Verify fail over, experiment with settings. Useful reference https code.flickr.net 2014 07 31 redis sentinel at flickr All analytics test cases should be run as well as test that deploy streams that make use of redis analytics. There might be some minor code changes required as mentioned in the flickr article.",XD-2628,
https github.com EsotericSoftware kryo pooling kryo instances,XD-2612,
"As a user, I'd like to have an option to track history so that I get the visibility of stream name, module name etc. added as part of the message header.",XD-2606,
This fix for RichGauge should go into the 1.0.x line.,XD-2600,
This is a parallel implementation to the RxJava https github.com spring projects spring xd blob master spring xd rxjava src main java org springframework xd rxjava SubjectMessageHandler.java That will allow multiple threads to broadcast an event but allow processing to occur one at a time on any thread.,XD-2599,
"As a user deploying XD on YARN I need a convenient way to get info like the admin port for my current deployment. Best way, for now, would be to add an info command to the xd yarn script. With the latest changes the admin server runs on a random port when we deploy to YARN. In order for the user to connect they would have to query Zookeeper. This is inconvenient.",XD-2597,
"Test basic functionality hdfs sink, jdbchdfs job on hadoop26, hdp22, cdh5, phd21 Test XD on YARN on hadoop26, hdp22, cdh5 and phd21 ",XD-2595,
"Update spring data hadoop version to 2.1.0.RC1. This also includes updating the following adding hadoop26 Apache Hadoop 2.6.0 as distro adding hdp22 Hortonworks HDP 2.2 as distro set default distro to hadoop26 update cdh5 to version 5.3.0 remove older distros hadoop24, hdp21 ",XD-2594,
"When deploying XD using Java 7 the user must be able to set the permsize to a value larger than the default. The reason this is required is that if we deploy a gemfire component more than 2 times or a kafka source sink more than 2 times, stream deployment begins to fail. The only exception that was captured was the following noformat Exception in thread ec2Test3 ip 10 146 213 31 1421176704238 e1786039 watcher executor Exception java.lang.OutOfMemoryError thrown from the UncaughtExceptionHandler in thread ec2Test3 ip 10 146 213 31 1421176704238 e1786039 watcher executor noformat Logs are not available at this time. ",XD-2592,
"As a user, I'd like to have the option to extend the default message handling behavior for HTTP source module so that I can override the settings via servers.yml to control the default message size. Notes The adapter currently has that hard coded 1MB limit in the HttpChunkAggregator. We will have to expose this property for overrides. Related PR https github.com spring projects spring xd pull 1367 .",XD-2590,
Create port of https github.com spring projects spring xd samples tree master reactor moving average based on RxJava,XD-2589,
Run a clean gradle build to identify all warnings.,XD-2588,
Upgrade in 1.0.x branch what was done in this commit on master. https github.com spring projects spring xd commit 16062d771e23187a1d9e8d549abc646ff44e435b ,XD-2584,
"As a user, I'd like to use RxJava based processor module so that I can leverage RxJava APIs for data computations. ",XD-2576,
Ensure build works in Windows environments,XD-2572,
The data that is entering a broadcast stream can only occur from one thread at a time to prevent race conditions inside the stream implementation. The current handler shares a single broadcast stream. Change to create a new one per thread usage.,XD-2570,
Create an 2.6 Yarn Environment on EC2 for which XD can be deployed for acceptance tests.,XD-2568,
"As a developer, I'd like to have acceptance test coverage for XD YARN on EC2 so that I can verify simple XD features running on YARN on every build cycle.",XD-2566,
"MongoDb driver is present on DIRT s classpath, while it should not should be present on mongo related modules though . This is blocked by the shortcoming described here https github.com spring projects spring xd pull 1116",XD-2565,
"As a developer, I'd like to isolate the Hadoop tests in a different project so that the DIRT project doesn t have to depend upon, thus eliminating the incorrect CP file generation in eclipse. ",XD-2562,
"As a developer, I'd like to upgrade to Reactor 2.0 RC1 release so that we can synchronize with stable dependencies.",XD-2557,
"As a user, I'd like to have the option to store the custom module uber jar in HDFS so that I can rely on the HA feature to reliably read and reinstall under failure scenarios. ",XD-2551,
"As a performance tester, I'd like to investigate why there s high CPU startup time for both admin and container servers. Perhaps profiling would assist isolating the bottlenecks. Scope Identify the bottlenecks Document reasons List pros cons",XD-2548,
"Expecting module name in module configuration is brittle, especially in conjunction with module upload command which permits the module to be registered under a different name. The convention should be dropped in favor of any file name. This requires at most one foo.xml, foo.groovy, and or foo.properties in the top level config folder. It is an exception if multiples are found. Accepting any file name provides the most flexibility without sacrificing backward compatibility except in rare cases in which a module developer may have violated the multiple xml or properties files condition . An alternate approach requiring a well known file name such as spring module were rejected over concerns that it would break any existing custom module implementations.",XD-2547,
Create a load generator source module that will generate messages and dispatch messages to a XD stream. ,XD-2544,
"As a user, I'd like to have a flexible RxJava module so that it can as a processor. ",XD-2542,
"As a user, I'd like to implement the core interface contract so that I can create a processor module that uses RxJava API.",XD-2541,
"As a user, I'd like to have the option to extend compression support so that I can override the defaults and customize as needed. Follow up from this PR https github.com spring projects spring xd pull 1346",XD-2527,
"As a user, I'd like to have a gradle build option so that I can support module projects that will declare the Spring XD dependencies as provided, configure the boot plugin for MODULE layout and other boilerplate build configuration. This is dependent on Boot s module layout scoping issue https github.com spring projects spring boot issues 2187",XD-2523,
"https jira.spring.io browse AMQP 453 Added support for compression with RabbitMQ. XD should expose configuration options to enable and configure compression on the message bus. Note, some options may be specific for brokers or require additional functionality in XD. This issue should not address adding additional functionality to make the feature set as common as possible across msg bus implementations, but expose what makes sense with the current code base for rabbitmq As an example, Kafka supports compressed.topics which lets you pick a subset of topics to be compressed. ",XD-2521,
We should move the org.springframework.xd.batch.jdbc.ColumnRangePartitioner and org.springframework.xd.batch.item.jdbc.FieldSetSqlParameterSourceProvider to the spring xd extension batch project,XD-2517,
"As a user, I'd like to have the option to compress messages so that I can influence the performance throughput. It d be beneficial to have support for gzip, zip compression, and decompression.",XD-2513,
"HA Configuration, async sends. http docs.spring.io spring integration reference html whats new.html 4.1 mqtt",XD-2508,
"The EXAMPLE in the documentation and the paragraph preceding the example for the script processor uses both location and properties location options, but these are in actuality script and locationProperties according to module info processor script and the text of the documentation. See http docs.spring.io spring xd docs 1.0.2.RELEASE reference html script quote To use the module, pass the location of a Groovy script using the location attribute. If you want to pass variable values to your script, you can optionally pass the path to a properties file using the properties location attribute. All properties in the file will be made available to the script as variables. code xd stream create name groovyprocessortest definition http port 9006 script location custom processor.groovy properties location custom processor.properties log deploy code quote ",XD-2506,
Replace the current paravirtual AMI used for CI tests needed to be replaced with a HVM based AMI Paravirtual is being phased out by Amazon. Also so we can utilize VPC and placement groups in the future. ,XD-2504,
Test is failing since Kafka isn t installed on the CI server. Using an embedded server will make the testing more robust vs. needing an external server.,XD-2502,
"As a XD Admin, I'd like to upgrade to Spring Boot 1.2.0 RELEASE and the associated dependencies so that we can catch up with the latest features, bug fixes and enhancements. Following XD dependencies needs upgraded to sync up with Boot 1.2.0 RELEASE activemq.version 5.10.0 activemq.version aspectj.version 1.8.4 aspectj.version commons dbcp2.version 2.0.1 commons dbcp2.version h2.version 1.4.182 h2.version hibernate.version dd4.3.7.Final hibernate.version hibernate validator.version 5.1.3.Final hibernate validator.version hikaricp.version 2.2.5 hikaricp.version hornetq.version 2.4.5.Final hornetq.version httpasyncclient.version 4.0.2 httpasyncclient.version httpclient.version 4.3.6 httpclient.version jackson.version 2.4.4 jackson.version janino.version 2.6.1 janino.version jetty.version 9.2.4.v20141103 jetty.version jetty jsp.version 2.2.0.v201112011158 jetty jsp.version joda time.version 2.5 joda time.version jolokia.version 1.2.3 jolokia.version junit.version 4.12 junit.version liquibase.version 3.3.0 liquibase.version log4j.version 1.2.17 log4j.version log4j2.version 2.1 log4j2.version mockito.version 1.10.8 mockito.version mongodb.version 2.12.4 mongodb.version mysql.version 5.1.34 mysql.version reactor.version 1.1.5.RELEASE reactor.version reactor spring.version 1.1.3.RELEASE reactor spring.version servlet api.version 3.1.0 servlet api.version spring.version 4.1.3.RELEASE spring.version spring batch.version 3.0.2.RELEASE spring batch.version spring data releasetrain.version Evans SR1 spring data releasetrain.version spring hateoas.version 0.16.0.RELEASE spring hateoas.version spring mobile.version 1.1.3.RELEASE spring mobile.version spring security.version 3.2.5.RELEASE spring security.version tomcat.version 8.0.15 tomcat.version undertow.version 1.1.1.Final undertow.version ",XD-2501,
"As a user, I'd like to use partitionResultsTimeout attribute for jobs that inherit singlestep partitioning strategy but it is not exposed as a metadata attribute in the wiki. Note The property should be available for all the jobs that import; 3 OOTB jobs have it imported ref. attachment ",XD-2499,
"When building on a branch, the docs should be defaulting to build from origin master, but that doesn t seem to be happening. Instead an explicit Pwikibranch origin master is required to be specified on the command line. ",XD-2497,
Some cleanup to make the tests a bit easer to read.,XD-2496,
"The code base is changing a bit, so using 2.0 M1 for development is stable up until all major JIRA issues have bee completed. Then we should track snapshots in preparation to move to 2.0. M2 when it gets released.",XD-2490,
"A sample, perhaps taken from Pivotal Labs use case in Denver, that would calculate some time window averages for a many individual senor values .",XD-2488,
The module should be flexible to act as a sink as well as a processor. ErrorHandling will be considered as part of another JIRA,XD-2487,
"As a user, I would like to be able disable snappy compression when using hdfs dataset sink with Avro files. I'd also like to be able to provide a different codec.",XD-2483,
What is the core interface contract users will be exposed to when creating a processor module that uses Reactor s Stream API. Some consideration for error handling should be considered as it maybe outside normal exception throwing signatures.,XD-2481,
"As a QA, I'd like to benchmark Sqoop vs. jdbchdfs batch job so that I can compare and contrast performance stats. ",XD-2480,
"As a user, I'd like to access Sqoop logs so that I can troubleshoot or evaluate the errors or current state respectively. We will have to identify how to capture the Sqoop logs and stream them to our logging mechanism.",XD-2478,
"As a user, I'd like to have the option to stop an existing Sqoop job so that I can clean up resources at the time of completion.",XD-2477,
"As a user, I'd like to have the option to setup batching so that I can ingest data in batches as opposed to payload at a time.",XD-2475,
"As a user, I'd like to have the option to implement bindRequestor and bindReplier so that I can bind a producer that expects async replies and bind a consumer that handles requests from a requestor and asynchronously sends replies respectively. ",XD-2474,
"As a user, I'd like to have the option to ACK messages so that I can guarantee that the message request sent is successful. ",XD-2473,
"As a user, I'd like to have concurrency and compression support for Kafka so that I can increase performance throughput and or increase responsiveness Things to consider make global configuration options be defaults and allow per deployment overrides add options for concurrency compression support",XD-2471,
"Thinking about the UBS ? scenario that MP described. They want all their Cassandra modules to share a connection, leading to the need for a parent context for those modules. We could introduce a parent module for this purpose. The module declares a parent in its properties which likely ends up as a parent module definition in the module definition. When the child module is deployed, its parent must be deployed first if it is not already i.e., parent is a singleton per container . The module sets that as it s parent context. We would have to make sure things happen in the correct order so the global context is the parent of the parent ad infinitum . The alternative is to add a module parent context to the XD hierarchy which is extensible, but this is more elegant IMHO. Also, in cases that don t require singleton bean definitions, the parent could package and provide common jars to children, e.g., we set the parent module s classloader as the parent classloader, eliminating the need to install common jars in an HDFS path basically the approach I'described https jira.spring.io browse XD 2420 MP Also, in cases that don t require singleton bean definitions, the parent could package and provide common jars to children, e.g., we set the parent module s classloader as the parent classloader This approach does not offer some of the advantages offered by a central yaml config noted in the JIRA . But it is simpler in many ways. The developer just installs a parent module containing dependent jars and sets that as a parent in the child modules. This requires no additional infrastructure. To address the hadoop scenario we discussed, we would need another level of indirection so the parent of the hdfs modules is bound to the configured hadoop distro. e.g. something like parent xd.hadoop.distro in module properties MF Possibly the parent modules could go in the common directory? They should be considered abstract also in the same sense as abstract bean definitions in a Spring context and they should only be started on demand when needed by at least one concrete child module then destroyed when the last child module is destroyed . Maybe this would also allow us to wrap up those xml files that currently live in common so that they are treated as parent modules? MF Yea, that sounds good wrt to common. Also it might be a good idea to enable spring to throw an error if it finds more than one bean of the same name in the application context i think that applies to searching in parent contexts as well. this would avoid the last one wins rule and give more deterministic behavior. ",XD-2469,
"This should include lifecycle management, so that when the module s stream is undeployed, the Spark Streaming application should be stopped, etc. Deploying a number of module instances should result in multiple receiver tasks, and those should bind to the bus using the consumer side partitioning metadata. ",XD-2467,
"As a QA, I'd like to include acceptance test coverage for Kafka as a message bus so that I can validate the functionality as part of every CI build.",XD-2462,
"As a QA, I'd like to include acceptance test coverage for spark app batch job so that I can validate the functionality as part of every CI build. ",XD-2456,
"The workaround explicitly updates spring core latest boot needs it merges all application.yml documents that are not profile specific under on spring key the latest boot requires it, at least for now. Boot may go back, see spring projects spring boot 2022",XD-2431,
Based on the POC from XD 2124 we should create the actual implementation. Things to consider to store in step context capture Log output MapReduce job counters capture last value from incremental imports ,XD-2430,
"The reference states the following The JDBC driver jars for the HSQLDB, MySql, and Postgres are already on the XD classpath It looks like this is true for Postgres and HSQLDB, but I can t see a driver for MySQL shipped with the distribution.",XD-2428,
"In order to improve the build reliability, we should be using the NPM repo provided by repo.spring.io See spring xd ui README.md for further details.",XD-2427,
"Travis CI recently introduced docker based builds. This prevents root access which we don t need , but allows caching which we could not use before and seems to come with beefier machine specs",XD-2426,
"See discussion at https github.com spring projects spring xd pull 1311 1 there seems to be unused SimpleDateFormat in TupleBuilder which hurst perf 2 More generally, should take some time to profile micro benchmark TupleBuilder",XD-2424,
The kafka sink supports properties for an async producer e.g. queue.buffering.max.ms but you cannot enable such a producer only sync . Async producers batch messages at the risk of message loss . Add a new property async default false and add the corresponding attribute to the int kafka producer configuration element async async ,XD-2418,
"That method is actually currently never called, but The case where a mapping already exists is not covered outstanding TODO comment the semantics of the method should just be to save and override ",XD-2412,
"The current implementation makes individual reads from redis and then writes back the average, so in a cluster environment the reads and writes are not serialized, client reads and writes for specific keys can interfere with each other. Investigate options, such as use of redis transactions or use of lua scripting to solve this problem.",XD-2411,
"Would be nice to have the shell zip the contents of a directory if not already in zipped form. This way, the development cycle if one decided to use upload is quicker and edits can be done in place.",XD-2407,
"Create one or more Sample module projects in the Spring XD Examples repo to serve as templates for Spring XD module projects. Similar to https github.com dturanski siDslModule, these should include unit and single node integration tests, and demonstrate the use of Spring XD build and packaging tools, and other module development support. This may be split out into separate tasks, but should include a sample for source, processor, sink, and job, using Configuration or XML configuration either as separate samples or using build profiles . ",XD-2406,
"Provide A maven pom to support module projects that will declare the Spring XD dependencies as provided, configure the boot plugin for MODULE layout and other boilerplate build configuration. This should include a similar feature for gradle.",XD-2404,
"As a build manager, I'd like to setup CI infrastructure so that I can run integration tests in Windows OS automatically as we commit trigger new builds. Scope Use the environment where Bamboo is running Gain access to powershell Setup services redis, rabbit, etc. Kick off CI task",XD-2403,
"As a developer, I'd like to include the following improvements as part of the EC2 CI infrastructure, so that we can reliably run the CI builds and also assert over feature functionalities. Scope Enable distributed jvm test Change from using artifactory gradle task to a command task that calls . gradlew Test w embedded hadoop off Turn on maxParallelForks ",XD-2401,
"As a build master, I'd like to research CI options so that I can improve CI build stability and reliability. Potential Option npm cache https github.com swarajban npm cache Caching previously installed dependencies, npm cache doesn t require downloading the internet each time we build.",XD-2400,
"Version XD 1.1 M1 Problem Trying to use tcp client source module and observing an exception while deploying the stream. Stream Definition code xml curl data name dummy firehose data definition tcp client decoder LF port 8080 log data deploy true http localhost 9393 streams definitions name dummy firehose , status null, definition tcp client decoder LF port 8080 log , links self href http localhost 9393 streams dummy firehose code The same curl command works fine against XD 1.0.1 release. ",XD-2397,
"As a user, I'd like to have the custom module built as uber jar hosted in HDFS so that I can deploy the module to newly arriving containers. ",XD-2388,
"As a user, I'd like to refer to documentation so that I can build the custom module based on recommended standards and patterns.",XD-2384,
"As a developer, I'd like to setup a performance testing infrastructure rackspace , so I can start benching Kafka baselines and continue with XD use cases.",XD-2382,
Refactoring scope spring xd dirt Message bus dependencies The goal is to decouple them from startup phase to further enhance initialization time. ,XD-2381,
"While there is a server endpoint to logout, we don t have that ability yet from the UI. As indicated by XD 2122 we will also need a meta data REST endpoint so we can interrogate whether security is enabled, whether the user is logged etc. So we can fulfill the requirements Show a logout button only if a security is enabled and b user is logged in Show the username and or full name of the user being logged in ",XD-2378,
"As a user, I'd like to have microbatching capability so that I can ingest based on batch intervals for enhanced performance throughput. Example http batchInterval 10 log ",XD-2376,
"As a user, I'd like to have a reactor stream processor module so that I can ingest data using XD source modules and process them as time window operations. Example 1 http reactor stream timeWindow 10s field payload.sensorData expressions min,avg This would give you 10 second time window of the min and avg values. Example 2 Reactor as a module Example 3 Integration with Spark streaming and reactor",XD-2375,
The acceptance tests cover the entire suite of script tests. Thus they are no longer needed. The only test that was remaining was posting 10 messages to a http source and writing to a long and making sure we didn t get an error. This test httpbash was never called from the scripts CI build.,XD-2370,
"As a continuation, we would like to further investigate Spark, develop POC and identify the best appropriate design and implementation for XD.",XD-2368,
TypeConvertingStreamTests.testBasicTypeConversionWithTap is failing intermittently. Why?,XD-2367,
This doesn t follow the conventions we have with other modules and it also means it isn t easy to override via environment variables etc. This is in HDFS and some others.,XD-2364,
"Create the infrastructure Mongo, Hadoop, ActiveMQ, Gemfire, Mysql, etc in EC2 for the 1.0.2 acceptance tests Retrofit the 1.0.2 to use the new infrastructure Create a 1.0.2 branch for XD EC2",XD-2362,
"As a user, I want Spring XD s message bus to be able to pre allocate partitions between nodes when a stream is deployed, so that rebalancing doesn t happen when a container crashes and or it s redeployed.",XD-2361,
"As a user, I want Spring XD to pre allocate a set of partitions between the Kafka source modules when a stream is deployed, so that deployment is simpler, and rebalancing doesn t take place. ",XD-2360,
"As a user, I want to be able to control the starting offset of the Kafka source when a stream is deployed, so that I can replay a topic if necessary. Note starting offset is only considered when the stream is deployed progress made by modules must survive their crash for a running stream undeploying and redeploying a stream with a specific start offset will cause the stream to read again from the start TBD what happens when streams are undeployed redeployed where do they resume from?",XD-2358,
"Many of the tests fail with code java.lang.IllegalStateException Cannot find template location class path resource templates please add some templates, check your Groovy configuration, or set spring.groovy.template.check template location false code Somehow we need to disable this check, using the property suggested.",XD-2354,
"After updating to Boot 1.2 RC1 the following replacement doesn t work. code xml bean id messageConverter class converterClass code which appears in the rabbit source and sink. Feels like a core spring thing, but that was updated earlier. Current workaround that was commited already so the build can pass is code xml bean id clazz class java.lang.Class factory method forName constructor arg value converterClass bean bean id messageConverter factory bean clazz factory method newInstance code ",XD-2352,
We are referencing Spring.IO deps when we shouldn t since we moved to a different version of boot than in in the platform .,XD-2351,
"As a user, I'd like to refer to documentation in wiki so that I can configure the new sources, sinks and processor modules and as well as any new features. ",XD-2346,
"Currently, module composition always guesses the correct type because we don t have a module with a given name N that is both a source and a processor, or a processor and a sink we only have the case source and sink, as in jdbc jdbc or file file . If it were the case, then the heuristics for guessing the resulting type of a composition would break. This issue is about adding the option for the user to explicitly specify the expected type of the composition, if needed .",XD-2343,
"Using single node deployment of Spring XD 1.0 GA, we needed to redefine several batch jobs. We deleted the jobs job destroy all . When attempting to re add, we received an error that a job with the name already exists. Performing job list confirms the jobs were gone. To workaround, I needed to terminate the instance server of Spring XD and restart it. Since this was the single node deployment without a live stream of data coming in this was okay, but would have been a major problem if bouncing the Spring XD server was not acceptable i.e., live data being actively received .",XD-2341,
"There are some modules that use external config properties kafka producer consumer, hadoop properties etc., . We need to avoid using such properties and have them configured inside module so that module and its properties are self contained. ",XD-2339,
"Looks like upgrade to Gradle 2.2 is not a simple version change, e.g. I see code FAILURE Build failed with an exception. Where Build file Users hillert dev git spring xd build.gradle line 219 What went wrong A problem occurred evaluating root project spring xd . Could not find method forceDependencyVersions for arguments project documentation toolchain on root project spring xd . code ",XD-2338,
Create an AMI that will contain the Kafka Executable as well as the Kafka performance test tools.,XD-2335,
"Since Kafka and Rabbit have different strategies on how a message system is implemented, we will need to update the tests used on rabbit to work with Kafka. While they will not be exactly the same as before, they should exercise the same principles. This story covers Create the consumer and producer execution configurations for kafka producer perf test.sh and kafka consumer perf test.sh. Record the tests a spreadsheet much like the Rabbit Base test spreadsheet ",XD-2334,
"As a PM, I'd like to have test coverage for both Kafka source and sink modules so that we can assert its functionality as part of the CI builds. ",XD-2333,
It is easy to get a cron expression wrong. Provide validation of the cron expression on the Schedule Job page using async validation. Submit the cron expression to the server side and validate that the expression is valid. Send a success message back we may even send back some meta data e.g. when is the next execution going to take place ,XD-2332,
"XD, gemfire, directories in the zip file are missing.",XD-2330,
Placeholder to update to Apache 2.5.1 on CI machines. Next steps It looks like the dependencies.properties still file has 2.2.0; update it to 2.5.1 I guess we just bumped the spring data hadoop dependency; check for relevant other dependencies ,XD-2329,
"We have to explicitly set it to false, in order to avoid an early start of the poller and the associated DistpatcherHasNoSubscribersException.",XD-2325,
Create a dedicated Scheduling Page for Jobs. Currently we create a form underneath the deployments table. That is a bit unwieldy when many deployed jobs are shown in the table. Similar to XD 2320,XD-2321,
Create a dedicated Launch Page for Jobs. Currently we create a launch form underneath the deployments table. That is a bit unwieldy when many deployed jobs are shown in the table.,XD-2320,
"Create various boot starter projects for module developers. This should include templates for source, processor, sink, and job and ideally different options for each. For example, a processor configured with XML, SI Java DSL, or SI Java DSL with lambdas. ",XD-2318,
User should have the option of Greenplum DB sink so they can write data directly to Greenplum DB via the pgfdist gploader Greenplum bulk loader . The existing JDBC sinks are not suitable for high volume loads. The JDBC approach utilizes the master segment of Greenplum for loading datasets instead of the bulk loader utility.,XD-2317,
Update Angular Growl to v2 Allowing for stoppable notifications in case you want to see it for longer than 5 secs ,XD-2315,
"As a user, I'd like to have a sample app GitHub project so that I can use it as a reference while provisioning Spring XD cluster with Kafka. Consider Kafka as message bus Kafka as source ",XD-2308,
"XD 1.1 M1 Release PHD 2.1 Upgrade Action Items Update to SHDP 2.1.M2, Add Hadoop 2.5 hadoop25 Remove hadoop22 Remove PHD 1.0 phd1 Change PHD 2.x from phd20 to phd21 Test PHD 2.0 with phd21",XD-2307,
"As a user, I'd like to push the custom module built as uber jar via a REST API so that I can install the custom module in cluster. ",XD-2306,
"As a user, I'd like to use Kafka source through simple consumer API as opposed to high level so that I can gain full control to offsets and partition assignment deterministically. Spike scope Study simple consumer API functionality Document findings, approach and next steps",XD-2304,
https docs.angularjs.org guide migration migrating from 1 2 to 1 3 http angularjs.blogspot.com 2014 10 ng europe angular 13 and beyond.html http angularjs.blogspot.com 2014 10 angularjs 130 superluminal nudge.html ,XD-2302,
Spike scope Brainstorm Identify options Document ,XD-2301,
"As a user, I'd like to mass ingest data from databases and others into HDFS HAWQ GPDB so that I'don t have to write custom code and as well as be able to ingest in an efficient way.",XD-2298,
"As a user, I'd like to have a config parameter preferably in servers.yml file so that I can enable disable message rates in the cluster view. ",XD-2296,
"Similar to time log , we should ship a simple batch job that appends a timestamp to a file. This will make it much easier to validate job functionality, especially in automated tests.",XD-2286,
"Composed Module currently behave as white boxes . As soon as a module is composed say http filter then all options of the children modules are available as e.g. http.port and filter.expression in the example above . Change this so that a composed module is a black box user has to explicitly expose an option for it to be available most certainly using a short name . Hardcoding of values would be retained and possibly overridable . Possible syntaxes 1 code module compose foo definition http port myport 1234 filter code 2 code module compose foo definition http filter expose port code 2.1 in case of ambiguity simulated in this particular example code module compose foo definition http filter expose http.port code 2.2 for specifying a default code module compose foo definition http filter expose port 1234 code 3 allow both 1 and 2 , using 1 mainly for cases where we don t map 1 to 1 with the underlying option, e.g. code filter expression expr foo code ",XD-2285,
Rerun test XD 2278 on a EC2 32 core machine and see when we max out.,XD-2283,
"Based on the the results from B 6, select the number of consumer producers that give a distinct 5 increase in message rate. Below 5 change in message rate, prefer lower consumer producer count. Vary the number of PerfTest instances that are run simultaneously and use their own independent queue from 1 until the overall messages sec on the broker plateaus. Note the CPU performance using top for the broker and PerfTest processes. Test 1 2 queues a u q1 p x 1 y 1 s 1000 z 60 q 500 a u q2 p x 1 y 1 s 1000 z 60 q 500 Test 2 3 queues a u q1 p x 1 y 1 s 1000 z 60 q 500 a u q2 p x 1 y 1 s 1000 z 60 q 500 a u q3 p x 1 y 1 s 1000 z 60 q 500 Test 3 4 queues a u q1 p x 1 y 1 s 1000 z 60 q 500 a u q2 p x 1 y 1 s 1000 z 60 q 500 a u q3 p x 1 y 1 s 1000 z 60 q 500 a u q4 p x 1 y 1 s 1000 z 60 q 500 Test 4 5 queues a u q1 p x 1 y 1 s 1000 z 60 q 500 a u q2 p x 1 y 1 s 1000 z 60 q 500 a u q3 p x 1 y 1 s 1000 z 60 q 500 a u q4 p x 1 y 1 s 1000 z 60 q 500 a u q5 p x 1 y 1 s 1000 z 60 q 500 etc... ",XD-2282,
"The results from EC2 testing show that once prefetch and message size are set, varying the number of producers or consumers independently does not impact the message rate. The in house testing numbers need another plan to try an understand some discrepancies. Using 500 prefetch, 1000 byte message size run two instances of PerfTest at the same time with each instance referencing a different queue. Vary the number of consumer and publishers. Test 1 one producer one consumer a u q1 p x 1 y 1 s 1000 z 60 q 500 a u q2 p x 1 y 1 s 1000 z 60 q 500 Test 2 one producer two consumers a u q1 p x 1 y 2 s 1000 z 60 q 500 a u q2 p x 1 y 2 s 1000 z 60 q 500 Test 3 two producers one consumer a u q1 p x 2 y 1 s 1000 z 120 q 500 a u q2 p x 2 y 1 s 1000 z 120 q 500 Test 4 two producers two consumers a u q1 p x 2 y 2 s 1000 z 60 q 500 a u q2 p x 2 y 2 s 1000 z 60 q 500 ",XD-2281,
"Use the number of consumers gave a maximum throughput in the previous test say 10 consumers , message size 100 bytes, Prefetch 100. Send 1M messages Vary the number of producers. Measure the msg sec rate and calculate the data transfer rate in MB sec. Number of producers 2 4 6 10 50 During the measurements look at the RabbitMQ Admin UI and see if the queue is backing up.",XD-2280,
"Using a single producer, message size of 1000 bytes, Pretch of 100. Send 1M messages and increase or decrease so that a given test iteration takes about 2 minutes. Vary the number of consumers. Measure the msg sec rate and calculate the data transfer rate in MB sec. Number of consumers 1 2 4 6 10 50 During the measurements look at the RabbitMQ Admin UI and see if the queue is backing up.",XD-2279,
"Based on the the results from B 6, select the number of consumer producers that give a distinct 5 increase in message rate. Below 5 change in message rate, prefer lower consumer producer count. Vary the number of PerfTest instances that are run simultaneously and use their own independent queue from 1 until the overall messages sec on the broker plateaus. Note the CPU performance using top for the broker and PerfTest processes. Test 1 2 queues a u q1 p x 1 y 1 s 1000 z 60 q 500 a u q2 p x 1 y 1 s 1000 z 60 q 500 Test 2 3 queues a u q1 p x 1 y 1 s 1000 z 60 q 500 a u q2 p x 1 y 1 s 1000 z 60 q 500 a u q3 p x 1 y 1 s 1000 z 60 q 500 Test 3 4 queues a u q1 p x 1 y 1 s 1000 z 60 q 500 a u q2 p x 1 y 1 s 1000 z 60 q 500 a u q3 p x 1 y 1 s 1000 z 60 q 500 a u q4 p x 1 y 1 s 1000 z 60 q 500 Test 4 5 queues a u q1 p x 1 y 1 s 1000 z 60 q 500 a u q2 p x 1 y 1 s 1000 z 60 q 500 a u q3 p x 1 y 1 s 1000 z 60 q 500 a u q4 p x 1 y 1 s 1000 z 60 q 500 a u q5 p x 1 y 1 s 1000 z 60 q 500 etc. ",XD-2278,
"Use a single producer, single consumer, message size of 1000 bytes. Send 1M messages and increase or decrease so that a given test iteration takes about 2 minutes. Vary the prefetch size. Measure the msg sec rate and calculate the data transfer rate in MB sec. Prefetch Sizes 1 10 50 100 10000 During the measurements look at the RabbitMQ Admin UI and see if the queue is backing up.",XD-2277,
"Use a single producer, single consumer, prefetch size 50. Send 1M messages and increase or decrease so that a given test iteration takes about 2 minutes. Vary the message size and measure the msg sec rate and calculate data transfer rate in MB sec. Message Sizes 100 bytes 1000 10,000 100,000 During the measurements look at the RabbitMQ Admin UI and see if the queue is backing up.",XD-2276,
"As to prepare for 1.1 release, we would like to upgrade to Spring Integration 4.1.0 RC so that we can leverage the new features, enhancement and bug fixes. ",XD-2271,
"As to prepare for 1.1 release, we would like to upgrade to Spring Boot 1.2.0 RC1 depends on Spring 4.1.2 so that we can leverage the new features, enhancement and bug fixes. Spring Boot Milestones https github.com spring projects spring boot milestones ",XD-2270,
As a follow up action from module registry refactoring we would have to clean up deprecated functions ex download of module definitions within our codebase. It may also be necessary to clean up Shell and Admin UI modules. ,XD-2269,
"As a developer, I'd like to have a maintenance branch so that I can commit MINOR release ex 1.0.2 code changes instead of committing to MASTER.",XD-2268,
Pre requisite for Rabbit MQ Benchmarks Infrastructure setup Configuration changes Tool chain setup IPerf,XD-2264,
Pre requisite for Rabbit MQ Benchmarks Infrastructure setup Configuration changes Tool chain setup,XD-2259,
Please refer to the GH Issue reported here https github.com spring projects spring xd issues 1218,XD-2258,
"Using the iperf tool https iperf.fr , find out the transfer rate in MB sec between three machines in a four machine configuration.",XD-2253,
"When answering support questions, the first step is to determine what version of the software the customer is using. This question can be easily answered if we log the version as one of the fields in the log file. For example noformat 10 44 21,212 1.0.2.BUILD SNAPSHOT INFO DeploymentSupervisorCacheListener 0 server.ContainerListener Container arrived Container name 431baa56 b23b 48fc b37d 18b52231e799 , attributes ip 192.168.25.177, host Patrick Peralta MacBook Pro.local, groups , pid 38004, id 431baa56 b23b 48fc b37d 18b52231e799 noformat This way when we receive log snippets initial support inquires rarely include the entire log file we can immediately determine if the issue has already been fixed in a later release. ",XD-2247,
"As a user, I'd like to type the username and password to gain access to Admin server so that I'don t have to add it in some file; hence I'don t have to worry about having the password getting logged somewhere.",XD-2228,
"As a user, I'd like to have the flexibility to change the namespace so that I can isolate ZK metadata based on each tenant profile. ",XD-2226,
Implement pagination for http localhost 9393 jobs executions,XD-2225,
Add pagination for http localhost 9393 jobs configurations Related to XD 1864,XD-2224,
"With the implementation of XD 1864, we need to make sure that the paginated data returned from the REST endpoints has proper default ordering. Up to now we have done client side ordering in the Admin UI, but with server side pagination, the server side should support proper pagination as well. Eventually, we may even decide to provide more flexible ordering options ASC vs DESC, sort on different properties etc. , which may be a separate Jira.",XD-2223,
"As a user, I'd like to have Spring Core upgraded to 4.1.1 milestone so that I can benefit from performance improvements associated with compiled SpEL and other enhancements. ",XD-2216,
"To enrich acceptance test coverage, I'd like to have stress test scenario that includes ingesting data from HTTP and then writing it to Log sink.",XD-2213,
"To enrich acceptance tests, I'd like to have test coverage to evaluate FieldValueCounts and AggregateCounts for a given scenario.",XD-2212,
"To enrich acceptance test, I'd like to lazy initialize DB for JDBC Sink acceptance tests. Check to see if it is already initialized and decide. ",XD-2211,
"To enrich acceptance test, I'd like to add coverage to JDBC sink by including driverclass and url options.",XD-2210,
"To enrich acceptance test, I'd like to have basic coverage to evaluate Gemfire use cases. An example would be to ingest data from HTTP source and write it to Gemfire server.",XD-2209,
"To enrich the acceptance test, I'd like to evaluate JSON object to extract Good and Bad instead of just relying on a basic filter test to assert the payload content. ",XD-2208,
"As a user, I'd like to have a Python processor so that I can efficiently perform data computations and statistical analysis. Investigate the right approach native or via stdin stdout that fits Spring XD model. Integrate Java and Python https wiki.python.org moin IntegratingPythonWithOtherLanguages Java ",XD-2205,
See https build.spring.io browse XD SCRIPTS 723,XD-2192,
"Once the container s management server is secured, the admin server needs to know which REST template to use to get the message rates from the deployed modules inside the containers.",XD-2186,
"As a user, I want to know my configuration options are for enabling SSL HTTPS and Basic authentication for administration endpoints, so that I can secure my application.",XD-2181,
"As a user, I'd like to override the default commit interval so that I can configure commit interval depending on data volume. Note This would apply for all OOTB jobs that has partition support. The property could be part of servers.yml file.",XD-2180,
"As a user, I'd like to have the option to supply data partitioning strategy so that I can parallelize ingest of data from RDBMS to HDFS.",XD-2178,
XD 1.0.2 Release PHD 2.1 Upgrade Action Items Update to SHDP 2.0.3 Add Hadoop 2.5 hadoop25 Change PHD 2.x from phd20 to phd21 Test PHD 2.0 with phd21 Document that both PHD 2.1 and PHD 2.0 is supported with phd21 ,XD-2177,
"As a user, I'd like to evaluate Spring Boot dependency upgrades so that I can make sure there aren t any side effects or impacts to existing functionalities. ",XD-2169,
"As a user, I need a document covering our recommendations for deploying a XD cluster using Mesos with the Marathon Framework. ",XD-2166,
"As a user, I need a sandbox Docker Image so that I can get started to experiment XD deployment with the following setup Ubuntu OS Full XD Jar Java 7.x Redis RabbitMQ",XD-2158,
Small follow up story to XD 2094 to improve tooltip handling.,XD-2155,
"As a user, I'd like to have a REST API to point and push an archive that includes custom module definitions and configurations so that I'don t have to manually move and set it up. Scope of this spike Assess customer requirement, brainstorm, and document options Socialize with the team to collect feedback Identify phases Create new stories",XD-2154,
"As a user, I'd like to have latest Spring Boot RELEASE pulled as a dependency so that I can inherit and implement the OOTB security features.",XD-2147,
"As a user, I'd like to have latest Spring Boot snapshot pulled as a dependency so that I can inherit and implement the OOTB security features.",XD-2146,
"As a user, I want to be able to provide security credentials to the XD Shell so that I can interact with an xd admin server that is secured via basic auth Technical implementation Add password and username to the admin config command. ",XD-2145,
"As a user, I'd like to have the option to provide single user security configurations so that I can override them as needed. Reference Spring Boot Security http docs.spring.io spring boot docs 1.1.x SNAPSHOT reference html boot features security.html Scope Configurations can be provided through servers.yml file.",XD-2144,
"As a user, I'd like to have the option of Basic Auth so that I m challenged to provide user name and password when making a request. Technical Implementation This functionality is provided in Spring Boot 1.1.x, it should be a matter of adding the spring boot security starter dependency to the spring xd dirt project. It will be controlled using the spring boot property server.basic.enabled true false. Our default in application.yml for this property should be false. ",XD-2143,
"stream create foo definition label bar xxxx stream deploy foo properties module.label.yyy zzz seems to work but it does not. The pre validation is correct, but downstream, deployment logic still looks for module.bar instead of module.label ",XD-2140,
"As a user, I'd like to have the option of Cassandra sink, so I can leverage the NoSQL database to write high volumes of variable data segments in high velocity.",XD-2130,
"As a user, I'd like to have the ability to mass ingest data from various database systems so that I m not restricted with the current approach jdbchdfs that is dependent on JDBC drivers. Spike Scope Identify integration options Collaborate to determine the design Document outcome design specs ",XD-2124,
"As a user, I'd like to have the option of kerberized HDFS sink so that I can leverage Kerberos open source distributed authentication system for secured data writes into Hadoop.",XD-2123,
"As a user, I'd like to have the option to configure default access control for endpoints so that I can grant access by Admin or Viewer roles.",XD-2122,
"As a user, I'd like to have the option to provide LDAP based security configurations so that I can access the endpoints in a secured manner. Ideally, all the listed endpoints http localhost 9393 needs to be encapsulated within LDAP based security layer. Reference Authentication using LDAP https spring.io guides gs authenticating ldap ",XD-2121,
"As a user, I'd like to have the option to provide file based security configurations so that I can access the endpoints in a secured manner. Ideally, all the listed endpoints http localhost 9393 needs to be encapsulated within file based security layer. Reference Securing Web App https spring.io guides gs securing web ",XD-2120,
"As a user, I'd like to have the option to enable HTTPS so that I can access XD s Admin server endpoints https github.com spring projects spring xd wiki REST API xd resources over secured communication. Technical Implementation This functionality is available in Spring Boot 1.2.0 M1 and has been backported into the 1.1.x branch to be released under Spring 1.1.7. We can test against 1.1.7 SNAPSHOT. Working through the way to update the build file to pick up a new version of boot is a bit tricky ",XD-2119,
Create processor and sink modules that can execute a shell command using stdin and stdout to stream data.,XD-2118,
Currently the application allows AWS select which zone in the region to create an instance.,XD-2112,
Current Behavior Currently XD EC2 downloads an XD zip file from the location specified by the xd dist url after verifying that the file is accessible.. ,XD-2110,
"Currently, the aggregate counter only adds 1 to the individual values, even though support is there to add any increment. This ticket is about surfacing a SpEL expression on the message to choose the increment",XD-2107,
"Currently, custom SI property accessors are registered by a plugin org.springframework.xd.dirt.plugins.SpelPropertyAccessorPlugin and are not visible by the bus. I believe they should be. This may just be a matter of moving them around.",XD-2105,
"As a user, I'd like to have the option to write into Kafka sink so that I can publish mass data into Kafka broker.",XD-2103,
"XD Module configured for component scanning classes or methods? annotated with Source, consider Processor, and Sink as well and simply provide the POJOs and dependent jars in the module lib directory. Custom processor is fairly straightforward currently, but still requires an XML module definition to wire up the POJO as a service activator or transformer to the input and output channel. A service activator works for a POJO backed sink. Writing a source that is not backed by an existing inbound channel adapter is a bit more involved and requires more than basic familiarity with SI. It should be possible for XD to automatically create a polling source by wiring a Java method to an inbound adapter configured with a poller. Ideally, we would require no XML, even to enable component scanning this will require some changes to the module registry module initializer.",XD-2100,
"Kafka lends itself well as a message bus, and kafka partitioning maps to MB partitioning. Implement KafkaMessageBus and supporting classes and UT IT.",XD-2098,
"When the container starts up, it has a random http port for management configurations. If the container has management port enabled, then we can store it as container attribute. If the admin can reach out to the container on that port, then we can provide an option to shutdown container from the admin server.",XD-2097,
"For a given stream job, we need a visual representation of the stream job with any deployed modules.",XD-2096,
"Admin UI currently allows job to be deployed with deployment properties, we need similar way to deploy stream with the deployment properties module count, container matching criteria .",XD-2095,
We need a visual representation of the XD cluster with runtime container and deployed modules.,XD-2094,
"Currently, there is a stream list job list which shows the status of a given stream job along with the DSL. and, there is runtime modules which shows all the deployed modules with their container info. We need a better REST endpoint that gives all the deployed modules for a given stream job along with the status.",XD-2093,
Design Spike Investigate various approaches to bootstrap custom modules. Can Spring Boot be leveraged? Starter POM?,XD-2091,
"As a user, I'd like to have guidance to create custom modules so that I can align the development practices with recommended approach. 11 20 Update Scope of this task is to create an example to demonstrate and document the capability.",XD-2090,
h1. Run Acceptance tests on the following deployments. h2. Slow Network Simulate slow network by deploying a XD cluster where the ZK Ensemble is only available via WAN. h2. Network packet loss Simulate cases where a network packets can be lost. ,XD-2085,
"h1. Summary User wants the ability to deploy an ec2 cluster where the admin containers use a pre existing ZK ensemble, Rabbit and redis instance that are deployed on different machines. h2. Current functionality Currently spring xd ec2 sets up its containers admin server to use a ZK, rabbit and redis that are provisioned and collocated with the admin server. h2. Detail The following properties will be added to the spring xd ec2.properties spring zk client connect contains a comma delimited list of zk hosts ports for a ensemble. The application will check to see if the port is open on at least of the servers in the list, if not deployment will fail. Default is adminServer host 2181. spring rabbitmq addresses contains a comma delimited list of hosts ports for a rabbit cluster. The application will check to see if the port is open on at least of the servers in the list, if not deployment will fail. Default is adminServer host 5672. spring redis contains a host port for a redis instance. The application will check to see if the port is open , if not deployment will fail. Default is adminServer host 5672. ec2 zone user can specify the zone to which the containers and admin will be deployed. If not present AWS will decide which zone to deploy the cluster.",XD-2084,
Provide for retry and or dead lettering for the rabbit source similar to the rabbit message bus .,XD-2079,
"The http source does not provide debug logging to see information such as http headers and requests, in particular if a non OK response is returned. I updated the log4j config for org.jboss.netty but it had no effect. I suspect this is due to the need to configure the netty logging system via InternalLoggerFactory.setDefaultFactory new Log4JLoggerFactory . ",XD-2069,
"Tests that use verifySendCounts to validate whether data was sent to all the modules in a stream occasionally fail. This is because, sometimes it takes 2 or more sends to get the data transmitted between modules. With the current test structure this is considered a failure. Is this the correct behavior?",XD-2066,
"Use a baseline DIRT infrastructure to measure throughput, HA and scalability for various payload sizes. Depends on testing infrastructure setup, configuration and availability.",XD-2063,
"As an user, I'd like to have the ability to ingest data into Redis sink.",XD-2061,
"As an user, I'd like to have a native JDBC source module to ingest data directly from various databases. ",XD-2060,
The goal is to optimize the build process and at the same time validate the feature capabilities as quickly as we can. Investigate the long running tests. Look for long timeout window declarations. ,XD-2058,
"As a user, I'd like to have the option to use the SFTP source module so that I can access, transfer, and mange files over any reliable data streams. Reference Spring Integration SFTP Adapter http docs.spring.io spring integration reference html sftp.html Need to consider the infrastructure for testing.",XD-2044,
Update XD EC2 configs to Pull from 1.0.1 Repo Update XD EC2 Configs to use spring xd 1.0.1.BUILD SNAPSHOT dir Update test configs XD HOME to spring xd 1.0.1.BUILD SNAPSHOT instead of spring xd 1.0.0.BUILD SNAPSHOT,XD-2042,
Maybe only have it run after the publish build instead of triggering builds directly from jdk6 7 8.,XD-2036,
Noticed a few issues while reviewing the documentation The sidebar for TOC is no longer there That was really nice. Somehow the Using MQTT on XD section is giving an error. quote asciidoctor WARNING index.adoc line 167 invalid style for paragraph appendix asciidoctor WARNING index.adoc line 169 include file not found data projects spring xd build asciidoc guide Using MQTT on XD.asciidoc distZip quote but I'don t notice anything different between that appendix and the others in index.adoc. ,XD-2032,
"Removed various TODO comments in code and put here for proper triage. DefaultTuple Error handling. When delegating to the conversion service, the ConversionFailedException does not have the context of which key caused the failure. Need to wrap ConversionFailedException with IllegalArgumentException and add that context back in. see method convert Ctor visibility. Consider making ctor final and package protect the ctor so as to always use TupleBuilder check for no duplicate values when initializing names values list tuple. top level methods to add. String getComponentName... somethign that would indicate which stream or job this tuple is being processed in.... TupleFieldSetMapper Only one date format? JsonStringtoTupleConverter JsonNodetoTupleConverter do we want to not map id and timestamp believe the answer is don t map, preserve original ",XD-2031,
Spring 4.0 provides a UUID generator used by default in SI that should be used instead of the com.eaoi.uuid library in the xd tuple library,XD-2029,
There are a few places in the doc we can reference regarding overall lifecycle of jobs but this should provide a basic recipe for a single step job. The focus should be on creating a job item processor. In particular how List Message Tuple as the payload. this should link back to a new section in the aggregator that also mentions List Message Tuple Change title from Creating a Job Item Processor to Creating a Job Module,XD-2028,
"https github.com spring projects spring xd wiki Creating a Job Item Processor should be very brief introduction to this topic, before linking to relevant spring batch documentation.",XD-2027,
"If the XD admin server lets tomcat chooses random http port by setting PORT or server.port to 0 , the XD config logging and admin server context id still points to port zero as these are set before tomcat assigns the available random port. We also need to persist the admin servers ports into ZK so that this repo can be accessed by the client.",XD-2026,
issue seems to be error 25 Jul 2014 18 36 18 cat gemfire.pid No such file or directory error 25 Jul 2014 18 36 18 Usage error 25 Jul 2014 18 36 18 kill pid ... Send SIGTERM to every process listed. error 25 Jul 2014 18 36 18 kill signal pid ... Send a signal to every process listed. error 25 Jul 2014 18 36 18 kill s signal pid ... Send a signal to every process listed. error 25 Jul 2014 18 36 18 kill l List all signal names. error 25 Jul 2014 18 36 18 kill L List all signal names in a nice table. error 25 Jul 2014 18 36 18 kill l signal Convert between signal numbers and names. error 25 Jul 2014 18 36 18 rm cannot remove gemfire.pid No such file or directory,XD-2024,
0xData is a rich JVM based machine learning and scoring engine.,XD-2022,
"Here is a strawman noformat Getting Started rather meaty compared to other top level sections, maybe have a section running in SingleNode Running in Distributed Mode Running on YARN Application Configuration Message Bus Configuration Monitoring and Management Technical Documentation Architecture Distributed Runtime remove XD prefix Interactive Shell Batch Jobs Streams Modules Tuples Sources Processors Analytics Sinks Taps Type Conversion Deployment better name? Best Practices new section Admin UI DSL Reference REST API Samples noformat ",XD-2016,
"When hdfsmongodb was written Spring Batch did not have a MongoItemWriter available, so Mark wrote one for XD. The hdfsmongodb module now needs to be use Spring Batches MongoItemWriter.",XD-2011,
"Container s module deployer org.springframework.xd.dirt.module.ModuleDeployer has some unused code and container server.xml has listeners.xml which is no longer used. Also, all the extension code is moved to SharedContextConfiguration.",XD-2009,
https docs.sonatype.org display Repository Central Sync Requirements has a list of requirements. This also means that https jira.spring.io browse XD 1509 is critical to fix.,XD-2008,
"Introduced by XD 2006, admin and container logs will have a pid suffix appended to their filename. The acceptance tests will have to identify the PID for the admin server and the container servers deployed in the cluster and then append the pid value to the filename contained in the xd container log dir.",XD-2007,
"In cases where the deployment requires jars that can not be included with the distribution, the user should be able to pull a jar from a http site and place it in lib xd. The use case is that when we removed the mysql jar from the distribution, the CI tests could not start the XD instances on EC2 without it. It was suggested that we use the postgresql instead, but decided to continue the use of mysql for acceptance tests.",XD-2003,
Determine a better package name for the following packages once we have a common model that applies to both stream job org.springframework.xd.dirt.stream org.springframework.xd.dirt.stream.zookeeper ,XD-2002,
The jars jersey test framework core 1.9.jar jersey test framework grizzly2 1.9.jar are incorrectly classified as compile time deps in hadoop vs. testCompile. ,XD-1998,
"The AggregateCounterTests were created to satisfy XD 1462, but currently they only have a couple tests to validate the time field processing. More comprehensive tests need to be added including the testing of the Redis based implementation in addition to in memory . For more info, see the comment here https github.com spring projects spring xd pull 1087 issuecomment 49638189",XD-1997,
"e.g., ^C09 42 00,882 ERROR localhost startStop 2 loader.WebappClassLoader The web application appears to have started a thread named Abandoned connection cleanup thread but has failed to stop it. This is very likely to create a memory leak. The thread name may be different...",XD-1991,
http stackoverflow.com questions 24819401 how to get spring xd to deploy a predefined set of streams and taps on startup It is documented here https github.com spring projects spring xd wiki Shell executing a script But maybe it should also be at the top of the appendix? https github.com spring projects spring xd wiki ShellReference,XD-1990,
"Some hadoop commands generate warnings deprecation messages. We should try to get rid of most of them. code xd hadoop fs ls xd recursive Hadoop configuration changed, re initializing shell... lsr DEPRECATED Please use ls R instead. 13 01 07,120 WARN Spring Shell util.NativeCodeLoader 62 Unable to load native hadoop library for your platform... using builtin java classes where applicable drwxr xr x trisberg supergroup 0 2014 07 17 11 19 xd hashtagcount drwxr xr x trisberg supergroup 0 2014 07 17 11 19 xd hashtagcount output rw r r 3 trisberg supergroup 0 2014 07 17 11 19 xd hashtagcount output SUCCESS rw r r 3 trisberg supergroup 833 2014 07 17 11 19 xd hashtagcount output part r 00000 drwxr xr x trisberg supergroup 0 2014 07 16 18 28 xd tweets rw r r 3 trisberg supergroup 982993 2014 07 16 18 28 xd tweets tweets 0.txt code ",XD-1989,
"Trying to deploy the hashtagcount batch sample 1 to Hadoop 2.4.1 or Hortonworks HDP 2.1 fails with an IllegalAccessError exception. Looks like a Guava versioning issue Swapping out guava 17.0.jar for guava 11.0.2.jar in the xd lib directory solves it. Mark P suggested we try 16.0.1 which is what Curator uses and that seems to work as well. Looking into changing the build to not force 17.0 which is the IO platform version. http upstream tracker.org java compat reports guava 16.0.1 to 17.0 src compat report.html I get the following exception code 16 42 22,214 INFO Deployer server.JobDeploymentListener Deployment status for job hashtagCountJob DeploymentStatus state deployed 16 42 27,315 WARN task scheduler 2 mapreduce.JobSubmitter No job jar file set. User classes may not be found. See Job or Job setJar String . 16 42 27,325 ERROR task scheduler 2 step.AbstractStep Encountered an error executing step hashtagcount in job hashtagCountJob java.lang.IllegalAccessError tried to access method com.google.common.base.Stopwatch. init V from class org.apache.hadoop.mapreduce.lib.input.FileInputFormat at org.apache.hadoop.mapreduce.lib.input.FileInputFormat.getSplits FileInputFormat.java 369 at org.apache.hadoop.mapreduce.JobSubmitter.writeNewSplits JobSubmitter.java 493 at org.apache.hadoop.mapreduce.JobSubmitter.writeSplits JobSubmitter.java 510 at org.apache.hadoop.mapreduce.JobSubmitter.submitJobInternal JobSubmitter.java 394 at org.apache.hadoop.mapreduce.Job 10.run Job.java 1285 at org.apache.hadoop.mapreduce.Job 10.run Job.java 1282 at java.security.AccessController.doPrivileged Native Method at javax.security.auth.Subject.doAs Subject.java 415 at org.apache.hadoop.security.UserGroupInformation.doAs UserGroupInformation.java 1556 at org.apache.hadoop.mapreduce.Job.submit Job.java 1282 at org.apache.hadoop.mapreduce.Job.waitForCompletion Job.java 1303 at org.apache.hadoop.mapreduce.Job FastClassBySpringCGLIB a048cbfe.invoke generated at org.springframework.cglib.proxy.MethodProxy.invoke MethodProxy.java 204 at org.springframework.aop.framework.CglibAopProxy CglibMethodInvocation.invokeJoinpoint CglibAopProxy.java 708 at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed ReflectiveMethodInvocation.java 157 at org.springframework.aop.support.DelegatingIntroductionInterceptor.doProceed DelegatingIntroductionInterceptor.java 133 at org.springframework.aop.support.DelegatingIntroductionInterceptor.invoke DelegatingIntroductionInterceptor.java 121 at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed ReflectiveMethodInvocation.java 179 at org.springframework.aop.framework.CglibAopProxy DynamicAdvisedInterceptor.intercept CglibAopProxy.java 644 at org.apache.hadoop.mapreduce.Job EnhancerBySpringCGLIB 875ec891.waitForCompletion generated at org.springframework.data.hadoop.mapreduce.JobExecutor 2.run JobExecutor.java 199 at org.springframework.core.task.SyncTaskExecutor.execute SyncTaskExecutor.java 50 at org.springframework.data.hadoop.mapreduce.JobExecutor.startJobs JobExecutor.java 170 at org.springframework.data.hadoop.batch.mapreduce.JobTasklet.execute JobTasklet.java 90 at org.springframework.batch.core.step.tasklet.TaskletStep ChunkTransactionCallback.doInTransaction TaskletStep.java 406 at org.springframework.batch.core.step.tasklet.TaskletStep ChunkTransactionCallback.doInTransaction TaskletStep.java 330 at org.springframework.transaction.support.TransactionTemplate.execute TransactionTemplate.java 133 at org.springframework.batch.core.step.tasklet.TaskletStep 2.doInChunkContext TaskletStep.java 271 at org.springframework.batch.core.scope.context.StepContextRepeatCallback.doInIteration StepContextRepeatCallback.java 77 at org.springframework.batch.repeat.support.RepeatTemplate.getNextResult RepeatTemplate.java 368 at org.springframework.batch.repeat.support.RepeatTemplate.executeInternal RepeatTemplate.java 215 at org.springframework.batch.repeat.support.RepeatTemplate.iterate RepeatTemplate.java 144 at org.springframework.batch.core.step.tasklet.TaskletStep.doExecute TaskletStep.java 257 at org.springframework.batch.core.step.AbstractStep.execute AbstractStep.java 198 at org.springframework.batch.core.job.SimpleStepHandler.handleStep SimpleStepHandler.java 148 at org.springframework.batch.core.job.flow.JobFlowExecutor.executeStep JobFlowExecutor.java 64 at org.springframework.batch.core.job.flow.support.state.StepState.handle StepState.java 67 at org.springframework.batch.core.job.flow.support.SimpleFlow.resume SimpleFlow.java 162 at org.springframework.batch.core.job.flow.support.SimpleFlow.start SimpleFlow.java 141 at org.springframework.batch.core.job.flow.FlowJob.doExecute FlowJob.java 134 at org.springframework.batch.core.job.AbstractJob.execute AbstractJob.java 304 at org.springframework.batch.core.launch.support.SimpleJobLauncher 1.run SimpleJobLauncher.java 135 at org.springframework.core.task.SyncTaskExecutor.execute SyncTaskExecutor.java 50 at org.springframework.batch.core.launch.support.SimpleJobLauncher.run SimpleJobLauncher.java 128 at sun.reflect.NativeMethodAccessorImpl.invoke0 Native Method at sun.reflect.NativeMethodAccessorImpl.invoke NativeMethodAccessorImpl.java 57 at sun.reflect.DelegatingMethodAccessorImpl.invoke DelegatingMethodAccessorImpl.java 43 at java.lang.reflect.Method.invoke Method.java 606 at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection AopUtils.java 317 at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint ReflectiveMethodInvocation.java 190 at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed ReflectiveMethodInvocation.java 157 at org.springframework.batch.core.configuration.annotation.SimpleBatchConfiguration PassthruAdvice.invoke SimpleBatchConfiguration.java 127 at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed ReflectiveMethodInvocation.java 179 at org.springframework.aop.framework.JdkDynamicAopProxy.invoke JdkDynamicAopProxy.java 207 at com.sun.proxy. Proxy44.run Unknown Source at org.springframework.batch.integration.launch.JobLaunchingMessageHandler.launch JobLaunchingMessageHandler.java 50 at sun.reflect.NativeMethodAccessorImpl.invoke0 Native Method at sun.reflect.NativeMethodAccessorImpl.invoke NativeMethodAccessorImpl.java 57 at sun.reflect.DelegatingMethodAccessorImpl.invoke DelegatingMethodAccessorImpl.java 43 at java.lang.reflect.Method.invoke Method.java 606 at org.springframework.expression.spel.support.ReflectiveMethodExecutor.execute ReflectiveMethodExecutor.java 63 at org.springframework.expression.spel.ast.MethodReference.getValueInternal MethodReference.java 122 at org.springframework.expression.spel.ast.MethodReference.access 000 MethodReference.java 44 at org.springframework.expression.spel.ast.MethodReference MethodValueRef.getValue MethodReference.java 258 at org.springframework.expression.spel.ast.CompoundExpression.getValueInternal CompoundExpression.java 84 at org.springframework.expression.spel.ast.SpelNodeImpl.getTypedValue SpelNodeImpl.java 114 at org.springframework.expression.spel.standard.SpelExpression.getValue SpelExpression.java 111 at org.springframework.integration.util.AbstractExpressionEvaluator.evaluateExpression AbstractExpressionEvaluator.java 159 at org.springframework.integration.util.MessagingMethodInvokerHelper.processInternal MessagingMethodInvokerHelper.java 268 at org.springframework.integration.util.MessagingMethodInvokerHelper.process MessagingMethodInvokerHelper.java 142 at org.springframework.integration.handler.MethodInvokingMessageProcessor.processMessage MethodInvokingMessageProcessor.java 75 at org.springframework.integration.handler.ServiceActivatingHandler.handleRequestMessage ServiceActivatingHandler.java 71 at org.springframework.integration.handler.AbstractReplyProducingMessageHandler.handleMessageInternal AbstractReplyProducingMessageHandler.java 170 at org.springframework.integration.handler.AbstractMessageHandler.handleMessage AbstractMessageHandler.java 78 at sun.reflect.GeneratedMethodAccessor98.invoke Unknown Source at sun.reflect.DelegatingMethodAccessorImpl.invoke DelegatingMethodAccessorImpl.java 43 at java.lang.reflect.Method.invoke Method.java 606 at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection AopUtils.java 317 at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint ReflectiveMethodInvocation.java 190 at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed ReflectiveMethodInvocation.java 157 at org.springframework.integration.monitor.SimpleMessageHandlerMetrics.handleMessage SimpleMessageHandlerMetrics.java 106 at org.springframework.integration.monitor.SimpleMessageHandlerMetrics.invoke SimpleMessageHandlerMetrics.java 86 at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed ReflectiveMethodInvocation.java 179 at org.springframework.aop.framework.JdkDynamicAopProxy.invoke JdkDynamicAopProxy.java 207 at com.sun.proxy. Proxy125.handleMessage Unknown Source at org.springframework.integration.dispatcher.AbstractDispatcher.tryOptimizedDispatch AbstractDispatcher.java 116 at org.springframework.integration.dispatcher.UnicastingDispatcher.doDispatch UnicastingDispatcher.java 101 at org.springframework.integration.dispatcher.UnicastingDispatcher.dispatch UnicastingDispatcher.java 97 at org.springframework.integration.channel.AbstractSubscribableChannel.doSend AbstractSubscribableChannel.java 77 at org.springframework.integration.channel.AbstractMessageChannel.send AbstractMessageChannel.java 255 at org.springframework.integration.channel.AbstractMessageChannel.send AbstractMessageChannel.java 223 at sun.reflect.GeneratedMethodAccessor97.invoke Unknown Source at sun.reflect.DelegatingMethodAccessorImpl.invoke DelegatingMethodAccessorImpl.java 43 at java.lang.reflect.Method.invoke Method.java 606 at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection AopUtils.java 317 at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint ReflectiveMethodInvocation.java 190 at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed ReflectiveMethodInvocation.java 157 at org.springframework.integration.monitor.DirectChannelMetrics.monitorSend DirectChannelMetrics.java 113 at org.springframework.integration.monitor.DirectChannelMetrics.doInvoke DirectChannelMetrics.java 97 at org.springframework.integration.monitor.DirectChannelMetrics.invoke DirectChannelMetrics.java 91 at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed ReflectiveMethodInvocation.java 179 at org.springframework.aop.framework.JdkDynamicAopProxy.invoke JdkDynamicAopProxy.java 207 at com.sun.proxy. Proxy123.send Unknown Source at org.springframework.messaging.core.GenericMessagingTemplate.doSend GenericMessagingTemplate.java 109 at org.springframework.messaging.core.GenericMessagingTemplate.doSend GenericMessagingTemplate.java 44 at org.springframework.messaging.core.AbstractMessageSendingTemplate.send AbstractMessageSendingTemplate.java 94 at org.springframework.integration.handler.AbstractReplyProducingMessageHandler.sendMessage AbstractReplyProducingMessageHandler.java 260 at org.springframework.integration.handler.AbstractReplyProducingMessageHandler.sendReplyMessage AbstractReplyProducingMessageHandler.java 241 at org.springframework.integration.handler.AbstractReplyProducingMessageHandler.produceReply AbstractReplyProducingMessageHandler.java 205 at org.springframework.integration.handler.AbstractReplyProducingMessageHandler.handleResult AbstractReplyProducingMessageHandler.java 199 at org.springframework.integration.handler.AbstractReplyProducingMessageHandler.handleMessageInternal AbstractReplyProducingMessageHandler.java 177 at org.springframework.integration.handler.AbstractMessageHandler.handleMessage AbstractMessageHandler.java 78 at sun.reflect.GeneratedMethodAccessor98.invoke Unknown Source at sun.reflect.DelegatingMethodAccessorImpl.invoke DelegatingMethodAccessorImpl.java 43 at java.lang.reflect.Method.invoke Method.java 606 at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection AopUtils.java 317 at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint ReflectiveMethodInvocation.java 190 at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed ReflectiveMethodInvocation.java 157 at org.springframework.integration.monitor.SimpleMessageHandlerMetrics.handleMessage SimpleMessageHandlerMetrics.java 106 at org.springframework.integration.monitor.SimpleMessageHandlerMetrics.invoke SimpleMessageHandlerMetrics.java 86 at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed ReflectiveMethodInvocation.java 179 at org.springframework.aop.framework.JdkDynamicAopProxy.invoke JdkDynamicAopProxy.java 207 at com.sun.proxy. Proxy125.handleMessage Unknown Source at org.springframework.integration.dispatcher.AbstractDispatcher.tryOptimizedDispatch AbstractDispatcher.java 116 at org.springframework.integration.dispatcher.UnicastingDispatcher.doDispatch UnicastingDispatcher.java 101 at org.springframework.integration.dispatcher.UnicastingDispatcher.dispatch UnicastingDispatcher.java 97 at org.springframework.integration.channel.AbstractSubscribableChannel.doSend AbstractSubscribableChannel.java 77 at org.springframework.integration.channel.AbstractMessageChannel.send AbstractMessageChannel.java 255 at org.springframework.integration.channel.AbstractMessageChannel.send AbstractMessageChannel.java 223 at sun.reflect.GeneratedMethodAccessor97.invoke Unknown Source at sun.reflect.DelegatingMethodAccessorImpl.invoke DelegatingMethodAccessorImpl.java 43 at java.lang.reflect.Method.invoke Method.java 606 at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection AopUtils.java 317 at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint ReflectiveMethodInvocation.java 190 at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed ReflectiveMethodInvocation.java 157 at org.springframework.integration.monitor.DirectChannelMetrics.monitorSend DirectChannelMetrics.java 113 at org.springframework.integration.monitor.DirectChannelMetrics.doInvoke DirectChannelMetrics.java 97 at org.springframework.integration.monitor.DirectChannelMetrics.invoke DirectChannelMetrics.java 91 at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed ReflectiveMethodInvocation.java 179 at org.springframework.aop.framework.JdkDynamicAopProxy.invoke JdkDynamicAopProxy.java 207 at com.sun.proxy. Proxy123.send Unknown Source at org.springframework.messaging.core.GenericMessagingTemplate.doSend GenericMessagingTemplate.java 109 at org.springframework.messaging.core.GenericMessagingTemplate.doSend GenericMessagingTemplate.java 44 at org.springframework.messaging.core.AbstractMessageSendingTemplate.send AbstractMessageSendingTemplate.java 94 at org.springframework.integration.handler.AbstractReplyProducingMessageHandler.sendMessage AbstractReplyProducingMessageHandler.java 260 at org.springframework.integration.handler.AbstractReplyProducingMessageHandler.sendReplyMessage AbstractReplyProducingMessageHandler.java 241 at org.springframework.integration.handler.AbstractReplyProducingMessageHandler.produceReply AbstractReplyProducingMessageHandler.java 205 at org.springframework.integration.handler.AbstractReplyProducingMessageHandler.handleResult AbstractReplyProducingMessageHandler.java 199 at org.springframework.integration.handler.AbstractReplyProducingMessageHandler.handleMessageInternal AbstractReplyProducingMessageHandler.java 177 at org.springframework.integration.handler.AbstractMessageHandler.handleMessage AbstractMessageHandler.java 78 at org.springframework.integration.endpoint.PollingConsumer.handleMessage PollingConsumer.java 74 at org.springframework.integration.endpoint.AbstractPollingEndpoint.doPoll AbstractPollingEndpoint.java 205 at org.springframework.integration.endpoint.AbstractPollingEndpoint.access 000 AbstractPollingEndpoint.java 55 at org.springframework.integration.endpoint.AbstractPollingEndpoint 1.call AbstractPollingEndpoint.java 149 at org.springframework.integration.endpoint.AbstractPollingEndpoint 1.call AbstractPollingEndpoint.java 146 at org.springframework.integration.endpoint.AbstractPollingEndpoint Poller 1.run AbstractPollingEndpoint.java 284 at org.springframework.integration.util.ErrorHandlingTaskExecutor 1.run ErrorHandlingTaskExecutor.java 52 at org.springframework.core.task.SyncTaskExecutor.execute SyncTaskExecutor.java 50 at org.springframework.integration.util.ErrorHandlingTaskExecutor.execute ErrorHandlingTaskExecutor.java 49 at org.springframework.integration.endpoint.AbstractPollingEndpoint Poller.run AbstractPollingEndpoint.java 278 at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run DelegatingErrorHandlingRunnable.java 54 at org.springframework.scheduling.concurrent.ReschedulingRunnable.run ReschedulingRunnable.java 81 at java.util.concurrent.Executors RunnableAdapter.call Executors.java 471 at java.util.concurrent.FutureTask.run FutureTask.java 262 at java.util.concurrent.ScheduledThreadPoolExecutor ScheduledFutureTask.access 201 ScheduledThreadPoolExecutor.java 178 at java.util.concurrent.ScheduledThreadPoolExecutor ScheduledFutureTask.run ScheduledThreadPoolExecutor.java 292 at java.util.concurrent.ThreadPoolExecutor.runWorker ThreadPoolExecutor.java 1145 at java.util.concurrent.ThreadPoolExecutor Worker.run ThreadPoolExecutor.java 615 at java.lang.Thread.run Thread.java 745 code 1 https github.com spring projects spring xd samples",XD-1985,
"A possible approach is to set a configurable wait period when the first container arrives. If another container arrives during the wait period, reset the clock. When the wait period expires, start deploying modules. ",XD-1984,
"When the container which has modules deployed disconnects reconnects to the cluster while the admin leader isn t available, following exception is thrown This is more likely to happen in single node scenario as there is no admin leader re election there. In distributed mode, we can always setup HA on admins so that the leadership re election happens. 20 03 16,307 ERROR DeploymentsPathChildrenCache 0 cache.PathChildrenCache org.apache.zookeeper.KeeperException NodeExistsException KeeperErrorCode NodeExists for xd deployments modules allocated 53f41042 8abd 443b abfb ba42a24fb9fb foo.sink.log.1 metadata at org.apache.zookeeper.KeeperException.create KeeperException.java 119 at org.apache.zookeeper.KeeperException.create KeeperException.java 51 at org.apache.zookeeper.ZooKeeper.create ZooKeeper.java 783 at org.apache.curator.framework.imps.CreateBuilderImpl 11.call CreateBuilderImpl.java 676 at org.apache.curator.framework.imps.CreateBuilderImpl 11.call CreateBuilderImpl.java 660 at org.apache.curator.RetryLoop.callWithRetry RetryLoop.java 107 at org.apache.curator.framework.imps.CreateBuilderImpl.pathInForeground CreateBuilderImpl.java 656 at org.apache.curator.framework.imps.CreateBuilderImpl.protectedPathInForeground CreateBuilderImpl.java 441 at org.apache.curator.framework.imps.CreateBuilderImpl.forPath CreateBuilderImpl.java 431 at org.apache.curator.framework.imps.CreateBuilderImpl.forPath CreateBuilderImpl.java 44 at org.springframework.xd.dirt.server.ContainerRegistrar.writeModuleMetadata ContainerRegistrar.java 486 at org.springframework.xd.dirt.server.ContainerRegistrar.onChildAdded ContainerRegistrar.java 461 at org.springframework.xd.dirt.server.ContainerRegistrar.access 8 ContainerRegistrar.java 426 at org.springframework.xd.dirt.server.ContainerRegistrar DeploymentListener.childEvent ContainerRegistrar.java 807 at org.apache.curator.framework.recipes.cache.PathChildrenCache 5.apply PathChildrenCache.java 509 at org.apache.curator.framework.recipes.cache.PathChildrenCache 5.apply PathChildrenCache.java 503 at org.apache.curator.framework.listen.ListenerContainer 1.run ListenerContainer.java 92 ",XD-1983,
"https github.com spring projects spring xd commit db66aa2a329a6fc7ef89a340dd4d562fa70d14a4 introduces org.apache.tomcat.embed tomcat embed logging log4j which is not covered by platform. Yet, we should lookup the version to use from other tomcat artifacts, using some gradle magic",XD-1981,
The Back button is at lower left of the page which requires scrolling all the way to the bottom could we move it to top right? Would make clicking back and forth for job executions much easier.,XD-1974,
The Rabbit SMLC uses a SimpleAsyncTaskExecutor by default. This makes it difficult to debug when multiple modules are in the same container because all threads are named SimpleAsyncTaskExecutor 1 .,XD-1970,
We used to have distro specific jars i the lib distro directory. That is no longer working and all distros seem to contain mostly the same version hadoop 2.2.0 dependencies This is the list for phd1 now avro 1.7.5.jar hadoop annotations 2.2.0.jar hadoop auth 2.2.0.jar hadoop client 2.0.5 alpha gphd 2.1.0.0.jar hadoop common 2.2.0.jar hadoop distcp 2.2.0.jar hadoop hdfs 2.2.0.jar hadoop mapreduce client app 2.2.0.jar hadoop mapreduce client common 2.2.0.jar hadoop mapreduce client core 2.2.0.jar hadoop mapreduce client jobclient 2.2.0.jar hadoop mapreduce client shuffle 2.2.0.jar hadoop streaming 2.2.0.jar hadoop yarn api 2.2.0.jar hadoop yarn client 2.2.0.jar hadoop yarn common 2.2.0.jar hadoop yarn server common 2.2.0.jar hadoop yarn server nodemanager 2.2.0.jar jersey core 1.9.jar jersey server 1.9.jar jetty util 6.1.26.jar protobuf java 2.5.0.jar spring data hadoop 2.0.1.RELEASE.jar spring data hadoop batch 2.0.1.RELEASE.jar spring data hadoop core 2.0.1.RELEASE.jar spring data hadoop store 2.0.1.RELEASE.jar ,XD-1967,
"When constructing StepExecutionInfo, the TaskletType class could not be loaded as the spring data hadoop batch jar is missing from admin classpath in distributed mode. Following exception is thrown SEVERE Servlet.service for servlet dispatcherServlet in context with path threw exception Handler processing failed; nested exception is java.lang.NoClassDefFoundError org springframework data hadoop batch hive HiveTasklet with root cause java.lang.ClassNotFoundException org.springframework.data.hadoop.batch.hive.HiveTasklet at java.net.URLClassLoader 1.run URLClassLoader.java 366 at java.net.URLClassLoader 1.run URLClassLoader.java 355 at java.security.AccessController.doPrivileged Native Method at java.net.URLClassLoader.findClass URLClassLoader.java 354 at java.lang.ClassLoader.loadClass ClassLoader.java 425 at sun.misc.Launcher AppClassLoader.loadClass Launcher.java 308 at java.lang.ClassLoader.loadClass ClassLoader.java 358 at org.springframework.xd.dirt.job.TaskletType. clinit TaskletType.java 57 at org.springframework.xd.dirt.job.StepExecutionInfo. init StepExecutionInfo.java 94 at org.springframework.xd.dirt.rest.BatchStepExecutionsController.details BatchStepExecutionsController.java 98 at sun.reflect.NativeMethodAccessorImpl.invoke0 Native Method at sun.reflect.NativeMethodAccessorImpl.invoke NativeMethodAccessorImpl.java 57 at sun.reflect.DelegatingMethodAccessorImpl.invoke DelegatingMethodAccessorImpl.java 43 at java.lang.reflect.Method.invoke Method.java 606 at org.springframework.web.method.support.InvocableHandlerMethod.invoke InvocableHandlerMethod.java 215 ",XD-1965,
"12 30 43,930 WARN main logging.LoggingApplicationListener Logging environment value file data projects spring xd build dist spring xd xd config xd container logger.properties cannot be opened and will be ignored There are extra slashes in there.... probably due to some recent changes related to xd config location in the scripts.",XD-1964,
The module info command renders text that is pretty much unreadable on a reasonably sized screen. See attached screen shot. Also all the jdbc pool settings are mixed in with module settings making for a confusing list of options. What the heck does fairQueue have to do with filejdbc jobs?,XD-1961,
Should be part of the daily build. One easy way to do it would be to use the hardcoded authentication scheme as described here bamboo should mask a property whose name contains password We may want to create a dedicated github user though,XD-1952,
The platform uses Boot version 1.1.4 so the plugin version used in build.gradle should match that.,XD-1948,
See PR https github.com spring projects spring xd pull 1043 ,XD-1947,
Test to verify stream state is correct after starting stopping containers.,XD-1946,
jclouds is not compatible with versions of guava higher than 15.,XD-1942,
Remove unnecessary duplicated jars from the lib directory in spring xd yarn zip distribution,XD-1940,
"The XD shell completion crashes on job launch name TAB gives noformat xd job launch name Exception in thread Spring Shell java.lang.IllegalStateException Could not determine kind tab completion count 1 existing job disable string converter at org.springframework.xd.shell.converter.CompletionConverter.determineKind CompletionConverter.java 109 at org.springframework.xd.shell.converter.CompletionConverter.getAllPossibleValues CompletionConverter.java 69 at org.springframework.shell.core.SimpleParser.completeAdvanced SimpleParser.java 857 at org.springframework.shell.core.ParserCompleter.complete ParserCompleter.java 47 at jline.console.ConsoleReader.complete ConsoleReader.java 3077 at jline.console.ConsoleReader.readLine ConsoleReader.java 2501 at jline.console.ConsoleReader.readLine ConsoleReader.java 2162 at jline.console.ConsoleReader.readLine ConsoleReader.java 2150 at org.springframework.shell.core.JLineShell.promptLoop JLineShell.java 522 at org.springframework.shell.core.JLineShell.run JLineShell.java 179 at java.lang.Thread.run Thread.java 744 noformat Moreover, seems completion generally crashes when the server is not up which was taken care of previously if I m not mistaken xd job destroy name TAB noformat Exception in thread Spring Shell org.springframework.web.client.ResourceAccessException I O error on GET request for http localhost 9393 jobs definitions?size 10000 deployments true Connection refused; nested exception is java.net.ConnectException Connection refused at org.springframework.web.client.RestTemplate.doExecute RestTemplate.java 561 at org.springframework.web.client.RestTemplate.execute RestTemplate.java 506 at org.springframework.web.client.RestTemplate.getForObject RestTemplate.java 243 at org.springframework.xd.rest.client.impl.JobTemplate.list JobTemplate.java 121 at org.springframework.xd.rest.client.impl.JobTemplate.list JobTemplate.java 40 at org.springframework.xd.shell.converter.ExistingXDEntityConverter.getAllPossibleValues ExistingXDEntityConverter.java 72 at org.springframework.shell.core.SimpleParser.completeAdvanced SimpleParser.java 857 at org.springframework.shell.core.ParserCompleter.complete ParserCompleter.java 47 at jline.console.ConsoleReader.complete ConsoleReader.java 3077 at jline.console.ConsoleReader.readLine ConsoleReader.java 2501 at jline.console.ConsoleReader.readLine ConsoleReader.java 2162 at jline.console.ConsoleReader.readLine ConsoleReader.java 2150 at org.springframework.shell.core.JLineShell.promptLoop JLineShell.java 522 at org.springframework.shell.core.JLineShell.run JLineShell.java 179 at java.lang.Thread.run Thread.java 744 Caused by java.net.ConnectException Connection refused at java.net.PlainSocketImpl.socketConnect Native Method at java.net.AbstractPlainSocketImpl.doConnect AbstractPlainSocketImpl.java 339 at java.net.AbstractPlainSocketImpl.connectToAddress AbstractPlainSocketImpl.java 200 at java.net.AbstractPlainSocketImpl.connect AbstractPlainSocketImpl.java 182 at java.net.SocksSocketImpl.connect SocksSocketImpl.java 392 at java.net.Socket.connect Socket.java 579 at java.net.Socket.connect Socket.java 528 at sun.net.NetworkClient.doConnect NetworkClient.java 180 at sun.net.www.http.HttpClient.openServer HttpClient.java 432 at sun.net.www.http.HttpClient.openServer HttpClient.java 527 at sun.net.www.http.HttpClient. init HttpClient.java 211 at sun.net.www.http.HttpClient.New HttpClient.java 308 at sun.net.www.http.HttpClient.New HttpClient.java 326 at sun.net.www.protocol.http.HttpURLConnection.getNewHttpClient HttpURLConnection.java 996 at sun.net.www.protocol.http.HttpURLConnection.plainConnect HttpURLConnection.java 932 at sun.net.www.protocol.http.HttpURLConnection.connect HttpURLConnection.java 850 at org.springframework.http.client.SimpleBufferingClientHttpRequest.executeInternal SimpleBufferingClientHttpRequest.java 78 at org.springframework.http.client.AbstractBufferingClientHttpRequest.executeInternal AbstractBufferingClientHttpRequest.java 48 at org.springframework.http.client.AbstractClientHttpRequest.execute AbstractClientHttpRequest.java 52 noformat ",XD-1938,
postgresql is BSD http jdbc.postgresql.org about license.html,XD-1937,
The work here is doing the research.... mysql client jar should be removed as it is GPL http dev.mysql.com downloads connector j 5.0.html GPL postgresql is BSD so that is ok another issue will handle license file inclusion.,XD-1936,
We need to make sure there is no conflicting missing dependency with build.gradle using spring IO platform dependencies. https jira.spring.io browse XD 1929 is one such scenario where jolokia dependency went missing.,XD-1931,
"http localhost 9393 management jolokia search xd. type , for singlenode in M7 returned a value..... on master it returns 404 error... ",XD-1929,
"Previously, the scripts all looked for the logging configuration in XD HOME config or XD HOME config . This caused issues because it meant that if you moved all of the configuration and overrode XD CONFIG LOCATION or XD CONFIG LOCATION , the logging configuration changes would not be found in the new location. This change updates the scripts to look for logging configuration in XD CONFIG LOCATION or XD CONFIG LOCATION .",XD-1927,
Hadoop 2.4.1 is now a stable release and we should add support for running against it,XD-1915,
https github.com spring guides gs spring xd issues 1,XD-1910,
Now that the bus supports retry it is no longer necessary to have the retry advice in the TCP Sink.,XD-1908,
"When the job is in deploying state, until we decide whether the job is actually deployed or failed incomplete , there is no way to know if it is fine to launch schedule though the launching requests are going to go to the job launch request queue . We could either disable both deploy undeploy until the state changes from deploying ?",XD-1907,
"As a minimum we need some common polling strategy on the client side to detect status changes of job streams etc. E.g. during deployment of streams jobs Ideally, I would like to have this addressed on the server side as well. It would be nice if we could propagate events between, containers and admin server that would inform about any changes in the system. We could then use those to notify connected UI clients.",XD-1906,
"When deploying a definition with a container match criteria specified, and no container could be selected the logging is ambiguous and should mention the affected module code 11 58 24,089 WARN DeploymentSupervisorCacheListener 0 cluster.DefaultContainerMatcher No currently available containers match criteria somecriteria code ",XD-1905,
"This should include some guidance on setting rabbit message bus paramters relating to prefetch and concurrency. It should also discuss the bypass functionality or reference another section that covers it. We should probably include how to scale out http sources, e.g. the need to use a load balancer.",XD-1894,
See https jira.spring.io browse XD 1684 Requires update to gradle 2.1,XD-1891,
Use external JVM launch support provided by the Oracle Tools framework https java.net projects oracletools .,XD-1890,
Spring IO Compatibility,XD-1886,
"Not all module options are born equal. Some are more important useful than others, and having the more expert ones show up e.g. in TAB completion is very noisy esp. given how JLine2 currently presents the whole stream definition typed so far when doing completion, as opposed to just the last bit ",XD-1885,
It seems that no option validation being Spring or jsr 303 is happening anymore at stream creation time. eg noformat stream create foo definition http port bar log noformat ,XD-1884,
"Also, the approach may not work as expected on windows.",XD-1881,
https github.com spring projects spring xd blob master src test scripts tweet tests use field value counter and aggregate counter. Should do a simplified version of this so that we can assert values of the field value counter and aggregate counter.,XD-1880,
See https github.com spring projects spring xd blob master src test scripts jdbc tests L96 and https github.com spring projects spring xd blob master src test scripts jdbc tests L64 The second assert has initializeDb false and so there are double the number of rows running the job a second time.,XD-1879,
"The test https github.com spring projects spring xd blob master src test scripts httpbash is very simple, it doesn t even check the results. A small change to https github.com spring projects spring xd blob master spring xd test fixtures src main java org springframework xd test generator SimpleHttpGenerator.java so that number of messages to post is specified would be part of this work.",XD-1878,
"Port https github.com spring projects spring xd blob master src test scripts gemfire stream tests Need to consider how to start the server, maybe use the jvm fork utilities? Look into spring data gemfire as well.",XD-1877,
"The script tests does the following. code Filter for good and bad create stream httpfilter http good filter expression jsonPath payload, .entities.hashtags .text .contains good aftergood filter expression true bad filter expression jsonPath payload, .entities.hashtags .text .contains bad goodandbad splitter expression jsonPath payload, .id file dir TEST DIR true code ",XD-1876,
Note that the documentation for the module options in particular for http client should be autogenerated using the following syntax see others noformat ^processor.http client processor.http client noformat ,XD-1874,
"Investigate Job Executions list page load timing based on number of job executions to load. The investigation can be of the following steps 1 Return all the size restrictions to retrieve the number of job executions. 2 Setup 5, 10, 100, 500, 1000 number of job executions and measure the page load timings. Based on this, we can address the paging support mentioned in XD 1864.",XD-1873,
Update documentation related to database migration with the changes from XD 1822,XD-1871,
Need a way for end user to package and add custom modules scripts when deploying XD on YARN. Currently we have a zip file containing all code including modules. It s not convenient to un zip re zip this archive to add custom modules scripts. See https github.com spring projects spring xd issues 931,XD-1863,
"Currently, jobs definitions and batch jobs offer similar info related to the job configuration info. The former comes from ZKJobDefinitionRepository while the latter comes from Batch Job Repository. We need to combine this together so that it is not confusing to the end user.",XD-1859,
See impacted code at https github.com spring projects spring xd pull 951,XD-1858,
"We should have an fsUri parameter for hdfs and hdfs dataset sinks so we can write to different file systems hdfs, webhdfs ",XD-1856,
Going forward it seems that providing Hadoop v1 will be of lesser importance and we might as well drop it now. SHDP 2.1 will also drop any v1 support. Remove support for hadoop12 Apache Hadoop 1.2.1 cdh4 Cloudera CDH 4.6.0 hdp13 Hortonworks Data Platform 1.3 Keep hadoop22 Apache Hadoop 2.2.0 default phd1 Pivotal HD 1.1 phd20 Pivotal HD 2.0 cdh5 Cloudera CDH 5.0.0 hdp21 Hortonworks Data Platform 2.1 This should make configuration and documentation easier too. Not to mention testing. This affects startup scripts and the shell plus the build script.,XD-1854,
The Tap fixture does not need to inherit from AbstractModuleFixture Replace moduleName method with moduleToTap. The current tap syntax is tap stream streamname . modulelabel and not tap stream streamname . modulelabel . modulename as currently implemented by the label fixture. ,XD-1853,
currently we have batch and jobs. Everything should move to jobs. See https github.com spring projects spring xd wiki REST API for details.,XD-1849,
See the design document https docs.google.com a gopivotal.com document d 1kWtoH xEF1wMklzQ8AZaiuhBZWIlpCDi8G9 hAP8Fgc edit heading h.2rk74f16ow4i for more details. The REST controller needs to be modified to obtain stream job state once it is available in ZooKeeper. This depends on XD 1847.,XD-1848,
See the design document https docs.google.com a gopivotal.com document d 1kWtoH xEF1wMklzQ8AZaiuhBZWIlpCDi8G9 hAP8Fgc edit heading h.2rk74f16ow4i for more details. This class or perhaps a method on a repository? will need to query ZooKeeper to obtain the state of a stream job in order to pass it along to the REST controller.,XD-1847,
"As part of XD 1591, DeploymentVerifier was modified to take the node structure into account. As indicated in the review below, the implementation does not take module properties such as count into account https github.com spring projects spring xd pull 939 files r13730134 This means the implementation is incorrect. For now this won t affect us since all tests at the moment are single node. However this can be drastically improved and simplified once XD 1270 is completed. At that point we ll be able to simply read a single ZK node to determine if when a deployment succeeded. ",XD-1846,
"This needs closer inspection, but here are some things that currently do not work, either at the parser level, or at actual deployment time noformat xd module compose foo definition queue bar filter Command failed org.springframework.xd.rest.client.impl.SpringXDException Could not find module with name filter and type sink xd module compose foolog definition queue foo log Successfully created module foolog with type sink should fail not a module, but a full stream xd module compose foo definition queue bar filter transform Successfully created module foo with type processor should be source noformat ",XD-1839,
"With XD 1311, the job execution list shows the definition deployment status of the associated job. We need to show the same information for a given job execution.",XD-1835,
This will eliminate any race conditions between deployments and containers joining leaving the cluster.,XD-1834,
The JMS Source Sink has a pluggable provider default activemq but the URL property amqUrl implies activeMQ the property name should be generic found while testing XD 1149 .,XD-1833,
Support receiving messages from an HA cluster.,XD-1824,
This issue could be more involved. Proper pagination may not be implemented correctly by the REST controller making the respective service call . This would also necessitate some form of improved state management for the UI. E.g. User is on page 5 of the listing of Job Executions User views details User presses the back button on the screen The the listing of Job Executions should be still on page 5 ,XD-1823,
"Currently, there are JOB REGISTRY NAMES, JOB REGISTRY RESTARTABLES and JOB REGISTRY INCREMENTABLES tables and we can possibly combine them into one table and have a better schema for this.",XD-1822,
"Generate asciidoc fragments for each module s options, this way it is always up to date.",XD-1816,
Pass module properties from stream plugin to MessageBusAwareChannelResolver . Disallow partitioning properties.,XD-1812,
"If someone wants to have a dedicated location module registry for the custom modules and can be accessed from any Spring supported resource URL location, then we need to support. Currently, we use Delegating ModuleRegistry which uses ResourceModuleRegistry implementations that look for location xd.module.home and classpath modules . Maybe we can add an additional ResourceModuleRegistry with xd.custom.module.home and use it for custom modules.",XD-1811,
Theoretically I would have liked to centralize logging of Http Resource calls global more substantially but see this limitation https github.com angular angular.js issues 4013,XD-1808,
Add paging support for the appropriate accessor methods in ModuleMetadata Container repositories,XD-1807,
So that the code format matches that of the XD Project.,XD-1806,
"XML is currently required for module definitions. XD should also support Java Config and Groovy bean definitions and potentially, SI DSLs. ",XD-1805,
"The XD parser had initial support for substreams, which have been subsumed by composed modules. That legacy code is unused and not needed",XD-1804,
"Some REST resources lack an XmlRootElement annotation. This causes a JAXB marshalling error when trying to access the API with an Accept header of xml which is the default in most browsers This is a preliminary to XD 1800 which is much more involved , only to fix ugly exception",XD-1802,
"XD EC2 applies the environment variables to all container instances that are created. This behavior has to be altered such that a environment variable can be applied to to a specific container instance. For example if we create a 3 node cluster Admin, Container1, Container2 Container3. For Example XD1 XD CONTAINER GROUPS GROUP1 XD2 XD CONTAINER GROUPS GROUP2 In this example XD1 XD CONTAINER GROUPS GROUP1 would apply XD CONTAINER GROUPS GROUP1 to container1 s environment. XD2 XD CONTAINER GROUPS GROUP2 would apply XD CONTAINER GROUPS GROUP2 to container2 s environment. While container3 would not receive a specific environment setting for XD CONTAINER GROUPS. ",XD-1795,
Deploy Type Admin Container on EC2 Rabbit Transport SHA 8fba31d Steps to reproduce 1 Using Rabbit 3.3 above create a user that does not have privileges to write to sudo rabbitmqctl add user joe password omit this step sudo rabbitmqctl set permissions p joe . . . 2 Set the rabbitmq user name and password export spring rabbitmq username acctest export spring rabbitmq password acctest23 3 Start container. 4 Create stream or job foo 5 Error will occur 6 delete stream or job foo 7 stop container 8 set privilege sudo rabbitmqctl set permissions p joe . . . 9 Start container 10 create stream or job foo 11 System will report that foo exists.,XD-1793,
Create OOTB batch job that executes a job on Spark as a tasklet could be something along this job create yarnJob definition sparkjob master spark localhost 7077 class SimpleApp ,XD-1791,
stream create foo definition bar baz stream deploy foo properties module.qux.fiz,XD-1788,
Detect properties the bus doesn t support.,XD-1787,
PR https github.com spring projects spring xd pull 926,XD-1786,
We need a way to access the deployment properties for the deployed modules. For example runtime module foo.sink.bar 2 ,XD-1784,
Create Acceptance Test Add Mongo to Ec2 Acceptance Test Environment.,XD-1781,
"job create bogus definition jdbchdfs sql select from bogus restartable false job deploy bogus job launch bogus http localhost 9393 admin ui jobs executions click Restart Job Execution on the failed job execution get message Job was relaunched container log has 12 36 27,231 ERROR task scheduler 10 handler.LoggingHandler 145 org.springframework.messaging.MessageHandlingException org.springframework.batch.core.repository.JobRestartException JobInstance already exists and is not restartable",XD-1778,
"As part of XD 1338 we modified how module deployment works. Now module deployment requests include deployment properties as the data for the ZooKeeper node. This allows us to reuse those properties when a container exit the cluster and the module is redeployed to another container. However if there are no other containers to handle the deployment, the module deployment node is erased, along with the properties. This mean no module will ever handle the partition that module was responsible for. This condition needs to be handled so that partitioned streams continue to function in cases where the cluster temporarily doesn t have enough containers to support the stream.",XD-1777,
Automatically close notification messages Polish UI,XD-1774,
The changes to twitterSearch means that it will send multiple messages during the duration of the test. To support these changes 1 Remove assertReceived. Since the number of messages is indeterminate 2 Change file sink that captures the results to append mode. Because each message will overwrite the previous messages result.,XD-1771,
"At the job definitions page, user should be able to provide the job deployment manifest module count, criteria etc., ",XD-1769,
"When clicking deploy from the job definitions page, user should be able to specify the deployment manifest module count, module criteria etc., ",XD-1768,
"At the JobExecution page, if the job execution is failed and restartable, then we should enable the restart action only if the job is deployed. Please see https github.com spring projects spring xd pull 884 for the discussion related to this.",XD-1767,
"build 22 May 2014 08 45 04 Creating stream tcptofile with definition tcp port 3D21234 socketTimeout 3D2000 7C file dir 3D 2Ftmp 2Fxdtest 2Fbasic ... build 22 May 2014 08 45 04 name tcptofile , deployed null, definition tcp port 21234 socketTimeout 2000 file dir tmp xdtest basic , links rel self , href http 127.0.0.1 9393 streams tcptofile build 22 May 2014 08 45 04 build 22 May 2014 08 45 11 Destroying stream tcptofile ... build 22 May 2014 08 45 11 build 22 May 2014 08 45 11 build 22 May 2014 08 45 11 Expected blahblah does not match actual value 98,108,97,104,98,108,97,104 simple 22 May 2014 08 45 11 Failing task since return code of bin sh tmp XD SCRIPTS RS 513 ScriptBuildTask 7280766559152712153.sh was 1 while expected 0 simple 22 May 2014 08 45 11 Finished task Run basic stream tests See https build.spring.io download XD SCRIPTS RS build logs XD SCRIPTS RS 513.log",XD-1766,
After spring hadoop 2.0 RC4 update.,XD-1765,
Update spring data hadoop version to 2.0.0.RC4 and make necessary changes to the YARN configuration.,XD-1756,
We have some places where we us a default data format specified as yyyy MM dd . In Spring for Apache Hadoop we use yyyy MM dd for partitioning path expressions. This seems more in line with ISO standard date format. For consistency we should have both SHDP and XD use the same default format.,XD-1753,
"Using a singleXD VM I can create multiple streams with the same http port. Stream Name Stream Definition Status xd stream create definition http port 8081 file dir tmp test3 name test1 deploy Created and deployed new stream test1 xd stream create definition http port 8081 file dir tmp test3 name test1 deploy Created and deployed new stream test1 xd stream create definition http port 8081 file dir tmp test3 name test2 deploy Created and deployed new stream test2 xd stream create definition http port 8081 file dir tmp test3 name test3 deploy Created and deployed new stream test3 xd stream list Stream Name Stream Definition Status test1 http port 8081 file dir tmp test3 deployed test2 http port 8081 file dir tmp test3 deployed test3 http port 8081 file dir tmp test3 deployed ISSUES 1 No error is returned for the duplicate use of the port. In M5 an error was returned. 2 The status shows as deployed for all three. 3 Even though there are three streams. Only the first stream is active. I can post to the first stream that was declared and it will successfully post to the directory. If I post to the remaining streams, I'don t get an error and I no data is written to the flle. 4 If I remove the working stream, the remaining stream still don t work. ",XD-1752,
"filejdbc, hdfsjdbc, jdbchdfs jdbc modules each support a tomcat connection pool. At this time none of the configurations allowed by the tomcat connection pool are available unless the user adds them to the appropriate module xml file. We need to allow the user to configure them via yml, property file and environment variables. ",XD-1751,
We have 13 skipped tests now...,XD-1749,
Add messages store optimization to the hdfs dataset ,XD-1748,
"We are getting test failures such as https build.spring.io browse XD MASTER 1381 quite often in the CI environment recently. I suspect the ordering of checks in AbstractSingleNodeStreamDeploymentIntegrationTests Deploys in reverse order assertModuleRequest streamName, log , false ; assertModuleRequest streamName, filter , false ; assertModuleRequest streamName, transform , false ; assertModuleRequest streamName, http , false ; Undeploys in stream order assertModuleRequest streamName, http , true ; assertModuleRequest streamName, transform , true ; assertModuleRequest streamName, filter , true ; assertModuleRequest streamName, log , true ; isn t happening perhaps changing nextUndeployEvent poll time from 5 seconds to higher is appropriate no idea why CI environment seems so slow ",XD-1747,
It would be useful to store admin server ip address in ZooKeeper leadership group node xd admins to identify admin server and it s admin port. ,XD-1740,
We don t support using Configuration for modules ATM. The current code was committed during the same time as improvements to handling module configuration. We should switch the reactor ip.xml to include all bean definitions and remove referencing Configuration classes or see how to add support for Configuration. Another short term hack is to put the prefix sink.reactor ip in all Value used in NetServerInboundChannelAdapterConfiguration.,XD-1733,
Hitting this issue in Chrome http stackoverflow.com questions 22891611 google font varela round doesnt support font weight in chrome Looks like Chrome has some issues with making text bold if the font does not explicitly support it. ,XD-1728,
Add an option to destroy the stream job definitions. Also add confirm action that asks for user to confirm to proceed with destroy.,XD-1727,
"As a consequence of not fixing XD 1289, we should document keys of the form xd.stream.name that are available to users xd. stream job .name and xd.container.??? come to mind, there may be others",XD-1720,
The TwitterSearch does a case insensitive search. Tests need to do a insensitive check for the keywords in the search result.,XD-1718,
"Modules can use property values in servers.yml which is very handy to keep batch and hdfs functionality working without duplication of config values in servers.yml and modules.yml or individual modules . The configuration section should highlight the common cases where this occurs, batch, hdfs, rabbitmq mqtt where using the server config values as defaults is useful and that they can still be overridden. ",XD-1716,
"Create a new section in the docs regaring shell usage, in particular how to represent single and double quotes. Include some discussion of basic commands to manipulate streams, jobs and list modules. How to pass in a file that can be executed when the shell starts up. Also point to spring shell ref docs for extensibility in terms of adding custom commands.",XD-1715,
Update StreamUtils based on Code Review comments.,XD-1712,
Also check the JMX output to see that the filter rejected the entry.,XD-1710,
"Each Hadoop distro uses different settings for yarn.application.classpath and we should provide some starting points for the distros we support running XD on YARN for. We should add a commented out stub defaultYarnClasspath entry for phd20, cdh5 and hdp21 to replace the one for hadoop22 when someone deploys on these distros. ",XD-1705,
"Document the different onion layers that come in play with regard to quoting and escaping shell, xd parser, SpEL expressions in some cases and provide practical examples to common scenarios ",XD-1704,
We should add an easy way to configure the memory. Currently we only have the number of YARN containers configurable without diving into Spring YARN Boot specific config options. code xd adminServers 1 containers 1 code Proposing we do code xd adminServers 1 adminMemory 512M containers 1 containerMemory 512M code ,XD-1703,
"Not sure why the Hadoop classes are on the admin servers classpath. There is no way to select the distro, and the Hadoop classes shouldn t be needed except for module info for hdfs sink see XD 1701 ",XD-1702,
Support the ability to provide deployment properties for job deploy .,XD-1696,
"As a user, I'd like to have the option to provide security configurations so that I can access REST endpoints in a secured manner. Ideally, all the listed REST https github.com spring projects spring xd wiki REST API xd resources endpoints needs to be wrapped within a security layer. Scope of this spike Research Spring Security and Spring Boot and the OOTB features Design considerations and approach for XD Developer experience How users will be configuring security credentials? How DSL shell will be handled? How Admin UI will be handled?",XD-1695,
StepExecutionContext StepExecutionProgress JobScheduler Stream page Job definition XD1615 ,XD-1687,
"Currently, the admin nodes that participate in the leadership election are grouped under xd admin. Since, there are multiple lock nodes that correspond to all the admin servers that participate in leadership election, we can pluralize this node name to xd admins.",XD-1686,
"I am new to Spring XD, I want to read the jboss queue message and then want to write it into text file by using stream create comment i.e stream create name TEST LOG definition jms file deploy . I am trying to configure the spring xd 1.0.0.M6 xd modules common jms jbossmq infrastructure context.xml to invoke the jboss queue and read the queue message. Can you help me to do the configuration and resolve my objective?",XD-1684,
The xd dirt log4j.properties includes the calling line number L which is not recommended for production. https logging.apache.org log4j 1.2 apidocs org apache log4j PatternLayout.html WARNING Generating caller location information is extremely slow and should be avoided unless execution speed is not an issue. ,XD-1679,
"XD Deployment Description XD Cluster 1 Container Environment EC2 Type Of Test Shell Command Line Test Failed On hdfs only test that was run Build Used Built May 7, 10 29 PST Overall issue XD Admin and container lost connectivity to the the jobstore MySql on RDS and did not reconnect. Exception Displayed in log. Caused by com.mysql.jdbc.exceptions.jdbc4.CommunicationsException The last packet successfully received from the server was 54,321,927 milliseconds ago. The last packet sent successfully to the server was 54,321,928 milliseconds ago. is longer than the server configured value of wait timeout . You should consider either expiring and or testing connection validity before use in your application, increasing the server configured values for client timeouts, or using the Connector J connection property autoReconnect true to avoid this problem. at sun.reflect.NativeConstructorAccessorImpl.newInstance0 Native Method at sun.reflect.NativeConstructorAccessorImpl.newInstance NativeConstructorAccessorImpl.java 57 at sun.reflect.DelegatingConstructorAccessorImpl.newInstance DelegatingConstructorAccessorImpl.java 45 at java.lang.reflect.Constructor.newInstance Constructor.java 526 at com.mysql.jdbc.Util.handleNewInstance Util.java 411 at com.mysql.jdbc.SQLError.createCommunicationsException SQLError.java 1117 at com.mysql.jdbc.MysqlIO.send MysqlIO.java 3871 at com.mysql.jdbc.MysqlIO.sendCommand MysqlIO.java 2484 at com.mysql.jdbc.MysqlIO.sqlQueryDirect MysqlIO.java 2664 at com.mysql.jdbc.ConnectionImpl.execSQL ConnectionImpl.java 2788 at com.mysql.jdbc.ConnectionImpl.execSQL ConnectionImpl.java 2738 at com.mysql.jdbc.StatementImpl.executeQuery StatementImpl.java 1617 at org.springframework.jdbc.core.JdbcTemplate 1QueryStatementCallback.doInStatement JdbcTemplate.java 452 at org.springframework.jdbc.core.JdbcTemplate.execute JdbcTemplate.java 402 ... 57 more Side Effects Unable to create new Job with same name User executed a job list and then removed the jobs in the list. When the user tried to create new jobs using the same names the application reported Command failed org.springframework.xd.rest.client.impl.SpringXDException StatementCallback; SQL SELECT JOB NAME FROM JOB REGISTRY NAMES ; No operations allowed after connection closed.; nested exception is com.mysql.jdbc.exceptions.jdbc4.MySQLNonTransientConnectionException No operations allowed after connection closed. The only way to resolve it completely was to 1 shutdown the admin and the containers. 2 Clear the jobs from the Batch job tables by hand 3 restart XD admin and containers. ",XD-1678,
Allows looking at message headers without turning on debugging.,XD-1677,
XD 1623 introduced the dependency to a SNAPSHOT version,XD-1669,
"When adding streams page to the UI from XD 1667 , it is necessary to modularize the angular app modules based on the functionality components job, stream, auth etc., . As we expand into more components and use cases in the UI, this definitely makes it easier to concentrate on specific modules based on the functionality.",XD-1668,
The streams page needs to be added to the UI at least to show the job triggers that are created while scheduling XD jobs.,XD-1667,
Need to update the Jackson parser.,XD-1662,
Sonar build is currently failing.,XD-1661,
This will reduce one extra step for getting started using XD in distributed mode out of the box ,XD-1660,
XD 1019 added simple stateless retry to the message bus. Use stateful retry and an AmqpRejectAndDontRequeueRecoverer enabling failed messages to be requeued on the broker until successful perhaps because another instance can handle the message ; also provides a mechanism to route failed messages to a dead letter exchange. Requires setting the message id header in bus generated messages. Also add profiles and properties for common retry backoff policies.,XD-1653,
HDFS sink needs to have unique identifier for container id added as part of file name. Part of the file name in the directory will be the container id GUID like base path logfile GUID 1.txt ,XD-1651,
Add configuration for the partition strategy to HDFS sink to support writing files into subdirectories based on a partition key provided in the header or field in the message of the stream data. The writing using HDFS Store DataWriter should pass in the partition key value to be used for the write operation. Partition configuration could be made available to the sink using a format parameter that could then be used in XML config like code expression new java.text.SimpleDateFormat format .format timestamp code Similar to the time source.,XD-1650,
This change has to be facilitated because of the XD 1456 and XD 1455 stories.,XD-1646,
"Add JavaDocs to StreamUtils HttpTest MqttTest JmsSource Exception Handling StreamUtils stream method should throw IllegalStateException instead of a checked exception. XDEc2Validation assertReceived, assertValid should throw IllegalStateException instead of a checked exception ",XD-1645,
"During admin server startup, if it fails due to embedded tomcat failure, then the admin server instance still up and running. Since its tomcat isn t running it can not handle any REST client requests. In this scenario, we need fail fast the admin server process itself with better error message.",XD-1642,
Options that are not covered codec idleTimeout inUsePrefix inUseSuffix inputType overwrite Options Renamed filename is now fileName,XD-1631,
Between M5 and M6 the size of the shell lib directory went up 50 MB. Investigate and remove jars from being packaged that are not used.,XD-1630,
To configure Rabbit HA a naming convention should be used to identify the queue that need to be mirrored. ,XD-1629,
This may require additional support Jiras for Spring Batch,XD-1622,
Some of the tests in JobCommandTests use the verification of shell command results table row on a specific row mostly first row like this String id jobExecutions.getRows .get 0 .getValue 1 ; displayJobExecution id ; It is possible that the list of table rows may have the intended row in different order. This poses inconsistent test failures. ,XD-1620,
Secure Admin UI to challenge users to enter username and password to gain access.,XD-1616,
This is currently in the M6 pom organization name SpringSource name url http springsource.org url organization ,XD-1599,
"The messagebus implementations, upon registration of consumer and producer from to messagebus the corresponding endpoints start. Instead of directly calling the start on adapter consumer we can call the corresponding Binding s start which calls the underlying endpoint to start. This is in line with the way the corresponding endpoints are stopped using Binding s stop during undeploy destroy.",XD-1598,
"If the rabbit source receives a message it can t convert, a MessageConversionException is thrown and the message is rejected and requeued , causing an endless loop. Add an ErrorHandler to the inbound adapter to detect and convert MCE to AmqpRejectAndDontRequeueException . Also consider adding a retry interceptor to do the same for exceptions in modules when using local transport .",XD-1597,
"acknowlege more, tx size, prefetch count, concurrency etc.",XD-1596,
"The analytics project has been used as a host for common repository classes because it was easily visible by both dirt and other stuff can t remember which This should be cleaned and a dedicated project for core , utility , re usable , whatever classes should be created ",XD-1594,
Modify the PluginContextExtensionsInitializer to consume .groovy bean definitions as well as XML. ,XD-1589,
There are some properties files in the config directory that no longer are needed. We should clean that up and also remove update any documentation references to these files,XD-1576,
"Currently the reactor syslog source module only supports TCP. Once we add UDP support, we can probably remove the existing syslog tcp and syslog udp modules.",XD-1575,
In this case we will use environment variables to set the JDBC sink settings. Thus we will just remove code.,XD-1574,
"The first 2 images in the documentation section linked below should no longer show redis, rabbit, or local for the communication between Admins and Containers. Rather we need to show ZooKeeper. https github.com spring projects spring xd wiki Architecture",XD-1573,
"After creating a composed module, I am unable to delete it. Steps to reproduce xd module compose doo definition filter expression payload.contains doo file Successfully created module doo with type sink xd module module compose module delete module display module info module list xd module delete name doo type sink java.lang.StringIndexOutOfBoundsException Failed to convert doo to type QualifiedModuleName for option name, String index out of range 1 xd ",XD-1572,
"When a module is deployed, it doesn t use Jolokia auto configuration which requires an embedded servlet container configuration . But, the module context isn t using a servlet context. From SimpleModule application new SpringApplicationBuilder .sources PropertyPlaceholderAutoConfiguration.class .web false ; and hence, the MBeans that are exposed by the deployed modules aren t accessible via Jolokia. We definitely don t want SimpleModule to use web application context but we need to figure out if we can use the container s management port to expose the deployed modules MBeans via jolokia. ",XD-1570,
the transport option allows udp as well as tcp ,XD-1569,
"e.g. Need to update this section maybe others https github.com spring projects spring xd wiki Running Distributed Mode Remove all mentions of Control Bus, and replace any mentions of the transport cmd line arg with the xd.transport property in yml. ",XD-1568,
XD EC2 must use environment variable XD TRANSPORT instead of transport to declare data transport for XD.,XD-1567,
When trying to create the stream for the gemfire example stream create hashtags definition tap stream tweets transform script tweetSummary.groovy gemfire server keyExpression payload id deploy The shell displays Command failed org.springframework.xd.rest.client.impl.SpringXDException Error with option s for module transform of type processor valid the script and expression options are mutually exclusive I get the following error ,XD-1561,
Currently uses m5 dependency. ,XD-1559,
from the wordcount sample code xd ! cp tmp nietzsche chapter 1.txt tmp xd input wordCountFiles You cannot specify option more than once in a single command code ,XD-1558,
Creating the following stream throws exception stream create s1 definition http transform script transform.groovy log Command failed org.springframework.xd.rest.client.impl.SpringXDException Error with option s for module transform of type processor valid the script and expression options are mutually exclusive The ExpressionOrScriptMixin s assertions to check if script and expression options are mutually exclusive always fails.,XD-1555,
need the ability to support the group option.,XD-1545,
Need to update instructions to discuss the setup of the relational database requirement for the xd admin.,XD-1543,
"the trace below occurs in the admin console but the Admin continues to handle subsequent deployment requests fine it seems To reproduce start xd admin and xd container just 1 of each deploy time log kill both xd admin and xd container start xd container by itself wait 10 seconds or so, then start xd admin result code 21 35 01,575 ERROR ContainersPathChildrenCache 0 cache.PathChildrenCache 550 org.apache.zookeeper.KeeperException NodeExistsException KeeperErrorCode NodeExists for xd deployments modules f89e5fdc 7dc1 49fb 93cc d536ab853f12 s.source.time 0 at org.apache.zookeeper.KeeperException.create KeeperException.java 119 at org.apache.zookeeper.KeeperException.create KeeperException.java 51 at org.apache.zookeeper.ZooKeeper.create ZooKeeper.java 783 at org.apache.curator.framework.imps.CreateBuilderImpl 11.call CreateBuilderImpl.java 676 at org.apache.curator.framework.imps.CreateBuilderImpl 11.call CreateBuilderImpl.java 660 at org.apache.curator.RetryLoop.callWithRetry RetryLoop.java 107 at org.apache.curator.framework.imps.CreateBuilderImpl.pathInForeground CreateBuilderImpl.java 656 at org.apache.curator.framework.imps.CreateBuilderImpl.protectedPathInForeground CreateBuilderImpl.java 441 at org.apache.curator.framework.imps.CreateBuilderImpl.forPath CreateBuilderImpl.java 431 at org.apache.curator.framework.imps.CreateBuilderImpl.forPath CreateBuilderImpl.java 411 at org.apache.curator.framework.imps.CreateBuilderImpl 4.forPath CreateBuilderImpl.java 319 at org.apache.curator.framework.imps.CreateBuilderImpl 4.forPath CreateBuilderImpl.java 255 at org.springframework.xd.dirt.server.ContainerListener.onChildAdded ContainerListener.java 272 at org.springframework.xd.dirt.server.ContainerListener.childEvent ContainerListener.java 152 at org.apache.curator.framework.recipes.cache.PathChildrenCache 5.apply PathChildrenCache.java 494 at org.apache.curator.framework.recipes.cache.PathChildrenCache 5.apply PathChildrenCache.java 488 at org.apache.curator.framework.listen.ListenerContainer 1.run ListenerContainer.java 92 at com.google.common.util.concurrent.MoreExecutors SameThreadExecutorService.execute MoreExecutors.java 293 at org.apache.curator.framework.listen.ListenerContainer.forEach ListenerContainer.java 83 at org.apache.curator.framework.recipes.cache.PathChildrenCache.callListeners PathChildrenCache.java 485 at org.apache.curator.framework.recipes.cache.EventOperation.invoke EventOperation.java 35 at org.apache.curator.framework.recipes.cache.PathChildrenCache 11.run PathChildrenCache.java 755 at java.util.concurrent.Executors RunnableAdapter.call Executors.java 471 at java.util.concurrent.FutureTask.run FutureTask.java 262 at java.util.concurrent.Executors RunnableAdapter.call Executors.java 471 at java.util.concurrent.FutureTask.run FutureTask.java 262 at java.util.concurrent.ThreadPoolExecutor.runWorker ThreadPoolExecutor.java 1145 at java.util.concurrent.ThreadPoolExecutor Worker.run ThreadPoolExecutor.java 615 at java.lang.Thread.run Thread.java 744 code ",XD-1540,
"After deploying stream such as time log , the xd container emits the following stacktrace s if the stream is in a deployed state when that xd container process is halted via CTRL C code 20 15 31,415 INFO main EventThread module.ModuleDeployer 215 removed SimpleModule name log, type sink, group s, index 1 128936ff 20 15 31,417 ERROR main EventThread imps.CuratorFrameworkImpl 512 Watcher exception java.lang.IllegalStateException org.springframework.context.annotation.AnnotationConfigApplicationContext 7bf4bc83 has been closed already at org.springframework.context.support.AbstractApplicationContext.assertBeanFactoryActive AbstractApplicationContext.java 956 at org.springframework.context.support.AbstractApplicationContext.getBean AbstractApplicationContext.java 978 at org.springframework.xd.module.core.SimpleModule.getComponent SimpleModule.java 214 at org.springframework.xd.dirt.plugins.AbstractMessageBusBinderPlugin.unbindConsumerAndProducers AbstractMessageBusBinderPlugin.java 140 at org.springframework.xd.dirt.plugins.stream.StreamPlugin.beforeShutdown StreamPlugin.java 74 at org.springframework.xd.dirt.module.ModuleDeployer.beforeShutdown ModuleDeployer.java 267 at org.springframework.xd.dirt.module.ModuleDeployer.destroyModule ModuleDeployer.java 217 at org.springframework.xd.dirt.module.ModuleDeployer.handleUndeploy ModuleDeployer.java 197 at org.springframework.xd.dirt.module.ModuleDeployer.undeploy ModuleDeployer.java 169 at org.springframework.xd.dirt.server.ContainerRegistrar.undeployModule ContainerRegistrar.java 252 at org.springframework.xd.dirt.server.ContainerRegistrar StreamModuleWatcher.process ContainerRegistrar.java 580 at org.apache.curator.framework.imps.NamespaceWatcher.process NamespaceWatcher.java 56 at org.apache.zookeeper.ClientCnxn EventThread.processEvent ClientCnxn.java 522 at org.apache.zookeeper.ClientCnxn EventThread.run ClientCnxn.java 498 20 15 31,420 INFO main EventThread server.ContainerRegistrar 250 Undeploying module time 0 time type source, deploymentProperties count 1 20 15 31,420 INFO main EventThread module.ModuleDeployer 215 removed SimpleModule name time, type source, group s, index 0 51a42578 20 15 31,420 ERROR main EventThread imps.CuratorFrameworkImpl 512 Watcher exception java.lang.IllegalStateException org.springframework.context.annotation.AnnotationConfigApplicationContext 6d223732 has been closed already at org.springframework.context.support.AbstractApplicationContext.assertBeanFactoryActive AbstractApplicationContext.java 956 at org.springframework.context.support.AbstractApplicationContext.getBean AbstractApplicationContext.java 978 at org.springframework.xd.module.core.SimpleModule.getComponent SimpleModule.java 214 at org.springframework.xd.dirt.plugins.AbstractMessageBusBinderPlugin.unbindConsumerAndProducers AbstractMessageBusBinderPlugin.java 144 at org.springframework.xd.dirt.plugins.stream.StreamPlugin.beforeShutdown StreamPlugin.java 74 at org.springframework.xd.dirt.module.ModuleDeployer.beforeShutdown ModuleDeployer.java 267 at org.springframework.xd.dirt.module.ModuleDeployer.destroyModule ModuleDeployer.java 217 at org.springframework.xd.dirt.module.ModuleDeployer.handleUndeploy ModuleDeployer.java 197 at org.springframework.xd.dirt.module.ModuleDeployer.undeploy ModuleDeployer.java 169 at org.springframework.xd.dirt.server.ContainerRegistrar.undeployModule ContainerRegistrar.java 252 at org.springframework.xd.dirt.server.ContainerRegistrar StreamModuleWatcher.process ContainerRegistrar.java 580 at org.apache.curator.framework.imps.NamespaceWatcher.process NamespaceWatcher.java 56 at org.apache.zookeeper.ClientCnxn EventThread.processEvent ClientCnxn.java 522 at org.apache.zookeeper.ClientCnxn EventThread.run ClientCnxn.java 498 code ",XD-1539,
Make changes to XD on YARN config that correspond to XD 1499 changes,XD-1531,
"When using hdp13, the XdConfigLoggingInitializer throws this info 12 02 06,064 INFO main util.XdConfigLoggingInitializer 77 Hadoop Distro hdp13 12 02 06,068 WARN main util.XdConfigLoggingInitializer 84 Hadoop version detected from classpath 1.2.0 but you provided hadoopDistro hdp13 . Did you mean hadoopDistro hdp20 ? 12 02 06,069 WARN main util.XdConfigLoggingInitializer 84 Hadoop version detected from classpath 1.2.0 but you provided hadoopDistro hdp13 . Did you mean hadoopDistro hadoop12 ? Since hdp13 uses hadoop 1.2.0, we need to fix that in the versions map ContainerOptions.getHadoopDistroVersions ",XD-1529,
"Currently, single node application assumes to use hsqldb server by default and starts the hsqldb as it starts. We need a way to provide external datasource and not to start hsqldb by default when the single node starts up.",XD-1528,
"Should mention jolokia, how to turn on off boot jolokia http metric monitoring and jmx. Mention the naming strategy to identify modules running in a stream.",XD-1524,
"The setting of the xd.stream.name property is currently duplicated in StreamPlugin and JobPlugin, etc Moreover, there is no strong String constant to reference it Create a plugin dedicated to those matters namely making bits of DeploymentMetadata available to the module environment ",XD-1521,
See XD 1283. We ve been waiting for 1283 to change constructs like noformat attr name xd.stream.name to just noformat attr name noformat Turns out we can simply push down the xd.stream.name bit in the default value most likely initialization of a field in a POJO metadata class and it will work just fine. We can also consider providing a fake value for those placeholders to use when doing module info ie user will see name of the stream instead of xd.stream.name ,XD-1520,
"oracle, gemfire xd derby should be the dialect , and sybase",XD-1519,
Currently deployments with an understore in XDController should be something else. Need to segment up the url space better for stream jobs to avoid a clash.,XD-1517,
This will allow us to use multiple instances of hdfs file sinks and not have any filename path collisions.,XD-1515,
"With the introduction of the deployment manifest setting this to false makes it easier to use the deployment manifest, which is the main use case scenario. ",XD-1513,
https jira.spring.io browse XD 1343 and related issues.,XD-1512,
"INFO main zookeeper.ZooKeeper 100 Client environment java.class.path produces a huge amount of output and is rather distracting, if that specific entry could be at a log level of debug it would make the startup of the server look cleaner.",XD-1510,
See the various module.xyz directories here https repo.spring.io libs snapshot org springframework xd ,XD-1509,
See ContainerListener.loadStream and StreamListener.onChildAdded . Both require the stream definition as well as stream deployment manifest.,XD-1504,
Describe the algorithm as defined in https docs.google.com a gopivotal.com document d 12Cboa7nyVVKVxDIsHLJ 68m5f78ayXn14EJLrclJYVg edit?usp sharing ,XD-1498,
Update code to use the management jolokia endpoint.,XD-1497,
A container instance may be designated as belonging to a group. The end user may define this attribute using yaml config as xd.container.groups comma delimited string or an environment variable or groups command line argument. ,XD-1492,
Allow users to configure arbitrary key value pairs for a container instance that may be referenced in deployment descriptors to target specific container instances. ,XD-1491,
the algorithm and approach in https docs.google.com a gopivotal.com document d 12Cboa7nyVVKVxDIsHLJ 68m5f78ayXn14EJLrclJYVg edit needs to be added to the section on application configuration,XD-1489,
For PR https github.com spring projects spring xd pull 682 see if one can have a test case such that a test module would have a PATH property that overlaps with the environment variable. It should never resolve to the real unix windows path.,XD-1488,
"Currently it watches xd deployments containerid , but due to the reuse of that top level node for XD 1483 and XD 1484, we should instead use xd deployments modules containerid ",XD-1485,
"The REST API for deploy should accept parameters, which provide manifest key value pairs e.g. ?http.instances 5 . Ultimately we will want to support passing a named manifest which had been stored previously. The stream deploy shell command should support passing these as options. Initially we should support modulename .instances and modulename .group.",XD-1482,
AGPL license issues,XD-1481,
"Also likely rename, remove, or replace that Module maybe can be supplanted by ModuleDescriptor when used in the refactored parser . Also, considering the url property is not necessary vestige of the prototype , all we d be left with here is the Module name and type, which are used to identify a Module uniquely. Therefore this Module could be renamed to ModuleKey or something. It could be used within the StreamDefinition itself e.g. getDescriptor moduleKey .",XD-1480,
Currently the index is used globally but applied to a range of candidates that can differ based on the match criteria per invocation.,XD-1479,
"The two classes in question are org.springframework.xd.dirt.cluster.Container org.springframework.xd.dirt.container.ContainerMetadata The former is currently used by the Admin when making decisions about Module deployment. That latter was a replacement for RuntimeContainerInforEntity as we migrated the various Redis InMemory Repositories to use the data that is now available in ZooKeeper instead. The ContainerRepository is currently used by the Admin leader, and the ContainerMetadataRepository is used by the REST endpoint that supports the xd shell s runtime containers command. Perhaps those can also be merged. In any case, if not addressed by a larger refactoring, the ContainerRepository should probably support an Iterable return rather than an Iterator. Having finders e.g. for attribute key values such as group foo might be convenient for various Module deployment strategies.",XD-1477,
"Currently we have many catch Exception blocks that simply wrap and rethrow RuntimeExceptions. We should create at least a top level RuntimeException of our own, within the XD Exception hierarchy, and possibly a hierarchy of RuntimeExceptions extending from that, and mapping to the various checked Exceptions that can occur in ZooKeeper data access. Also, we should not be re wrapping those Exceptions that are already RuntimeExceptions, so we should consider a ZooKeeperExceptionHandler and although I m typically hesitant to recommend it, this might be a case where a static util method is the right approach . ",XD-1475,
"code StreamDefinition sd streamParser.parse name, dslText ; code We should also consider explicit methods such as parseStream so that parseJob and parseComposedModule are at least separate methods, if not separate parser classes that share the common parser support class that is the core of today s parser . The parsing for completion providers should probably be spun off to its own class as well. In the end, there should be no need for a ParsingContext enum but rather, more explicitly named methods and dedicated classes if that seems like the right approach. the StreamDefinition should be composed of ModuleDescriptors that name is not set in stone and other Stream level metadata like source sink channels consider merging some of StreamFactory code there, and the rest into StreamDeployer merge ModuleDescriptor and ModuleDeploymentRequest as part of this effort again, a new name could be considered, but ModuleDescriptor should take precedence over ModuleDeploymentRequest , and note in the process that ModuleDescriptor was originally designed to be immutable taking constructor args , but as we migrated the prototype code into XD itself, this was violated. We may want to consider a builder approach, and we likely want to avoid the need for a ModuleDefinition within the ModuleDescriptor.",XD-1474,
"all state about the running system containers, streams, and jobs should be available via ZK, and ultimately the store option should not be needed 1. Refactor ModuleDefinitionRepository to use ZooKeeper remove RedisModuleDefinitionRepository remove InMemoryModuleDefinitionRepository 2. Refactor ModuleDependencyRepository to use ZooKeeper remove RedisModuleDependencyRepository remove InMemoryModuleDependencyRepository 3. Refactor RuntimeModuleInfoRepository to use ZooKeeper rename ModuleMetadata... remove RedisRuntimeModuleInfoRepository remove AbstractRedisRuntimeModuleInfoRepository remove InMemoryRuntimeModuleInfoRepository 4. Refactor RuntimeContainerModuleInfoRepository to use ZooKeeper rename ContainerMetadata... remove RedisRuntimeContainerModuleInfoRepository remove InMemoryRuntimeContainerModuleInfoRepository 5. Remove support for store remove the memory store.xml and the redis store.xml instead include just one repositories.xml in shared server config remove the associated property key and the Options properties 6. Remove the events and listeners that were being used",XD-1471,
"To avoid CL conflicts, a short term solution to this problem is to make sure that there is only one copy of jackson related classes and have them live in xd lib. using jackson core 2.3.2.jar jackson databind 2.3.2.jar jackson core asl 1.9.13.jar jackson mapper asl 1.9.13.jar are the latest versions and the ones to use. There maybe other libraries that we duplicate in the same manner, we will need to investigate as well as part of another issue. Typical error is java.lang.LinkageError loader constraint violation when resolving method org.springframework.http.converter.json.MappingJackson2HttpMessageConverter.setObjectMapper Lcom fasterxml jackson databind ObjectMapper; V the class loader instance of org springframework xd module support ParentLastURLClassLoader of the current class, org springframework social twitter api impl TwitterTemplate, and the class loader instance of sun misc Launcher AppClassLoader for resolved class, org springframework http converter json MappingJackson2HttpMessageConverter, have different Class objects for the type com fasterxml jackson databind ObjectMapper used in the signature ",XD-1470,
noformat correlation strategy expression correlation xd.stream.name noformat should be noformat correlation strategy expression correlation xd.stream.name noformat Add a test to make sure correlation expressions here work.,XD-1469,
change jolokia list ; to management jolokia list ; etc.,XD-1466,
"Currently on snapshots, which is oddly pulling in groovy 2.1.0",XD-1464,
"This would get rid of the CF specific post module, keeping the general abstraction of http source across CF and non CF environments.",XD-1463,
AggregateCounter needs a test case along the lines of of org.springframework.xd.analytics.metrics.integration.FieldValueCounterHandlerTests that will demonstrate the base functionality of the module as well as use of the timeField and dateFormat options.,XD-1462,
"The tests that use HDFS currently require an external Hadoop installation and is hard to set up update version in all the environments where we want to run tests, e.g. bamboo, travis. See if the mini cluster described in http docs.spring.io spring hadoop docs 2.0.0.RC1 reference html testing.html testing yarn minicluster can be used in the test cases instead.",XD-1461,
"After some discussion and voting, we decided to remove jmxEnabled as a command line option and have JMX enabled by default. This can be disabled from xd config.yml externally.",XD-1460,
"Typical case is with a module that contains noformat ... user username ... noformat say, as part of a jdbc connection configuration and no value has been given at deployment time. The module may pickup a value from the environment by mistake typically from an environment variable of the same name . This was even more problematic when ordering of property sources was unclear, but should be prevented entirely anyway.",XD-1459,
"Originally it was placed in the code to prevent overtasking our servers with downloads when people want to install XD. And to allow for faster downloads. However XD Jars are already placed on S3, so this feature is no longer needed.",XD-1457,
"With the addition of sinks and sources that require connections with external entities hadoop, JMS, JDBC, ... the environment setup is getting unwieldy. Integrate SpringJUnit4ClassRunner.class into acceptance tests. Retrieve environment variables via Dependency injection from application.properties. Utilize profiles for local single node local cluster ec2 single node ec2 cluster",XD-1456,
Replace tests and throws in the XdEc2Validation with asserts in the following methods verifyTestContent verifyLogContent verifySendCounts VerifySendCounts should check for the exact number of Jmx events instead of 0.,XD-1455,
"With the addition of zookeeper, a user does not have to specify rabbit or redis for the control channel. This story should allow a user to specify redis, rabbit or no control channel.",XD-1454,
Attempts to create use undeploy a stream involving the http module will result in an OOME stating that VM could not create native thread. Other modules should be checked as well. noformat at java.lang.Thread.run Thread.java 724 Caused by org.springframework.context.ApplicationContextException Failed to start bean org.springframework.integration.x.http.NettyHttpInboundChannelAdapter 0 ; nested exception is java.lang.OutOfMemoryError unable to create new native thread at org.springframework.context.support.DefaultLifecycleProcessor.doStart DefaultLifecycleProcessor.java 176 at org.springframework.context.support.DefaultLifecycleProcessor.access 200 DefaultLifecycleProcessor.java 51 at org.springframework.context.support.DefaultLifecycleProcessor LifecycleGroup.start DefaultLifecycleProcessor.java 346 at org.springframework.context.support.DefaultLifecycleProcessor.startBeans DefaultLifecycleProcessor.java 149 at org.springframework.context.support.DefaultLifecycleProcessor.start DefaultLifecycleProcessor.java 91 at org.springframework.context.support.AbstractApplicationContext.start AbstractApplicationContext.java 1180 at org.springframework.xd.module.core.SimpleModule.start SimpleModule.java 273 at org.springframework.xd.dirt.module.ModuleDeployer.deploy ModuleDeployer.java 251 at org.springframework.xd.dirt.module.ModuleDeployer.deployAndStore ModuleDeployer.java 239 at org.springframework.xd.dirt.module.ModuleDeployer.handleDeploy ModuleDeployer.java 179 at org.springframework.xd.dirt.module.ModuleDeployer.handleMessageInternal ModuleDeployer.java 150 at org.springframework.integration.handler.AbstractMessageHandler.handleMessage AbstractMessageHandler.java 78 ... 80 more Caused by java.lang.OutOfMemoryError unable to create new native thread at java.lang.Thread. YJP start0 Native Method at java.lang.Thread.start0 Thread.java at java.lang.Thread.start Thread.java 693 at java.util.concurrent.ThreadPoolExecutor.addWorker ThreadPoolExecutor.java 949 at java.util.concurrent.ThreadPoolExecutor.execute ThreadPoolExecutor.java 1371 at org.jboss.netty.util.internal.DeadLockProofWorker.start DeadLockProofWorker.java 38 at org.jboss.netty.channel.socket.nio.AbstractNioSelector.openSelector AbstractNioSelector.java 343 at org.jboss.netty.channel.socket.nio.AbstractNioSelector. init AbstractNioSelector.java 95 at org.jboss.netty.channel.socket.nio.AbstractNioWorker. init AbstractNioWorker.java 53 at org.jboss.netty.channel.socket.nio.NioWorker. init NioWorker.java 45 at org.jboss.netty.channel.socket.nio.NioWorkerPool.createWorker NioWorkerPool.java 45 at org.jboss.netty.channel.socket.nio.NioWorkerPool.createWorker NioWorkerPool.java 28 at org.jboss.netty.channel.socket.nio.AbstractNioWorkerPool.newWorker AbstractNioWorkerPool.java 99 at org.jboss.netty.channel.socket.nio.AbstractNioWorkerPool.init AbstractNioWorkerPool.java 69 at org.jboss.netty.channel.socket.nio.NioWorkerPool. init NioWorkerPool.java 39 at org.jboss.netty.channel.socket.nio.NioWorkerPool. init NioWorkerPool.java 33 at org.jboss.netty.channel.socket.nio.NioServerSocketChannelFactory. init NioServerSocketChannelFactory.java 149 at org.jboss.netty.channel.socket.nio.NioServerSocketChannelFactory. init NioServerSocketChannelFactory.java 131 at org.jboss.netty.channel.socket.nio.NioServerSocketChannelFactory. init NioServerSocketChannelFactory.java 115 at org.springframework.integration.x.http.NettyHttpInboundChannelAdapter.doStart NettyHttpInboundChannelAdapter.java 114 at org.springframework.integration.endpoint.AbstractEndpoint.start AbstractEndpoint.java 84 at org.springframework.context.support.DefaultLifecycleProcessor.doStart DefaultLifecycleProcessor.java 173 ... 91 more noformat ,XD-1452,
Get minimal compilation going in Travis. Redis Rabbit services can be done in a separate story.,XD-1451,
"In order to support ingestion from stdin, the suggested approach is to do the following. xd stream create definition tcp decoder LF log name foo cat my.log netcat localhost 1234 So while this is really a tcp based ingestion case, once can use pipe or redirect of stdin err in order to achieve the same goal. It should appear as a source module in the docs on par with other source modules in its own section. ",XD-1447,
Update to Spring for Apache Hadoop 2.0 RC3 Add support for new hadoop distros Pivotal HD 2.0 phd20 Hortonworks HDP 2.1 hdp21 Cloudera CDH5 cdh5 ,XD-1446,
Please see the discussion here https github.com spring projects spring xd pull 655 files r10892925,XD-1442,
The description in the google doc https docs.google.com a gopivotal.com document d 12Cboa7nyVVKVxDIsHLJ 68m5f78ayXn14EJLrclJYVg edit?usp sharing describes the usage of XD MODULE CONFIG LOCATION and XD MODULE CONFIG NAME,XD-1441,
"See report at https github.com spring projects spring xd issues 661 It would be good indeed to allow this eg by having a WeakHashMap Classloader, type name map in the global context . The caveat though, is that any statics used by the module would be shared too. We can make this an opt out though I think that sharing by default makes sense by having a flag in the module .properties manifest",XD-1440,
"See report at https github.com spring projects spring xd issues 661 This should not happen as the module holds the classes that hold the classloader, but who knows. An integration test that verifies this would be nice, albeit tricky.",XD-1439,
"0. Remove home page with sign in and upper right hand corner with user login info. 1. Change the word template to modules in the tab 2. Different text for each of the tabs, modules, definition, deployments, scheduled 3. Definitions tab to have text along the lines allows you to deploy and undeploy batch job definitions add links to help on how to do that in the CLI. 4. Deployments tab a creating new definitions, parameters needs to be space on parameters, Job Parameters for Job XYZ after clicking launch. b. comment out scheduler button c. add quick filter 5. Scheduler tab a. comment out tab ",XD-1436,
1. Add quick filter 2. The table should have columns for name instance execution id Getting the name might require a bit of extra work given some limitations with JSON serialization and cycles in the current object returned from spring batch. 3. The restart action should appear only if the job is restartable and the status was failed. ,XD-1435,
"1. Get listing of job modules 2. Remove version and action column 3. Text to say creating definitions from available modules in the UI is forthcoming, link to https github.com spring projects spring xd wiki Batch Jobs creating a job for how to do this in the command line. 4. Hardcode an association between spring xd out of the box module names and a description. 5. Add button to display the XML file that defines the job module ",XD-1434,
The standard SimpleHealthIndicator that boot performs a database test that fails in xd container since it does not require the use of a database. ,XD-1432,
"By default, XD admin server uses hsqldb as data source for batch job repository and uses the default port 9101, specific database location and dbname. This makes the existence of multiple admin server on a same host not possible. ",XD-1431,
"3.4.6 was released on 2014.03.10 http zookeeper.apache.org doc r3.4.6 releasenotes.html Especially relevant for us, they updated Netty from 3.2.2 to 3.6.6 https issues.apache.org jira browse ZOOKEEPER 1715 ",XD-1427,
The grunt build for karma unit tests is currently broken with requireJS support on the XD admin app. ,XD-1425,
"The ordering of the lookup should be described, in particular detail on how environment variables can overrride properties. Some details will necessarily change based on outcome of current discussion, but the overall ordering is going to remain.",XD-1423,
"The sample application should primarily show the round trip that is possible in that offline analysis in R can generate a pmml flle that can be imported and evaluated in an online stream definition. The specific use case can be as simple as the IRIS data set or other existing examples, such as the fraud demo. The sample application resides in https github.com spring projects spring xd samples",XD-1422,
"A analytical model should be evaluated as a processor in a stream. The model evaluation will take the input variables from a Tuple and output variable will be placed into the tuple as well. A strawman of the stream definition can be stream create definition SOURCE jpmml fraud detection PROC1 PROCN name stream1 Using profiles and playing all implementations of the analytical model in the same module lib directory, it maybe possible to select one of multiple implementations in the form SOURCE analytic library jpmml name fraud detection PROC1 PROCN such that the core module name is the same but parameterized by what library type to use. This may be problematic in that different libraries may have incompatible dependencies. The analytical model can define the names of input and output fields, so at a minimum a name is required, however to easily adapt a given analytic model evaluation to a specific source modules output, it seems desirable to specify which fields are to be used as input, overriding the names of the input fields could be done in a manner such as jpmml name linear regresssion inputFields a,b,c ",XD-1420,
"Using the jppml evaluator, provide an implementation of the core abstractions in the spring xd machine learning. The initial code for this has been developed in a separate github repo and is located here https github.com thomasdarimont spring xd tree feature advanced analytics support spring xd analytics jpmml src main java org springframework xd analytics model jpmml ",XD-1419,
"This project contains core abstractions that will allow for multiple implementations of a machine learning algorithm to be implemented via integration with various existing libraries or custom code implementations. The initial code for this has been developed in a separate github repo and is located here https github.com thomasdarimont spring xd tree feature advanced analytics support spring xd analytics src main java org springframework xd analytics model The model can assume its use in evaluation of the model inside a stream where the data structure is a Tuple. Note, it maybe useful to consider Message Tuple in case any metadata outside the core input data is required to help guide the evaluation. The build.gradle file should be updated such that there is a new build artifact spring xd machine learning analytics.jar along the lines of our other build artifacts. Open to other naming suggestions.",XD-1418,
Package SpringXD into an RPM install path opt pivotal spring xd 1.0.0.M5 with symlink opt pivotal spring xd current version init.d scripts to start stop status service springxd admin start stop status service springxd container start stop status user group springxd pivotal Host springxd rpm in Pivotal repo yum install springxd Support RHEL CentOS version 5 and 6? tested on latest updates Support for 32 and 64 bits Support Java 1.6 and 1.7 ,XD-1417,
Being able to listen to a stream at any point has a significant performance impact. The reason for the impact is the message needs to be serialized transported deserialized to other members even if there is no one listening. This serialized transported deserialized processes happens for each step in a flow source process sink. Recommend creating some kind of protocol for wiretaps that allows members to know if there is someone listening in the grid so they will emit the data. Likewise we need to deregister the listener if the wiretap is deleted.,XD-1416,
"mqtt tests under src tests scripts fail inconsistently with the following exception stacktrace SEVERE xd.mqtt.client.id.src Timed out as no activity, keepAlive 60,000 lastOutboundActivity 1,395,174,955,434 lastInboundActivity 1,395,174,895,434 13 36 55,442 ERROR http nio 9393 exec 7 inbound.MqttPahoMessageDrivenChannelAdapter 66 Exception while connecting and subscribing, retrying Client is currently disconnecting 32102 at org.eclipse.paho.client.mqttv3.internal.ExceptionHelper.createMqttException ExceptionHelper.java 27 at org.eclipse.paho.client.mqttv3.internal.ClientComms.disconnect ClientComms.java 409 at org.eclipse.paho.client.mqttv3.MqttAsyncClient.disconnect MqttAsyncClient.java 524 at org.eclipse.paho.client.mqttv3.MqttClient.disconnect MqttClient.java 250 at org.eclipse.paho.client.mqttv3.MqttClient.disconnect MqttClient.java 243 at org.springframework.integration.mqtt.inbound.MqttPahoMessageDrivenChannelAdapter.connectAndSubscribe MqttPahoMessageDrivenChannelAdapter.java 104 at org.springframework.integration.mqtt.inbound.MqttPahoMessageDrivenChannelAdapter.doStart MqttPahoMessageDrivenChannelAdapter.java 63 at org.springframework.integration.endpoint.AbstractEndpoint.start AbstractEndpoint.java 84 at org.springframework.context.support.DefaultLifecycleProcessor.doStart DefaultLifecycleProcessor.java 173 at org.springframework.context.support.DefaultLifecycleProcessor.access 200 DefaultLifecycleProcessor.java 51 at org.springframework.context.support.DefaultLifecycleProcessor LifecycleGroup.start DefaultLifecycleProcessor.java 346 at org.springframework.context.support.DefaultLifecycleProcessor.startBeans DefaultLifecycleProcessor.java 149 at org.springframework.context.support.DefaultLifecycleProcessor.start DefaultLifecycleProcessor.java 91 at org.springframework.context.support.AbstractApplicationContext.start AbstractApplicationContext.java 1180 at org.springframework.xd.module.core.SimpleModule.start SimpleModule.java 270 at org.springframework.xd.dirt.module.ModuleDeployer.deploy ModuleDeployer.java 250 at org.springframework.xd.dirt.module.ModuleDeployer.deployAndStore ModuleDeployer.java 238 at org.springframework.xd.dirt.module.ModuleDeployer.handleDeploy ModuleDeployer.java 179 at org.springframework.xd.dirt.module.ModuleDeployer.handleMessageInternal ModuleDeployer.java 150 at org.springframework.integration.handler.AbstractMessageHandler.handleMessage AbstractMessageHandler.java 78 at org.springframework.integration.config.ServiceActivatorFactoryBean 1.handleRequestMessage ServiceActivatorFactoryBean.java 83 at org.springframework.integration.handler.AbstractReplyProducingMessageHandler.handleMessageInternal AbstractReplyProducingMessageHandler.java 170 at org.springframework.integration.handler.AbstractMessageHandler.handleMessage AbstractMessageHandler.java 78 at org.springframework.integration.dispatcher.AbstractDispatcher.tryOptimizedDispatch AbstractDispatcher.java 116 at org.springframework.integration.dispatcher.UnicastingDispatcher.doDispatch UnicastingDispatcher.java 101 at org.springframework.integration.dispatcher.UnicastingDispatcher.dispatch UnicastingDispatcher.java 97 at org.springframework.integration.channel.AbstractSubscribableChannel.doSend AbstractSubscribableChannel.java 77 at org.springframework.integration.channel.AbstractMessageChannel.send AbstractMessageChannel.java 255 at org.springframework.integration.channel.AbstractMessageChannel.send AbstractMessageChannel.java 223 at org.springframework.messaging.core.GenericMessagingTemplate.doSend GenericMessagingTemplate.java 114 at org.springframework.messaging.core.GenericMessagingTemplate.doSend GenericMessagingTemplate.java 44 at org.springframework.messaging.core.AbstractMessageSendingTemplate.send AbstractMessageSendingTemplate.java 93 at org.springframework.integration.handler.AbstractReplyProducingMessageHandler.sendMessage AbstractReplyProducingMessageHandler.java 260 at org.springframework.integration.handler.AbstractReplyProducingMessageHandler.sendReplyMessage AbstractReplyProducingMessageHandler.java 241 at org.springframework.integration.handler.AbstractReplyProducingMessageHandler.produceReply AbstractReplyProducingMessageHandler.java 205 at org.springframework.integration.handler.AbstractReplyProducingMessageHandler.handleResult AbstractReplyProducingMessageHandler.java 199 at org.springframework.integration.handler.AbstractReplyProducingMessageHandler.handleMessageInternal AbstractReplyProducingMessageHandler.java 177 at org.springframework.integration.handler.AbstractMessageHandler.handleMessage AbstractMessageHandler.java 78 at org.springframework.integration.dispatcher.AbstractDispatcher.tryOptimizedDispatch AbstractDispatcher.java 116 at org.springframework.integration.dispatcher.UnicastingDispatcher.doDispatch UnicastingDispatcher.java 101 at org.springframework.integration.dispatcher.UnicastingDispatcher.dispatch UnicastingDispatcher.java 97 at org.springframework.integration.channel.AbstractSubscribableChannel.doSend AbstractSubscribableChannel.java 77 at org.springframework.integration.channel.AbstractMessageChannel.send AbstractMessageChannel.java 255 at org.springframework.integration.channel.AbstractMessageChannel.send AbstractMessageChannel.java 223 at org.springframework.xd.dirt.stream.DeploymentMessageSender.sendDeploymentRequests DeploymentMessageSender.java 57 at org.springframework.xd.dirt.stream.AbstractDeployer.sendDeploymentRequests AbstractDeployer.java 163 at org.springframework.xd.dirt.stream.AbstractDeployer.basicDeploy AbstractDeployer.java 204 at org.springframework.xd.dirt.stream.AbstractInstancePersistingDeployer.deploy AbstractInstancePersistingDeployer.java 78 at org.springframework.xd.dirt.rest.XDController.deploy XDController.java 142 at sun.reflect.NativeMethodAccessorImpl.invoke0 Native Method at sun.reflect.NativeMethodAccessorImpl.invoke NativeMethodAccessorImpl.java 57 at sun.reflect.DelegatingMethodAccessorImpl.invoke DelegatingMethodAccessorImpl.java 43 at java.lang.reflect.Method.invoke Method.java 616 at org.springframework.web.method.support.InvocableHandlerMethod.invoke InvocableHandlerMethod.java 215 at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest InvocableHandlerMethod.java 132 at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle ServletInvocableHandlerMethod.java 104 at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandleMethod RequestMappingHandlerAdapter.java 749 at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal RequestMappingHandlerAdapter.java 690 at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle AbstractHandlerMethodAdapter.java 83 at org.springframework.web.servlet.DispatcherServlet.doDispatch DispatcherServlet.java 945 at org.springframework.web.servlet.DispatcherServlet.doService DispatcherServlet.java 876 at org.springframework.web.servlet.FrameworkServlet.processRequest FrameworkServlet.java 961 at org.springframework.web.servlet.FrameworkServlet.doPut FrameworkServlet.java 874 at javax.servlet.http.HttpServlet.service HttpServlet.java 650 at org.springframework.web.servlet.FrameworkServlet.service FrameworkServlet.java 837 at javax.servlet.http.HttpServlet.service HttpServlet.java 728 at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter ApplicationFilterChain.java 305 at org.apache.catalina.core.ApplicationFilterChain.doFilter ApplicationFilterChain.java 210 at org.springframework.boot.actuate.trace.WebRequestTraceFilter.doFilter WebRequestTraceFilter.java 114 at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter ApplicationFilterChain.java 243 at org.apache.catalina.core.ApplicationFilterChain.doFilter ApplicationFilterChain.java 210 at org.springframework.boot.actuate.autoconfigure.EndpointWebMvcAutoConfiguration ApplicationContextFilterConfiguration 1.doFilterInternal EndpointWebMvcAutoConfiguration.java 128 at org.springframework.web.filter.OncePerRequestFilter.doFilter OncePerRequestFilter.java 108 at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter ApplicationFilterChain.java 243 at org.apache.catalina.core.ApplicationFilterChain.doFilter ApplicationFilterChain.java 210 at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal HiddenHttpMethodFilter.java 77 at org.springframework.web.filter.OncePerRequestFilter.doFilter OncePerRequestFilter.java 108 at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter ApplicationFilterChain.java 243 at org.apache.catalina.core.ApplicationFilterChain.doFilter ApplicationFilterChain.java 210 at org.springframework.web.filter.HttpPutFormContentFilter.doFilterInternal HttpPutFormContentFilter.java 85 at org.springframework.web.filter.OncePerRequestFilter.doFilter OncePerRequestFilter.java 108 at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter ApplicationFilterChain.java 243 at org.apache.catalina.core.ApplicationFilterChain.doFilter ApplicationFilterChain.java 210 at org.springframework.boot.actuate.autoconfigure.MetricFilterAutoConfiguration MetricsFilter.doFilterInternal MetricFilterAutoConfiguration.java 84 at org.springframework.web.filter.OncePerRequestFilter.doFilter OncePerRequestFilter.java 108 at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter ApplicationFilterChain.java 243 at org.apache.catalina.core.ApplicationFilterChain.doFilter ApplicationFilterChain.java 210 at org.apache.catalina.core.StandardWrapperValve.invoke StandardWrapperValve.java 222 at org.apache.catalina.core.StandardContextValve.invoke StandardContextValve.java 123 at org.apache.catalina.authenticator.AuthenticatorBase.invoke AuthenticatorBase.java 472 at org.apache.catalina.valves.RemoteIpValve.invoke RemoteIpValve.java 680 at org.apache.catalina.core.StandardHostValve.invoke StandardHostValve.java 171 at org.apache.catalina.valves.ErrorReportValve.invoke ErrorReportValve.java 99 at org.apache.catalina.core.StandardEngineValve.invoke StandardEngineValve.java 118 at org.apache.catalina.connector.CoyoteAdapter.service CoyoteAdapter.java 407 at org.apache.coyote.http11.AbstractHttp11Processor.process AbstractHttp11Processor.java 1004 at org.apache.coyote.AbstractProtocol AbstractConnectionHandler.process AbstractProtocol.java 589 at org.apache.tomcat.util.net.NioEndpoint SocketProcessor.run NioEndpoint.java 1680 at java.util.concurrent.ThreadPoolExecutor.runWorker ThreadPoolExecutor.java 1146 at java.util.concurrent.ThreadPoolExecutor Worker.run ThreadPoolExecutor.java 615 at java.lang.Thread.run Thread.java 679 13 36 55,465 INFO http nio 9393 exec 7 module.ModuleDeployer 240 deployed SimpleModule name mqtt, type source, group mqttSourceTest, index 0 38946002 HTTP 1.1 200 OK Server MochiWeb 1.1 WebMachine 1.10.0 never breaks eye contact Date Tue, 18 Mar 2014 20 36 55 GMT content type application json Content Length 16 Cache Control no cache routed false cat tmp xdtest basic mqttSourceTest.out No such file or directory bamboo w1 kodiak hd006 data bamboo home xml data build dir XD SCRIPTS RS spring xd src test scripts Mar 18, 2014 1 38 55 PM org.eclipse.paho.client.mqttv3.internal.ClientState checkForActivity SEVERE xd.mqtt.client.id.src Timed out as no activity, keepAlive 60,000 lastOutboundActivity 1,395,175,075,488 lastInboundActivity 1,395,175,015,488 13 38 55,490 ERROR task scheduler 2 inbound.MqttPahoMessageDrivenChannelAdapter 141 Exception while connecting and subscribing Client is disconnected 32101 at org.eclipse.paho.client.mqttv3.internal.ExceptionHelper.createMqttException ExceptionHelper.java 27 at org.eclipse.paho.client.mqttv3.internal.ClientComms.disconnect ClientComms.java 405 at org.eclipse.paho.client.mqttv3.MqttAsyncClient.disconnect MqttAsyncClient.java 524 at org.eclipse.paho.client.mqttv3.MqttClient.disconnect MqttClient.java 250 at org.eclipse.paho.client.mqttv3.MqttClient.disconnect MqttClient.java 243 at org.springframework.integration.mqtt.inbound.MqttPahoMessageDrivenChannelAdapter.connectAndSubscribe MqttPahoMessageDrivenChannelAdapter.java 104 at org.springframework.integration.mqtt.inbound.MqttPahoMessageDrivenChannelAdapter.access 300 MqttPahoMessageDrivenChannelAdapter.java 37 at org.springframework.integration.mqtt.inbound.MqttPahoMessageDrivenChannelAdapter 1.run MqttPahoMessageDrivenChannelAdapter.java 137 at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run DelegatingErrorHandlingRunnable.java 54 at java.util.concurrent.Executors RunnableAdapter.call Executors.java 471 at java.util.concurrent.FutureTask Sync.innerRunAndReset FutureTask.java 351 at java.util.concurrent.FutureTask.runAndReset FutureTask.java 178 at java.util.concurrent.ScheduledThreadPoolExecutor ScheduledFutureTask.access 201 ScheduledThreadPoolExecutor.java 165 at java.util.concurrent.ScheduledThreadPoolExecutor ScheduledFutureTask.run ScheduledThreadPoolExecutor.java 267 at java.util.concurrent.ThreadPoolExecutor.runWorker ThreadPoolExecutor.java 1146 at java.util.concurrent.ThreadPoolExecutor Worker.run ThreadPoolExecutor.java 615 at java.lang.Thread.run Thread.java 679 ",XD-1415,
"Acceptance tests has a direct library reference to spring xd shell. This causes problems with eclipse. It needs a intermediate main project to resolve the dependencies. This is based on the conversation I had with Mark Fisher. you cant depend on another projects src test what is needed is an intermediate project some test support project that project would depend on spring xd shell and others but then the spring xd integration test project would depend on the intermediate one lib dependencies should only be under src main src test is intended to be scoped to the project it sits in tests FOR that project not reusable base classes, etc",XD-1413,
"I was in the process of rewriting transform using profiles see ExpressionOrScriptMixin . This broke eg ModuleCommandTests.testComposedModulesValuesInDefinition because basically composed module options activate no profile. The problem is that there is no real way to know what to activate currently, because when deploying a part of a composed module, its metadata is actually a link to the whole metadata, but does not really know which part. Long story short, something we may be able to do is to activate the union of all profiles, but this breaks very easily module compose foo definition transform expr foo transform script bar would try to activate both script and expression profiles for both modules.",XD-1412,
Create an xd yarn script that is more Cloud Foundry like xd yarn push p path to unzipped yearn distro xd yarn start admin xd yarn start container ,XD-1411,
Startup zookeeper on EC2 cluster instances.,XD-1410,
The documentation lists the gemfire server sink module s attributes to be gemfireHost and gemfirePort . In the module code they are host and port . The other attributes are correct. ,XD-1409,
The throughput module would expect a payload of the type Message byte and look for the byte to be START or STOP strings to trigger a throughput measurement. https github.com spring projects spring xd tree master extensions would be the place for the module to live.,XD-1407,
"Currently, XD hast testCompile dependency to use org.codehaus.groovy groovy all 2.2.1. The spring integration groovy uses 2.2.2 and it is what spring IO platform uses as well. To keep it all same, we can change this testCompile dependency to use 2.2.2 ",XD-1406,
The application should live in in spring xd samples repository. The stream created in https jira.spring.io browse XD 1402 should be documented how to run a benchmark and made easy to execute. Can use ruby bash awk sed to generate traffic via sendfile in order to saturate the stream. ,XD-1403,
"A module that could be used in a stream definition such as reactor bind tcp 0.0.0.0 3000 length?codec bytes do stuff throughput sampler where throughput sampler could start measurements once a key START is found in a Message and stop when the key STOP is found in a Message, listing the number of msgs sec etc.",XD-1402,
A reactor based TCP module that would support some basic CODECS. Should evaluate if this new TCP module would subsume the current reactor syslog module functionality or if the reactor syslog module should be enhanced upgradted.,XD-1401,
"The Admin leader will write each Module deployment request to a child node of xd deployments for a selected Container see XD 1399 . That Container specific persistent child node needs to be created by the Container at the same time as it creates its ephemeral node under xd containers. The Container should then deploy the Module. If that same node is subsequently deleted, the Container should undeploy the Module.",XD-1400,
"The Stream deployment requests will be written to xd streams streamname and the data on that node will include the state or a boolean indicator for now of whether it should be deployed. When a Stream is deployed, the leader will consult its Container cache and write the modules to the various xd deployments child nodes see XD 1400 .",XD-1399,
"This should also enable removal of any StreamDefinitionRepository code. The state should be written as a data node at the stream level e.g. xd streams mystream state ... For now we at least need to support the boolean deploy true false flag. If that is true, then the leader Admin will deploy the modules of the stream across available containers XD 1399 ",XD-1398,
"This will require a ZooKeeperConnection in AdminServerApplication, based on singlenode vs. distributed via profiles, see ContainerServerApplication for an example . Then a PathChildrenCache should be established for the xd containers node.",XD-1397,
The container will not start with JMX enabled and the management port set. The stacktrace is attached and the settings for the container are enumerated below export endpoints jmx enabled true export endpoints jmx uniqueNames true export endpoints jolokia enabled true export XD JMX ENABLED true export management port 15005,XD-1396,
"After the container singlenode is up and running, the application does not update the singlenode.log or containernode.log. create a stream time log . you will see the timestamp in your console, but it will not be in the log.",XD-1395,
"This will have an effect on both singlenode and distributed mode as described below... singlenode Currently, when running in singlenode mode, an embedded ZooKeeper server is started, and it discovers an available port for client connections and exposes it via a getClientPort method. With this change, IF a client connect string is provided explicitly, the embedded ZooKeeper server should not be started, but instead the client connection should be established using that explicitly provided connect string. SEE the todo comment above the SpringApplicationBuilder admin line within SingleNodeApplication . distributed Currently, when running in distributed mode, the client connect string is hardcoded to localhost 2181 . Obviously that is only a short term solution since a real world distributed runtime would span multiple machines including the ZooKeeper ensemble itself . That is also why the connect string must support a comma delimited list of host port values for redundancy , but the constructor for ZooKeeperConnection that accepts a client connect string already supports that via the underlying CuratorFramework builder. With this change, a command line argument for the client connect string will be passed into the ZooKeeperConnection constructor, within the configuration e.g. SEE the todo statement within ContainerServerApplication.DistributedZooKeeperConnectionConfiguration .",XD-1393,
"When the job is run with its jobParameters by SimpleJobLauncher, its lastJobExecution s stepExecutions are checked for UNKNOWN status to throw JobRestartException. It looks like the stepExecutions for the lastJobExecution are never set and the collection stepExecutions is not fetched from job repository. Hence, not sure if the following condition in SimpleJobLauncher s run final Job job, final JobParameters jobParameters would ever get executed for StepExecution execution lastExecution.getStepExecutions if execution.getStatus BatchStatus.UNKNOWN throw throw new JobRestartException Step execution.getStepName is of status UNKNOWN ; end if end for",XD-1390,
"Need to be able to test the following sources TCP, HTTP, Time,",XD-1383,
"When sending data to the TCP Source if the data is not terminated with a r n when the socket is closed by the client, XD throws an exception. ",XD-1382,
If stream fails to create while using sources or sinks that need ports. Ports are not released. If while creating a stream you see Command failed org.springframework.xd.rest.client.impl.SpringXDException Failed to bind to 0.0.0.0 0.0.0.0 9000. Possibly the port is already in use. then destroy the stream or all streams for that matter you will not be able to create another stream that uses that port. The work around is to cycle the container.,XD-1381,
"Problem Can t use tcp source, sink and http together on Single Node. While creating tests for CI I tried to create the following Steps to Reproduce xd stream create fooOut definition tcp file Created new stream fooOut xd stream create fooIn definition http port 9002 tcp Command failed org.springframework.xd.rest.client.impl.SpringXDException Failed to bind to 0.0.0.0 0.0.0.0 9000. Possibly the port is already in use. Even if I use different ports for the tcp I still get failures pointing to 9000. Extra Notes The stream below is works. xd stream create fooOut definition tcp file Created new stream fooOut xd stream create fooIN definition time tcp Stack Trace Attached ",XD-1380,
"When executing tests and failures occur should be easy to simulate with a forced failure , several other side effect failures occur with the following error code Caused by java.lang.IllegalArgumentException HSQLDB could not be started. Maybe another instance is already running on 0.0.0.0 13583 ? code It seems that the failing tests are not properly cleaning up, so the HSQLDB instance they started is still running thereby causing the other failures. In the case I last witnessed this on a dev branch, I had a valid failure in LocalControlRedisDataInitializationTests the environmentMatchesTransport method, specifically and TypeConvertingStreamTests. So, perhaps a good way to start exploring this issue is to simulate a failure in one or both of those classes. The false negatives I m seeing are in the following code LocalSingleNodeInitializationTests.environmentMatchesTransport RabbitSingleNodeInitializationTests.environmentMatchesTransport RedisSingleNodeInitializationTests.environmentMatchesTransport FileSourceModuleTests.classMethod LocalSingleNodeStreamDeploymentIntegrationTests.classMethod RabbitSingleNodeStreamDeploymentIntegrationTests.classMethod RabbitSingleNodeStreamDeploymentIntegrationTests.classMethod code They all seem to be tests that start the SingleNodeApplication.",XD-1379,
e.g. rabbit.xml source. context property placeholder location xd.config.home configProperties rabbit .properties ignore resource not found true would be removed and rabbit connection factory id rabbitConnectionFactory host host spring.rabbitmq.host localhost port port spring.rabbitmq.port 5672 virtual host vhost spring.rabbitmq.virtualHost username username spring.rabbitmq.username guest password password spring.rabbitmq.password guest would look like port port and a property file in the module directory or POJO in the module lib would specify the default value of the port. For POJO it would be options class org.springframework.xd.dirt.modules.metadata.RabbitSourceOptionsMetadata For property file it would be option.port.default 5672 option.port.description cool port number This needs to be consistently done across all the modules. ,XD-1378,
"This applies to a few places when addressing the issue, a search should be done to uncover any others , e.g. ContainerServerApplication public static final String NODE PROFILE node ; Options classes The transport to use for data messages from node to node The transport to use for control messages between admin and nodes ",XD-1377,
The XD shell crashes when the following command issued stream create test definition http filter expression !payload.contains test log It looks like the JLine ConsoleReader s expandEvents is set to true by default and this causes the issue Exception in thread Spring Shell java.lang.IllegalArgumentException !payload.contains test log event not found at jline.console.ConsoleReader.expandEvents ConsoleReader.java 734 at jline.console.ConsoleReader.finishBuffer ConsoleReader.java 604 at jline.console.ConsoleReader.accept ConsoleReader.java 1912 at jline.console.ConsoleReader.readLine ConsoleReader.java 2537 at jline.console.ConsoleReader.readLine ConsoleReader.java 2162 at jline.console.ConsoleReader.readLine ConsoleReader.java 2150 at org.springframework.shell.core.JLineShell.promptLoop JLineShell.java 517 at org.springframework.shell.core.JLineShell.run JLineShell.java 178 at java.lang.Thread.run Thread.java 722 ,XD-1376,
Need to update the spring xd extension reactor support to reflect the changes to Reactor refactorings introduced in v1.1.,XD-1372,
I am trying to use HDFS as sink while creating streams and I am encountering the following error Please refer attached document Exception localhost 8020.txt The fs.default.name set in hadoop.properties is fs.default.name hdfs localhost 8020 I have also tried the following variation in the hadoop.properties file fs.default.name hdfs 127.0.0.2 8020 fs.default.name hdfs 127.0.0.2 50070 Using these values are also throwing me exceptions as mentioned in the following files attached Exception 127.0.0.2 8020.txt Exception 127.0.0.2 50070.txt We are using Pivotal HD 1.0.1 spring xd 1.0.0.M5 dist Kindly let us know the way around for this issue. ,XD-1369,
The main container context becomes the shared context for modules.,XD-1368,
xd lib includes jcl over slf4j so we don t need additional commons logging jars in the modules or extensions https github.com spring projects spring xd pull 610,XD-1367,
"The YARN support in M6 changes most of the config properties, need to update XD to use new ones.",XD-1364,
"Currently, the job notification channels are direct channels. We need to make these pub sub channels. With XD 885 allowing automatic job listeners registration , this would allow us to create named channel syntax like topic job myjobname jobExecution log topic job myjobname stepExecution log ",XD-1362,
"This will be used by SingleNodeApplication if no ZooKeeper process is available based on the provided client connect string. It will still be recommended that user s run ZooKeeper externally, at least in standalone mode, when running SingleNodeApplication. We should clarify that in the documentation and logs. It should implement SmartLifecycle so that it can be managed as a bean within an ApplicationContext.",XD-1359,
"The xd containers node is the parent where each Container will write an ephemeral child node. The node name should be the Container s ID, and the node data should be the Container s attributes host, pid, and much more to be added later . When a Container shuts down cleanly, it should eagerly delete the ephemeral node so that watchers are notified immediately. For any other case including a network partition , the ephemeral node will disappear after the timeout elapses.",XD-1357,
"When the container shuts down, ContainerStoppedEvent should be published so that appropriate listeners would act on. Please refer to this discussion here https github.com spring projects spring xd pull 612",XD-1355,
Post boot refactoring. XDContainer lifecycle methods are not being used. Refactor by merging relevant functionality into LauncherApplication. Rename LauncherApplication to ContainerServerApplication consistent with AdminServerApplication . ,XD-1354,
The Spring Data team recommends using the Jedis driver since the Lettuce driver hasn t had any update activity for several months. Jedis is actively maintained. We might also want to investigate Redisson which is a fork of Lettuce https github.com mrniko redisson,XD-1353,
"This will allow us to control the order of plugins and use plugin s to manage the common module context, replacing BeanDefinitionAddingBeanPostProcesser",XD-1351,
The enum unnecessarily restricts the ability to add new transport MessageBus implementations whereas the config location path is open for extensions since it uses wildcards in message bus.xml code import resource .. .. transports XD TRANSPORT bus.xml code ,XD-1350,
We currently pull all hdfs config properties from hdfs.properties change that to use application.yml,XD-1349,
This requires exposing properties to the ListenerContainer. Probably cleaner to inject the ListenerContainer into the RabbitMessageBus and expose property placeholders on the LC. Maybe do the same for RabbitAdmin as well. ,XD-1348,
"Following merge of https github.com spring projects spring xd pull 601, expose a unique id under which a module is known inside a stream. That id which defaults to the module name is what should be used as the qualifier for an option name inside a composed module, ie noformat module compose foo definition f1 filter filter f1.expression and filter.expression are available noformat ",XD-1347,
"Following merge of https github.com spring projects spring xd pull 601, allow a module option to be known by several names and elect a short name in composed module options when there is no ambiguity",XD-1346,
"Following merge of https github.com spring projects spring xd pull 601, use dot as the separator for a composed module option. Need change to the parser to accept dots",XD-1345,
"Provide an easy way for users to add beans e.g., Gemfire cache configuration or modify default XD configuration such as serializers, and message converters. A simple approach is to add a well known resource selector such as classpath META INF spring xd extensions or include this path in an extensible Configuration base class. In addition, we should adopt conventional names for beans that are meant to be extended, e.g. use an xd. prefix.",XD-1343,
"Currently, hsqldb, postgres and mysql job repositories are supported. We need to add configurable oracle jdbc settings.",XD-1341,
"Currently, the XD container uses embedded tomcat only to support management server that acts as the RESTful server for boot s actuator MVC and jolokia endpoints. If the configuration is set to use a specific management port using the fixes addressed via XD 1122 , then we don t need to have embedded tomcat servlet container in XD container. ",XD-1340,
We need a methodology for providing partitioning hints. A current proposal uses message headers to provide partition key the item to partition on destination region what to target In the proposal the developer used partition key to route the stream message to the node where data was stored in process. This was done so downstream stream operations could work on the data with out suffering any network IO. The destination region was used to target the type of data the downstream streams were going to use in their stream processing. ,XD-1338,
"When importing XD as a gradle project into STS, it fails with Missing directories spring xd hadoop hdp20 and spring xd yarn mkdir on these directories solves the problem. The hdp20 case relates to XD 599 it is not clear why spring xd yarn is needed. ",XD-1335,
"While the current setting work while running from your laptop to local deployments. Or running from your laptop to ec2, they are not long enough for CI to Ec2. This should have good defaults and have CI set them to what it needs.",XD-1332,
See also XD 1320.,XD-1331,
"It looks like the HadoopFileSystemTestSupport test rule by default runs against hadoop 1.2 and we can add a way to support running the hadoop centric tests to run against a given hadoop distro. Currently, if the test is run against a version other than 1.2, the rule says 15 47 34,469 ERROR main hadoop.HadoopFileSystemTestSupport 95 HADOOP FS IS NOT AVAILABLE, SKIPPING TESTS org.apache.hadoop.ipc.RemoteException Server IPC version 9 cannot communicate with client version 4 at org.apache.hadoop.ipc.Client.call Client.java 1113 at org.apache.hadoop.ipc.RPC Invoker.invoke RPC.java 229 at com.sun.proxy. Proxy8.getProtocolVersion Unknown Source at sun.reflect.NativeMethodAccessorImpl.invoke0 Native Method at sun.reflect.NativeMethodAccessorImpl.invoke NativeMethodAccessorImpl.java 57 at sun.reflect.DelegatingMethodAccessorImpl.invoke DelegatingMethodAccessorImpl.java 43 at java.lang.reflect.Method.invoke Method.java 601 at org.apache.hadoop.io.retry.RetryInvocationHandler.invokeMethod RetryInvocationHandler.java 85 at org.apache.hadoop.io.retry.RetryInvocationHandler.invoke RetryInvocationHandler.java 62 at com.sun.proxy. Proxy8.getProtocolVersion Unknown Source at org.apache.hadoop.ipc.RPC.checkVersion RPC.java 422 at org.apache.hadoop.hdfs.DFSClient.createNamenode DFSClient.java 183 at org.apache.hadoop.hdfs.DFSClient. init DFSClient.java 281 at org.apache.hadoop.hdfs.DFSClient. init DFSClient.java 245 at org.apache.hadoop.hdfs.DistributedFileSystem.initialize DistributedFileSystem.java 100 at org.apache.hadoop.fs.FileSystem.createFileSystem FileSystem.java 1446 at org.apache.hadoop.fs.FileSystem.access 200 FileSystem.java 67 at org.apache.hadoop.fs.FileSystem Cache.get FileSystem.java 1464 at org.apache.hadoop.fs.FileSystem.get FileSystem.java 263 at org.apache.hadoop.fs.FileSystem.get FileSystem.java 124 at org.springframework.xd.test.hadoop.HadoopFileSystemTestSupport.obtainResource HadoopFileSystemTestSupport.java 49 at org.springframework.xd.test.AbstractExternalResourceTestSupport.apply AbstractExternalResourceTestSupport.java 58 at org.junit.rules.RunRules.applyAll RunRules.java 26 at org.junit.rules.RunRules. init RunRules.java 15 at org.junit.runners.BlockJUnit4ClassRunner.withTestRules BlockJUnit4ClassRunner.java 379 at org.junit.runners.BlockJUnit4ClassRunner.withRules BlockJUnit4ClassRunner.java 340 at org.junit.runners.BlockJUnit4ClassRunner.methodBlock BlockJUnit4ClassRunner.java 256 at org.junit.runners.BlockJUnit4ClassRunner.runChild BlockJUnit4ClassRunner.java 70 at org.junit.runners.BlockJUnit4ClassRunner.runChild BlockJUnit4ClassRunner.java 50 at org.junit.runners.ParentRunner 3.run ParentRunner.java 238 at org.junit.runners.ParentRunner 1.schedule ParentRunner.java 63 at org.junit.runners.ParentRunner.runChildren ParentRunner.java 236 at org.junit.runners.ParentRunner.access 000 ParentRunner.java 53 at org.junit.runners.ParentRunner 2.evaluate ParentRunner.java 229 at org.junit.runners.ParentRunner.run ParentRunner.java 309 at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run JUnit4TestReference.java 50 at org.eclipse.jdt.internal.junit.runner.TestExecution.run TestExecution.java 38 at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests RemoteTestRunner.java 467 at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests RemoteTestRunner.java 683 at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run RemoteTestRunner.java 390 at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main RemoteTestRunner.java 197 ",XD-1330,
From https jira.springsource.org browse XD 1231 we understand the importance of modularizing client side javascript code. This story tracks modularization of XD UI.,XD-1328,
Command such as yarn app list yarn deploy xd zipFile tmp myapp.zip config tmp myconfig.yml ,XD-1326,
Suggest trying with Hortonworks 2.0,XD-1325,
"There seems to be some intersection with the work for this issue and the rationalization of how module properties are handled. There will be changes to configuration property management support such that each module source, sink, etc will be able to also be overridden in spring xd.yml or wherever Dspring.config.location points to. The HDFS sink module for example, will have default values based on it s OptionsMetadata and will be of the form type . module . option That means in the configuration for hdfs.xml sink, there would be a config section such as code xml configuration fs.default.name sink.hdfs.hd.fs mapred.job.tracker sink.hdfs.hd.jt yarn.resourcemanager.address sink.hdfs.hd.rm mapreduce.framework.name sink.hdfs.mr.fw configuration code With default values defined by a HdfsSinkOptionsMetadata class. The hdfs.xml module file would not contain any references to a properties file. A file specified by Dspring.config.location could override the values in a config section such as sink hdfs hd.fs hdfs foobarhost 8020 hd.jt 10.123.123.123 9000 etc. ",XD-1322,
"Add YARN specific code based on Janne s prototyping Add YARN Client and AppMaster implementations and startup config files This includes shell scripts to deploy XD to YARN Test working on Apache 2.2 distribution We can modify config files, everything should be possible to override by providing command line args or env variables. . xd yarn deploy zipFile tmp spring xd yarn.zip config tmp spring xd yarn.yml ",XD-1321,
Job restart fails with NPE. See PR for XD 1090 https github.com spring projects spring xd pull 572 ,XD-1320,
"A lot of modules have similar options. Moreover, job modules often have options that belong to at least two domains eg jdbc hdfs . I think that by using FlattenedCompositeModuleOptionsMetadata, we could come up with a way to combine several options POJOs into one. Something like public class JdbcHdfsOptionsMetadata OptionsMixin private JdbcOptionsMetadata jdbc; OptionsMixin private HdfsOptionsMetadata hdfs; this would expose eg driverClass as well as rolloverSize as top level options. Values could be actually injected into the fields, so that eg custom validation could occur default validation for the mixin class would occur by default ",XD-1319,
This is so that we can have an ENUM that can show the possible values and autocomplete. Using just the XML the user has a greater chance to enter an invalid mode. ,XD-1315,
"Create XD .zip distribution for YARN that adds an additional sub project to the spring xd repo for building the xd YARN.zip Link into main build file Produce a new artifact spring xd v xyz yarn.zip as part of the nightly CI process will now have 2 artifacts, main xd.zip distribution and xd yarn.zip Does not include any Hadoop distribution libraries Does include spring hadoop jars for Apache22 unflavored ",XD-1314,
See discussion at https github.com spring projects spring xd pull 572,XD-1313,
"Create a job, launch it but make it fail eg filejdbc with missing file job execution list it s there, as FAILED. Good job execution restart theid Fails with NPE noformat 16 59 42,160 ERROR http nio 9393 exec 7 rest.RestControllerAdvice 191 Caught exception while handling a request java.lang.NullPointerException at org.springframework.batch.core.job.AbstractJob.execute AbstractJob.java 351 at org.springframework.batch.core.launch.support.SimpleJobLauncher 1.run SimpleJobLauncher.java 135 at org.springframework.core.task.SyncTaskExecutor.execute SyncTaskExecutor.java 50 at org.springframework.batch.core.launch.support.SimpleJobLauncher.run SimpleJobLauncher.java 128 at sun.reflect.GeneratedMethodAccessor157.invoke Unknown Source at sun.reflect.DelegatingMethodAccessorImpl.invoke DelegatingMethodAccessorImpl.java 43 at java.lang.reflect.Method.invoke Method.java 606 at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection AopUtils.java 317 at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint ReflectiveMethodInvocation.java 190 at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed ReflectiveMethodInvocation.java 157 at org.springframework.batch.core.configuration.annotation.SimpleBatchConfiguration PassthruAdvice.invoke SimpleBatchConfiguration.java 117 at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed ReflectiveMethodInvocation.java 179 at org.springframework.aop.framework.JdkDynamicAopProxy.invoke JdkDynamicAopProxy.java 207 at com.sun.proxy. Proxy39.run Unknown Source at org.springframework.batch.admin.service.SimpleJobService.restart SimpleJobService.java 179 at org.springframework.xd.dirt.plugins.job.DistributedJobService.restart DistributedJobService.java 77 at org.springframework.xd.dirt.rest.BatchJobExecutionsController.restartJobExecution BatchJobExecutionsController.java 146 at sun.reflect.NativeMethodAccessorImpl.invoke0 Native Method at sun.reflect.NativeMethodAccessorImpl.invoke NativeMethodAccessorImpl.java 57 at sun.reflect.DelegatingMethodAccessorImpl.invoke DelegatingMethodAccessorImpl.java 43 at java.lang.reflect.Method.invoke Method.java 606 at org.springfram noformat ",XD-1312,
"Create a job, execute it a couple of times, destroy it and then invoke job execution list. The job name column should mention that a job is defunct even though a job with the same name could have been re created in the interim ",XD-1311,
"Disregard the missing date that is caused by another problem. Here is the setup noformat xd job execution list Id Job Name Start Time Step Execution Count Status 13 foo Europe Paris 0 STARTING 12 foo 2014 02 12 15 39 46 Europe Paris 1 FAILED 11 foo 2014 02 12 15 39 29 Europe Paris 1 COMPLETED 10 foo 2014 02 12 15 38 36 Europe Paris 1 COMPLETED 9 foo 2014 02 12 15 38 21 Europe Paris 1 COMPLETED 8 foo Europe Paris 0 STARTING 7 foo 2014 02 12 15 25 41 Europe Paris 1 COMPLETED 6 foo 2014 02 12 15 25 04 Europe Paris 1 FAILED 5 foo 2014 02 12 15 14 32 Europe Paris 1 FAILED 4 foo 2014 02 12 15 14 13 Europe Paris 1 FAILED 3 foo 2014 02 12 15 13 54 Europe Paris 1 FAILED 2 foo 2014 02 12 15 13 18 Europe Paris 1 FAILED 1 foo 2014 02 12 15 12 58 Europe Paris 1 FAILED 0 foo 2014 02 12 15 11 44 Europe Paris 1 FAILED xd job execution restart id 12 Command failed org.springframework.xd.rest.client.impl.SpringXDException Job Execution 12 is already running. noformat while the server exception is a bit better noformat Caused by org.springframework.batch.core.repository.JobExecutionAlreadyRunningException A job execution for this job is already running JobInstance id 11, version 0, Job foo at org.springframework.batch.core.repository.support.SimpleJobRepository.createJobExecution SimpleJobRepository.java 120 noformat I'd argue we should not speak in terms of execution ids if possible, but rather in terms of job names ",XD-1310,
"When using a JSR303 annotated class for module options, the binding failures should be bypassed, as they interfere with completion proposals. ",XD-1309,
"When trying some of the examples of XD 159, came up with weird behavior of the transform module. This boils down to noformat stream create foo definition http transform expression new java.lang.Integer payload transform expression payload.getClass log http post data 42 Integer OK http post data WTH WTH ! noformat Seems that when the expression can not be evaluated, the incoming payload is transmitted as is",XD-1308,
HATEOAS 0.9 introduced some support for templated links. This should be leveraged to properly handle eg streams id instead of using string concatenation,XD-1307,
"Commit https github.com spring projects spring xd commit 761cd5e8250c055878caf3a789ab5b3254ba48e8 introduced support for FTP and added a bunch of .x classes. These should not belong to DIRT proper though, and should be added to an extension style project. The job s module would then depend on them",XD-1306,
currently the file sink only supports append. User should support an overwrite feature.,XD-1305,
"There are few boolean type module option properties whose default values are specified in the module definitions than their corresponding ModuleOptionsMetaData. Also, when using boolean we need to have module option using primitive type boolean than Boolean type. Currently, these are some of the module options that require this change initializeDatabase in modules filejdbc, hdfsjdbc job modules, aggregator processor module, jdbc sink module restartable in all the job modules deleteFiles in filejdbc, filepollhdfs job modules ",XD-1300,
"Currently, the fileDeletion listeners are added to filepollhdfs and filejdbc OOTB job modules so that the files are deleted after successful completion of jobs that write the file into hdfs jdbc. We have deleteFiles option in ResourcesIntoJdbcJobModuleOptionsMetadata from https github.com spring projects spring xd pull 562 which makes it available for hdfsjdbc job module as well. But it is not supported yet as it involves deletion of HDFS files. We need the file deletion listeners for the hdfsjdbc and hdfsmongodb job modules so that if opted to delete files, it can be supported. ",XD-1299,
"Commit 96de9fcfaf32719413015a1a6bace1b30b6b9610 strengthened module type inference, but some corner cases remain marked as TODOs and commented out assertions in tests . To be effective, we need to look at the whole deployed stream or composed module . Modify ParsinContext accordingly.",XD-1297,
"If JMX is enabled, some of the integration tests fail. This is similar to what we see in XD 1295. One example of this case is, the test classes that extend StreamTestSupport. In StreamTestSupport, the BeforeClass has this line moduleDeployer containerContext.getBean ModuleDeployer.class ; When JMX is enable, the IntegrationMBeanExporter creates JdkDynamicProxy for the ModuleDeployer since it is of type MessageHandler and thereby the above line to get bean by the implementing class type ModuleDeployer fails. There are few other places where we use to refer the implementing classes on getBean . Looks like we need to fix those as well. ",XD-1296,
"If JMX is enabled for modules enabling the IntegrationMBeanExporter , the ModuleTypeConversionPlugin fails to get the reference to input output channel for adding the ContentTypeHeaderInterceptor and results in exception. It seems like the IntegrationMBeanExporter when JMX is enabled creates JdkDynamicAopProxy for all the integration components and thereby the following check on ModuleTypeConversionPlugin to retrieve the AbstractMessageChannel fails. AbstractMessageChannel channel null; if isInput channel module.getComponent input , AbstractMessageChannel.class ; else channel module.getComponent output , AbstractMessageChannel.class ; I see the reason why AbstractMessageChannel is used here to use some of the methods in the implementing class that didn t exist in the interfaces but IntegrationMBeanExporter creating JdkDynamicAopProxy for the channel fails to resolve as AbstractMessageChannel here. Following is the full stack trace To replicate, stream create testing definition http outputType text plain log 3 45,238 ERROR redisInboundAdapter redis queue inbound channel adapter1 handler.LoggingHandler 145 org.springframework.messaging.MessageHandlingException error occurred in message handler moduleDeployer at org.springframework.integration.handler.AbstractMessageHandler.handleMessage AbstractMessageHandler.java 79 at sun.reflect.NativeMethodAccessorImpl.invoke0 Native Method at sun.reflect.NativeMethodAccessorImpl.invoke NativeMethodAccessorImpl.java 57 at sun.reflect.DelegatingMethodAccessorImpl.invoke DelegatingMethodAccessorImpl.java 43 at java.lang.reflect.Method.invoke Method.java 601 at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection AopUtils.java 317 at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint ReflectiveMethodInvocation.java 190 at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed ReflectiveMethodInvocation.java 157 at org.springframework.integration.monitor.SimpleMessageHandlerMetrics.handleMessage SimpleMessageHandlerMetrics.java 106 at org.springframework.integration.monitor.SimpleMessageHandlerMetrics.invoke SimpleMessageHandlerMetrics.java 86 at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed ReflectiveMethodInvocation.java 179 at org.springframework.aop.framework.JdkDynamicAopProxy.invoke JdkDynamicAopProxy.java 207 at com.sun.proxy. Proxy62.handleMessage Unknown Source at org.springframework.integration.config.ServiceActivatorFactoryBean 1.handleRequestMessage ServiceActivatorFactoryBean.java 83 at org.springframework.integration.handler.AbstractReplyProducingMessageHandler.handleMessageInternal AbstractReplyProducingMessageHandler.java 152 at org.springframework.integration.handler.AbstractMessageHandler.handleMessage AbstractMessageHandler.java 73 at org.springframework.integration.dispatcher.UnicastingDispatcher.doDispatch UnicastingDispatcher.java 121 at org.springframework.integration.dispatcher.UnicastingDispatcher.dispatch UnicastingDispatcher.java 108 at org.springframework.integration.channel.AbstractSubscribableChannel.doSend AbstractSubscribableChannel.java 77 at org.springframework.integration.channel.AbstractMessageChannel.send AbstractMessageChannel.java 218 at org.springframework.integration.channel.AbstractMessageChannel.send AbstractMessageChannel.java 188 at sun.reflect.NativeMethodAccessorImpl.invoke0 Native Method at sun.reflect.NativeMethodAccessorImpl.invoke NativeMethodAccessorImpl.java 57 at sun.reflect.DelegatingMethodAccessorImpl.invoke DelegatingMethodAccessorImpl.java 43 at java.lang.reflect.Method.invoke Method.java 601 at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection AopUtils.java 317 at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint ReflectiveMethodInvocation.java 190 at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed ReflectiveMethodInvocation.java 157 at org.springframework.integration.monitor.DirectChannelMetrics.monitorSend DirectChannelMetrics.java 113 at org.springframework.integration.monitor.DirectChannelMetrics.doInvoke DirectChannelMetrics.java 97 at org.springframework.integration.monitor.DirectChannelMetrics.invoke DirectChannelMetrics.java 91 at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed ReflectiveMethodInvocation.java 179 at org.springframework.aop.framework.JdkDynamicAopProxy.invoke JdkDynamicAopProxy.java 207 at com.sun.proxy. Proxy61.send Unknown Source at org.springframework.messaging.core.GenericMessagingTemplate.doSend GenericMessagingTemplate.java 114 at org.springframework.messaging.core.GenericMessagingTemplate.doSend GenericMessagingTemplate.java 44 at org.springframework.messaging.core.AbstractMessageSendingTemplate.send AbstractMessageSendingTemplate.java 92 at org.springframework.integration.endpoint.MessageProducerSupport.sendMessage MessageProducerSupport.java 96 at org.springframework.integration.redis.inbound.RedisQueueMessageDrivenEndpoint.popMessageAndSend RedisQueueMessageDrivenEndpoint.java 212 at org.springframework.integration.redis.inbound.RedisQueueMessageDrivenEndpoint.access 300 RedisQueueMessageDrivenEndpoint.java 51 at org.springframework.integration.redis.inbound.RedisQueueMessageDrivenEndpoint ListenerTask.run RedisQueueMessageDrivenEndpoint.java 291 at org.springframework.integration.util.ErrorHandlingTaskExecutor 1.run ErrorHandlingTaskExecutor.java 52 at java.lang.Thread.run Thread.java 722 Caused by org.springframework.xd.dirt.plugins.ModuleConfigurationException Bean named output must be of type org.springframework.integration.channel.AbstractMessageChannel , but was actually of type com.sun.proxy. Proxy70 at org.springframework.xd.dirt.plugins.stream.ModuleTypeConversionPlugin.configureModuleConverters ModuleTypeConversionPlugin.java 144 at org.springframework.xd.dirt.plugins.stream.ModuleTypeConversionPlugin.postProcessModule ModuleTypeConversionPlugin.java 70 at org.springframework.xd.dirt.module.ModuleDeployer.postProcessModule ModuleDeployer.java 378 at org.springframework.xd.dirt.module.ModuleDeployer.deploy ModuleDeployer.java 282 at org.springframework.xd.dirt.module.ModuleDeployer.deployAndStore ModuleDeployer.java 271 at org.springframework.xd.dirt.module.ModuleDeployer.handleDeploy ModuleDeployer.java 266 at org.springframework.xd.dirt.module.ModuleDeployer.handleSingleModuleMessage ModuleDeployer.java 244 at org.springframework.xd.dirt.module.ModuleDeployer.handleMessageInternal ModuleDeployer.java 171 at org.springframework.integration.handler.AbstractMessageHandler.handleMessage AbstractMessageHandler.java 73 ... 42 more Caused by org.springframework.beans.factory.BeanNotOfRequiredTypeException Bean named output must be of type org.springframework.integration.channel.AbstractMessageChannel , but was actually of type com.sun.proxy. Proxy70 at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean AbstractBeanFactory.java 376 at org.springframework.beans.factory.support.AbstractBeanFactory.getBean AbstractBeanFactory.java 200 at org.springframework.context.support.AbstractApplicationContext.getBean AbstractApplicationContext.java 979 at org.springframework.xd.module.core.SimpleModule.getComponent SimpleModule.java 156 at org.springframework.xd.dirt.plugins.stream.ModuleTypeConversionPlugin.configureModuleConverters ModuleTypeConversionPlugin.java 100 ... 50 more",XD-1295,
"Currently, the reactorEnv bean is defined in module common context and the spring xd dirt has the runtime dependency over spring xd extension reactor project. This enables boot s ReactorAutoConfiguration to initialize the reactor environment, we have the reactor setup configured for both admin and container server applications. Since reactor environment is not being used by container and only used by the reactor syslog module, we can move the reactorEnv bean definition in reactor syslog module. There is one caveat in this approach as the reactor environment gets setup everytime a new reactor syslog module is deployed.",XD-1294,
"Currently, the job module s batch job s bean id should be job . This also causes the job name to be actual job name .job and the batch job controllers require to search for job with suffix .job . Removing this constraint would help us avoiding these.",XD-1293,
"There is no point in providing completion with something that will fail when the user tries it. The information about a module being a composed is now available at the REST layer, so should be used",XD-1292,
"Currently, ModuleDeployer is a disposable bean. When the container context is closed, the ModuleDeployer bean is destroyed along with its associated common context and deployed modules. Issue arises, if the connectionfactory bean associated with the deployed modules message bus bindings is destroyed before the ModuleDeployer bean, there is exception stacktrace at least in case of Redis MessageBus saying Connection closed . Adding SmartLifecycle support to ModuleDeployer will make sure all the beans are destroyed during Lifecycle processor s stop method before any of the singletonbeans are destroyed. The stacktrace when using Redis MessageBus is org.springframework.data.redis.RedisSystemException Redis exception; nested exception is com.lambdaworks.redis.RedisException Connection closed at org.springframework.data.redis.connection.lettuce.LettuceExceptionConverter.convert LettuceExceptionConverter.java 45 at org.springframework.data.redis.connection.lettuce.LettuceExceptionConverter.convert LettuceExceptionConverter.java 35 at org.springframework.data.redis.connection.lettuce.LettuceConverters.toDataAccessException LettuceConverters.java 158 at org.springframework.data.redis.connection.lettuce.LettuceConnection.convertLettuceAccessException LettuceConnection.java 237 at org.springframework.data.redis.connection.lettuce.LettuceConnection.bRPop LettuceConnection.java 1449 at org.springframework.data.redis.core.DefaultListOperations 12.inRedis DefaultListOperations.java 154 at org.springframework.data.redis.core.AbstractOperations ValueDeserializingRedisCallback.doInRedis AbstractOperations.java 50 at org.springframework.data.redis.core.RedisTemplate.execute RedisTemplate.java 181 at org.springframework.data.redis.core.RedisTemplate.execute RedisTemplate.java 149 at org.springframework.data.redis.core.AbstractOperations.execute AbstractOperations.java 84 at org.springframework.data.redis.core.DefaultListOperations.rightPop DefaultListOperations.java 151 at org.springframework.data.redis.core.DefaultBoundListOperations.rightPop DefaultBoundListOperations.java 92 at org.springframework.integration.redis.inbound.RedisQueueMessageDrivenEndpoint.popMessageAndSend RedisQueueMessageDrivenEndpoint.java 178 at org.springframework.integration.redis.inbound.RedisQueueMessageDrivenEndpoint.access 300 RedisQueueMessageDrivenEndpoint.java 51 at org.springframework.integration.redis.inbound.RedisQueueMessageDrivenEndpoint ListenerTask.run RedisQueueMessageDrivenEndpoint.java 291 at org.springframework.integration.util.ErrorHandlingTaskExecutor 1.run ErrorHandlingTaskExecutor.java 52 at java.lang.Thread.run Thread.java 722 Caused by com.lambdaworks.redis.RedisException Connection closed at com.lambdaworks.redis.RedisAsyncConnection.await RedisAsyncConnection.java 1079 at com.lambdaworks.redis.RedisConnection.await RedisConnection.java 820 at com.lambdaworks.redis.RedisConnection.brpop RedisConnection.java 101 at org.springframework.data.redis.connection.lettuce.LettuceConnection.bRPop LettuceConnection.java 1447 ... 12 more 13 19 00,897 WARN Thread 5 support.DefaultLifecycleProcessor 257 Failed to stop bean org.springframework.integration.redis.inbound.RedisInboundChannelAdapter 0 com.lambdaworks.redis.RedisException Connection is closed at com.lambdaworks.redis.RedisAsyncConnection.dispatch RedisAsyncConnection.java 1065 at com.lambdaworks.redis.pubsub.RedisPubSubConnection.unsubscribe RedisPubSubConnection.java 82 at org.springframework.data.redis.connection.lettuce.LettuceSubscription.doUnsubscribe LettuceSubscription.java 68 at org.springframework.data.redis.connection.util.AbstractSubscription.unsubscribe AbstractSubscription.java 186 at org.springframework.data.redis.connection.util.AbstractSubscription.unsubscribe AbstractSubscription.java 146 at org.springframework.data.redis.listener.RedisMessageListenerContainer SubscriptionTask.cancel RedisMessageListenerContainer.java 836 at org.springframework.data.redis.listener.RedisMessageListenerContainer.stop RedisMessageListenerContainer.java 210 at org.springframework.integration.redis.inbound.RedisInboundChannelAdapter.doStop RedisInboundChannelAdapter.java 127 at org.springframework.integration.endpoint.AbstractEndpoint.stop AbstractEndpoint.java 100 at org.springframework.integration.endpoint.AbstractEndpoint.stop AbstractEndpoint.java 115 at org.springframework.context.support.DefaultLifecycleProcessor.doStop DefaultLifecycleProcessor.java 229 at org.springframework.context.support.DefaultLifecycleProcessor.access 300 DefaultLifecycleProcessor.java 51 at org.springframework.context.support.DefaultLifecycleProcessor LifecycleGroup.stop DefaultLifecycleProcessor.java 363 at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans DefaultLifecycleProcessor.java 202 at org.springframework.context.support.DefaultLifecycleProcessor.onClose DefaultLifecycleProcessor.java 118 at org.springframework.context.support.AbstractApplicationContext.doClose AbstractApplicationContext.java 888 at org.springframework.boot.context.embedded.EmbeddedWebApplicationContext.doClose EmbeddedWebApplicationContext.java 157 at org.springframework.context.support.AbstractApplicationContext 1.run AbstractApplicationContext.java 809 ",XD-1291,
The current configuration prevents modules to have default values that evaluate to null. The workaround is to either have the module have its own PPC which allows nulls rid the placeholders with foo ,XD-1290,
"xd stream create name simple definition http transform filter transform file Created new stream simple xd stream create name tapSimple definition tap stream mystream.transform file Created new stream tapSimple There isn t a stream named mystream ... I'don t remember if we want to allow for this set up taps before there is a stream or if it should be an error. Otherwise, works as expected xd stream create name tapSimple2 definition tap stream simple.transform file Command failed org.springframework.xd.rest.client.impl.SpringXDException XD144E pos 11 Reference to transform is not unique in the target stream http transform filter transform file , please label the relevant module and use the label, or use a suffix index to indicate which occurrence of the module, e.g. transform.0 tap simple.transform",XD-1287,
see discussion at https github.com spring projects spring xd pull 495 discussion diff 9291037,XD-1286,
"see CompletionProviderTests testUnfinishedModuleNameShouldReturnCompletions Ideally, would require a change in the parser so that it knows which kind of module was expected when it failed.",XD-1285,
"When doing dsl completion in a stream definition and a module option accepts a value that has a closed set of possible values eg booleans, enums , we can provide completions for those. ",XD-1284,
"This is about computing the value to support expressions such as xd.stream.name as a default. Initial discussion suggested to leverage the work done in XD 1175 by having a custom LateValue or DeployTimeValue, etc be resolved at deployment time",XD-1283,
Will likely involve having the module identity type name be part of the OptionsMetadata identity cache key,XD-1282,
Create a better UI instead of Boot s default Whitelabel Error Page ,XD-1281,
The kite SDK is used to write Avro records in a Kite specific format and also it support the parquet format for which we will eventually support.,XD-1278,
"May want to fix properly when tackling the module options for composed modules, but this is currently broken and wasn t at some point module compose upperHttp definition http transform expression payload.toUpperCase stream create foo definition upperHttp log This will fail saying that port can t be resolved This will work though module compose upperHttp definition http port 9000 transform expression payload.toUpperCase stream create foo definition upperHttp log Note that stream create foo definition upperHttp port xxx log should work too wut won t, but that s another bug will create after this one ",XD-1277,
"To show best practice, our batch jobs should include these listeners so that notifications can be sent. In particular it is desirable that jobs with file item readers can send the files that were processed so another stream can be sent the file name when the job completes to move delete the file",XD-1276,
"Since makeUnique, dateFormat and numberFormat now have their own module options now, they are nicely advertised as options to a job and will benefit from code completion soon , so they can be removed from the shell where they currently allow for a misconfiguration if set at both the job and shell level ",XD-1272,
"Currently, few of the boot s actuator endpoints go missing in the EndpointHandler mapping. They are BeansEndpoint, dumpEndpoint, traceEndpoint, healthEndpoint, infoEndpoint. Also, the EndpointHandler mapping doesn t even happen in case of LauncherApplication. I think this is because the LauncherApplication context starts with port 0 and the TomcatEmbeddedServletContainer sets the local port for it later. With port 0 , the Endpointhandler mapping is disabled during the EndpointHandler mapping bean creation.",XD-1271,
"Improve how the state of the stream is managed. A deploy command moves the stream from the undeployed state to the deploying state. If all modules in the stream are successfully deployed, the stream state is deployed If one or more module deployments failed, the stream state is failed. Any modules that were successfully deployed, are still running. Sending an undeploy command will stop all modules of the stream and return the stream to the undeployed state. For the individual modules that failed, we will be able to find out which ones failed. Not yet sure if we can try to redeploy just those parts of the stream that failed. See the design doc https docs.google.com a gopivotal.com document d 1kWtoH xEF1wMklzQ8AZaiuhBZWIlpCDi8G9 hAP8Fgc edit heading h.2rk74f16ow4i for more details. Story points for this issue are the total of all the story points for the subtasks.",XD-1270,
"There are explicit Thread.sleep calls after deploy in some of the test methods in AbstractSingleNodeStreamDeploymentIntegrationTests. Also, the test method deployAndUndeploy doesn t have explicit Thread.sleep and fails inconsistently with this error java.lang.AssertionError stream test0 not undeployed at org.junit.Assert.fail Assert.java 88 at org.junit.Assert.assertTrue Assert.java 41 at org.springframework.xd.dirt.stream.AbstractSingleNodeStreamDeploymentIntegrationTests.waitForUndeploy AbstractSingleNodeStreamDeploymentIntegrationTests.java 332 at org.springframework.xd.dirt.stream.AbstractSingleNodeStreamDeploymentIntegrationTests.deployAndUndeploy AbstractSingleNodeStreamDeploymentIntegrationTests.java 221 at sun.reflect.NativeMethodAccessorImpl.invoke0 Native Method at sun.reflect.NativeMethodAccessorImpl.invoke NativeMethodAccessorImpl.java 57 at sun.reflect.DelegatingMethodAccessorImpl.invoke DelegatingMethodAccessorImpl.java 43 at java.lang.reflect.Method.invoke Method.java 601 at org.junit.runners.model.FrameworkMethod 1.runReflectiveCall FrameworkMethod.java 47 at org.junit.internal.runners.model.ReflectiveCallable.run ReflectiveCallable.java 12 at org.junit.runners.model.FrameworkMethod.invokeExplosively FrameworkMethod.java 44 at org.junit.internal.runners.statements.InvokeMethod.evaluate InvokeMethod.java 17 at org.junit.internal.runners.statements.RunAfters.evaluate RunAfters.java 27 at org.junit.runners.ParentRunner.runLeaf ParentRunner.java 271 at org.junit.runners.BlockJUnit4ClassRunner.runChild BlockJUnit4ClassRunner.java 70 at org.junit.runners.BlockJUnit4ClassRunner.runChild BlockJUnit4ClassRunner.java 50 at org.junit.runners.ParentRunner 3.run ParentRunner.java 238 at org.junit.runners.ParentRunner 1.schedule ParentRunner.java 63 at org.junit.runners.ParentRunner.runChildren ParentRunner.java 236 at org.junit.runners.ParentRunner.access 000 ParentRunner.java 53 at org.junit.runners.ParentRunner 2.evaluate ParentRunner.java 229 at org.junit.internal.runners.statements.RunBefores.evaluate RunBefores.java 26 at org.junit.internal.runners.statements.RunAfters.evaluate RunAfters.java 27 at org.springframework.xd.test.AbstractExternalResourceTestSupport 1.evaluate AbstractExternalResourceTestSupport.java 71 at org.junit.rules.ExternalResource 1.evaluate ExternalResource.java 48 at org.junit.rules.ExternalResource 1.evaluate ExternalResource.java 48 at org.junit.rules.RunRules.evaluate RunRules.java 20 at org.junit.runners.ParentRunner.run ParentRunner.java 309 at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecuter.runTestClass JUnitTestClassExecuter.java 86 at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecuter.execute JUnitTestClassExecuter.java 49 at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassProcessor.processTestClass JUnitTestClassProcessor.java 69 at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.processTestClass SuiteTestClassProcessor.java 50 at sun.reflect.NativeMethodAccessorImpl.invoke0 Native Method at sun.reflect.NativeMethodAccessorImpl.invoke NativeMethodAccessorImpl.java 57 at sun.reflect.DelegatingMethodAccessorImpl.invoke DelegatingMethodAccessorImpl.java 43 at java.lang.reflect.Method.invoke Method.java 601 at org.gradle.messaging.dispatch.ReflectionDispatch.dispatch ReflectionDispatch.java 35 at org.gradle.messaging.dispatch.ReflectionDispatch.dispatch ReflectionDispatch.java 24 at org.gradle.messaging.dispatch.ContextClassLoaderDispatch.dispatch ContextClassLoaderDispatch.java 32 at org.gradle.messaging.dispatch.ProxyDispatchAdapter DispatchingInvocationHandler.invoke ProxyDispatchAdapter.java 93 at com.sun.proxy. Proxy2.processTestClass Unknown Source at org.gradle.api.internal.tasks.testing.worker.TestWorker.processTestClass TestWorker.java 103 at sun.reflect.NativeMethodAccessorImpl.invoke0 Native Method at sun.reflect.NativeMethodAccessorImpl.invoke NativeMethodAccessorImpl.java 57 at sun.reflect.DelegatingMethodAccessorImpl.invoke DelegatingMethodAccessorImpl.java 43 at java.lang.reflect.Method.invoke Method.java 601 at org.gradle.messaging.dispatch.ReflectionDispatch.dispatch ReflectionDispatch.java 35 at org.gradle.messaging.dispatch.ReflectionDispatch.dispatch ReflectionDispatch.java 24 at org.gradle.messaging.remote.internal.hub.MessageHub Handler.run MessageHub.java 355 at org.gradle.internal.concurrent.DefaultExecutorFactory StoppableExecutorImpl 1.run DefaultExecutorFactory.java 64 at java.util.concurrent.ThreadPoolExecutor.runWorker ThreadPoolExecutor.java 1145 at java.util.concurrent.ThreadPoolExecutor Worker.run ThreadPoolExecutor.java 615 at java.lang.Thread.run Thread.java 722 ",XD-1269,
The logic can be found in DefaultModuleOptionsMetadataCollector but caused problems in the initial PR. Revisit if needed,XD-1261,
"The modules are exposed via JMX and in turn exposed over http via jolokia. See https jira.springsource.org browse XD 343. This issue is to develop a helper method that given a stream id and or module name, assert that the number of messages processed after sending stimulus messages is as expected. e.g. int originalCount getCount testStream , file ; do stuff that generates 100 messages assertCount testStream , file , 100, originalCount For now we can assume we know the location of where the modules are located by assuming we have only one container deployed.",XD-1255,
"Currently, if we want to bind values to script variables we need to put them in a properties file like so xd stream create name groovyprocessortest definition http port 9006 script location custom processor.groovy properties location custom processor.properties log Ideally it should be xd stream create name groovyprocessortest definition http port 9006 script location custom processor.groovy foo bar baz boo log ",XD-1252,
See also XD 451 as reference.,XD-1251,
"Create a first pass at an acceptance test app for a stream definition of http log. This will involve creating two new projects in xd 1. spring xd integration test 2. spring xd acceptance tests 1 will contain generally useful utility methods for acceptance test, such as sending data over http, obtaining and asserting JMX values of specific modules. 2 will contain tests that use 1 to test the various out of the box modules provides in XD.",XD-1245,
Use the cleanup app from XD 1243 to stop previous CI runs of XD on EC2. Build XD EC2 deployer from github. Use XD EC2 Deployer to deploy the CI XD Instance Should produce artifact that contains the URL admin server of the XD cluster. container servers of the XD cluster,XD-1244,
Application will shutdown all servers with a specific name. Application will take a cluster name parameter. Generate artifact to state success or failure ,XD-1243,
"The deployment of nodes is sequential, we can reduce the time to deploy a cluster greatly by having these tasks execute in parallel.",XD-1242,
"See https quickstart.atlassian.com download bamboo get started bamboo elements Stages are comprised of one or more Jobs, which run in parallel we would like the tests across the rabbit and redis transport to occur in parallel.",XD-1241,
"See https quickstart.atlassian.com download bamboo get started bamboo elements Stages are comprised of one or more Jobs, which run in parallel we would like the tests across the rabbit and redis transport to occur in parallel. ",XD-1240,
Run test application developed in XD 1245 ,XD-1239,
Add a stage to the plan that will stop any instances that the CI process may have started before and relaunch a 2 node install based on rabbit. https build.springsource.org browse XD ATEC2 was created as an empty shell. The running of across different transports will be handled in a separate story along with adding a stage to run a hello world acceptance test. ,XD-1238,
This functionality should be added as a command line option to the main app in the spring xd ec2 project,XD-1237,
Blog post http naleid.com blog 2013 01 24 calling gruntjs tasks from gradle seems to be the definitive reference....,XD-1230,
"Create a project that includes build and test automation for a new Angular based UI. This work is independent of calling the UI build step from gradle. A super minimal UI, just to have some basic code, is all that is required. This should use Grunt Jasmine Karma Bower YUIdoc separate story? UI Components from backbone should be available in the base project. ",XD-1229,
"AbstractSingleNodeStreamDeploymentIntegrationTests is the basis of state of the art testing for a stream that allows you to get a reference to the input and output channel of the stream http filter transform file. One can send messages to the channel after the http module, but before filter and one can retrieve the messages that were sent to the channel after the transform module but before file. The current implementation inside AbstractSingleNodeStreamDeploymentIntegrationTests can be improved in terms of ease of use for end users. The issue is to create as simple a way as possible for a user to test their processing modules stream definitions without having to actually do a real integration test by sending data to the input module. Either as a separate issue or as part of this one, the documentation https github.com spring projects spring xd wiki Creating a Processor Module should be updated to explicitly show how to use this issue s test functionality. ",XD-1228,
"https sonar.springsource.org dashboard index 7173?did 3 Shows which of our current tests take the most time to execute. xd.dirt.stream and xd.shell.command are where the most time is spent. In xd.dirt.stream it seems likely that time can be reduced by not restarting a new single node server per test, but sharing it across tests, e.g. RabbitSingleNodeStreamDeploymentIntegrationTests LocalSingleNodeStreamDeploymentIntegrationTests RedisSingleNodeStreamDeploymentIntegrationTests As a first pass, the test that take longer than 15 seconds in that report should be investigated. ",XD-1227,
"Not sure if this is best done via Sonar our sonar build plan, the nightly one, or the frequent one off master... Open question is if we want to fail a build do to code coverage levels.",XD-1225,
Build should be able to generate code coverage reports. After a quick tour of the intertubes it seems that JaCoCo is a well maintained project and has first class support inside gradle. http www.gradle.org docs current userguide jacoco plugin.html ,XD-1224,
"Currently, there are test data e.g stream name not being cleaned up during teardown especially when there is a test case failure. This breaks the test suite when the same test data is used by other tests. We need to move the cleanup logic at an appropriate level so that the test data is always cleaned up irrespective of the test result.",XD-1223,
"The MBeanServer is referred by XD admin launcher when JMX is enabled by setting jmxEnabled option and this is defined in xd global beans.xml. The MBeans that are exposed by the modules also use the same MBeanServer define above and there is a duplicate MBeanServer definition from jmx common.xml which the MBeanExportingPlugin adds as a component to the module which doesn t seem to be needed. Also, currently the flag jmxEnabled is generic and used by adminserver launcher as well as the module MBeanExportingPlugin. If we have a separate flag to enable the JMX only for modules then, a separate definition of MBeanServer could be necessary. ",XD-1222,
"Currently, the modules project is marked as java project to enable eclipse idea metadata files generation. But it generates a build directory with a jar that has empty MANIFEST file. This build directory also gets copied into the bundle after dist .",XD-1221,
Batch jobs should use application.yml provided connection as default. They now have their own configuration in batch jdbc.properties. This config needs to account for any changes made to application.yml settings so the data is written to the batch metadata database by default.,XD-1220,
"Currently twitterstream emits native twitter json whereas twittersearch uses SI Spring Social and emits spring social Tweet types. This makes it difficult to replace twitter sources and reuse XD stream definitions. This requires coordination with SS 1.1.0 and SI 4.0 GA releases. NOTE I think it s a good idea to continue to support native twitter JSON, keep as an option for twitterstream, but the default should be Tweet types.",XD-1217,
"In distributed batch processing in XD, the JobLocator implementation for getJob String jobName should return a valid Job FlowJob SimpleJob . Since we won t we relying on the MapJobRegistry s joblocator implementation which doesn t work in distributed use case, we need to have an appropriate way to return FlowJob SimpleJob using XD s BatchJobLocator.",XD-1215,
The job names used by the tests should be unique across the tests when use the same JobRepository. ,XD-1214,
"Using JSR303 groups, which should be derived from injected values",XD-1213,
Some boot classes we compile against have changed or been replaced.,XD-1212,
batchHashtagCount and batchWordCount projects need hadoop fs ls instructions need to be updated. ,XD-1211,
This was added in bash scripts as part of XD 1186.,XD-1209,
"For some reason, the partitioned batch jobs are storing StepExecutions s in the DB with a null ID. This causes JobCommandTests.testListStepExecutionsForSpecificJobExecution to fail because the HATEOS code asserts not null... code 18 25 26,185 ERROR http nio 9393 exec 3 rest.RestControllerAdvice 186 Caught exception while handling a request java.lang.IllegalArgumentException Assertion failed this argument is required; it must not be null at org.springframework.util.Assert.notNull Assert.java 112 at org.springframework.util.Assert.notNull Assert.java 123 at org.springframework.hateoas.mvc.ResourceAssemblerSupport.createResourceWithId ResourceAssemblerSupport.java 87 at org.springframework.xd.dirt.rest.StepExecutionInfoResourceAssembler.toResource StepExecutionInfoResourceAssembler.java 39 at org.springframework.xd.dirt.rest.BatchStepExecutionsController.list BatchStepExecutionsController.java 107 code For some reason, the query for objects with the jobExecutionId also returned these two objects with null keys. Blowing away my data directory fixes the problem until I run another partitioned batch job . I need to figure out why spring batch is creating these bad records, but we should probably add some defensive code to protect against null IDs. You can reproduce by building against my XD 1146 branch. ",XD-1206,
The filejdbc jobs isn t included in the test scripts,XD-1205,
"We should use fileName, fileExtension properties and default to xd jobname as directory",XD-1204,
"xd shell is using the default spring shell help command. Need to create a help command specific to XD so that it can list the hadoopDistro command line option. Note, the hadoopDistro command line option is actually processed by the xd shell bash script",XD-1201,
hdfsjdbc throws an exception code org.springframework.beans.factory.BeanDefinitionStoreException Invalid bean definition with name itemReader defined in URL file Users trisberg Projects spring xd build dist spring xd xd modules job hdfsjdbc config hdfsjdbc.xml Could not resolve placeholder columns in string value columns code The hdfsjdbc job uses columns instead of names as the parameter for the column names. Should we make this usage consistent between jobs? There is a comment in the docs there is also a limitation in that the database table must be created manually. This is due to a bug in Spring Hadoop and will be fixed in the future. Think this is this solved in Spring Hadoop now? initializeDatabase should default to false now to be consistent with jdbc sink Rename batch jdbc mongo import.properties to batch jdbc mongo.properties since these aren t just for import,XD-1200,
filejdbc throws an exception code java.lang.IllegalArgumentException Could not resolve resource location pattern mycsvdir .csv class path resource mycsvdir cannot be resolved to URL because it does not exist code This can be solved by using a file prefix Maybe just update the docs? ,XD-1199,
The batch jobs use different defaults compared to some of the sink source modules. filehdfs puts data in a data directory with files named after the stream using a .log file extension. The hdfs sink puts files in an xd streamname directory using .txt as the default file extension. filehdfs needs a more descriptive naming,XD-1196,
see discussion at https github.com spring projects spring xd commit 2f0e80b5e337b71c9c70de510a44d2f050d10fa7,XD-1195,
"If we have default values from Container Admin options, then they can not be overridden by the system properties or system environment. Currently, the only default we have for the Container Admin options is for jmxEnabled option and since it is a boolean it can never be overridden by sys env property XD JMX ENABLED. I think we need to make sure there are no default values assigned for the non boolean Container Admin options and handle the boolean type option separately.",XD-1194,
Add docs to section https github.com spring projects spring xd wiki Batch Jobs pre packaged batch jobs,XD-1192,
"The PropertyResolver needs to follow the below precedence order on PropertySources when resolving the module properties From lowest to the highest order, 0 application.yml 1 applicaiton.yml fragment 2 property placeholders 2a property placeholder under shared config directory 2b property placeholder under module source sink processor config directory 3. environment variables 4. system properties 5. command line ",XD-1190,
NAME?,XD-1187,
"When exporting of MBeans are enabled via XD JMX ENABLED also, jmxEnabled as in application.yml , the Admin and Lancher server application fail to start. Since the admin applications has the same integrationMbeanExporter bean name for IntegrationMBeanExporter as that its ParentConfiguration, there is a naming conflicts and the exception thrown as Same is the case for launcher and its parent configuration Exception in thread main org.springframework.beans.factory.BeanCreationException Error creating bean with name mbeanExporter defined in class org.springframework.context.annotation.MBeanExportConfiguration Invocation of init method failed; nested exception is org.springframework.jmx.export.UnableToRegisterMBeanException Unable to register MBean org.springframework.integration.monitor.IntegrationMBeanExporter 1de40d3e with key integrationMBeanExporter ; nested exception is javax.management.InstanceAlreadyExistsException org.springframework.integration.monitor name integrationMBeanExporter,type IntegrationMBeanExporter at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean AbstractAutowireCapableBeanFactory.java 1553 at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean AbstractAutowireCapableBeanFactory.java 539 at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean AbstractAutowireCapableBeanFactory.java 475 at org.springframework.beans.factory.support.AbstractBeanFactory 1.getObject AbstractBeanFactory.java 304 at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton DefaultSingletonBeanRegistry.java 228 at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean AbstractBeanFactory.java 300 at org.springframework.beans.factory.support.AbstractBeanFactory.getBean AbstractBeanFactory.java 195 at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons DefaultListableBeanFactory.java 700 at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization AbstractApplicationContext.java 760 at org.springframework.context.support.AbstractApplicationContext.refresh AbstractApplicationContext.java 482 at org.springframework.boot.context.embedded.EmbeddedWebApplicationContext.refresh EmbeddedWebApplicationContext.java 124 at org.springframework.boot.SpringApplication.refresh SpringApplication.java 609 at org.springframework.boot.SpringApplication.run SpringApplication.java 321 at org.springframework.boot.builder.SpringApplicationBuilder.run SpringApplicationBuilder.java 130 at org.springframework.xd.dirt.server.AdminServerApplication.run AdminServerApplication.java 60 at org.springframework.xd.dirt.server.AdminServerApplication.main AdminServerApplication.java 42 Caused by org.springframework.jmx.export.UnableToRegisterMBeanException Unable to register MBean org.springframework.integration.monitor.IntegrationMBeanExporter 1de40d3e with key integrationMBeanExporter ; nested exception is javax.management.InstanceAlreadyExistsException org.springframework.integration.monitor name integrationMBeanExporter,type IntegrationMBeanExporter at org.springframework.jmx.export.MBeanExporter.registerBeanNameOrInstance MBeanExporter.java 610 at org.springframework.jmx.export.MBeanExporter.registerBeans MBeanExporter.java 535 at org.springframework.jmx.export.MBeanExporter.afterPropertiesSet MBeanExporter.java 417 at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods AbstractAutowireCapableBeanFactory.java 1612 at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean AbstractAutowireCapableBeanFactory.java 1549 ... 15 more Caused by javax.management.InstanceAlreadyExistsException org.springframework.integration.monitor name integrationMBeanExporter,type IntegrationMBeanExporter at com.sun.jmx.mbeanserver.Repository.addMBean Repository.java 437 at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerWithRepository DefaultMBeanServerInterceptor.java 1898 at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerDynamicMBean DefaultMBeanServerInterceptor.java 966 at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerObject DefaultMBeanServerInterceptor.java 900 at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerMBean DefaultMBeanServerInterceptor.java 324 at com.sun.jmx.mbeanserver.JmxMBeanServer.registerMBean JmxMBeanServer.java 513 at org.springframework.jmx.support.MBeanRegistrationSupport.doRegister MBeanRegistrationSupport.java 195 at org.springframework.jmx.export.MBeanExporter.registerBeanInstance MBeanExporter.java 663 at org.springframework.jmx.export.MBeanExporter.registerBeanNameOrInstance MBeanExporter.java 600 ... 19 more ",XD-1184,
Update to spring data hadoop 2.0.0.M5 when it is released and remove the temporary DatasetTemplateAllowingNulls in spring xd hadoop We should also review the supported hadoop distros think we should support anything that is current stable hadoop12 hadoop22 phd1 PHD 1.1 hdp13 hdp20 cdh4 ,XD-1182,
"When using Value for providing a default value in a module options POJO, make it so that the REST API and hence the module info command advertises that 1 the expression was foo.something 2 to the best extent possible value may come from another property source , tell which config file it came from introspecting the PropertySource annotation ",XD-1181,
"However this is triggered depending on whether https github.com spring projects spring xd pull 477 files is merged yet or not , jmx seems to be broken because of duplicate beans mbeans names",XD-1180,
"Labels should only be used help uniquely identify a module in a stream. The stream definition a x b x c d should throw an error since the label x is applied to two modules. Also ambiguity exists with a stream definition such as http transform transform filter hdfs since a module with the name transform will exist twice, meaning a tap on transform will result in message from both transform modules. To make the naming unique and the usage with taps, the following naming strategy is proposed demonstrated by example. http transform transform filter hdfs http, transform.0, transform.1, filter, hdfs If a use tries to tap on transform, an error would be shown saying that you could try to tap on transform.0 or transform.1 or alternatively use labels. http transform filter transform hdfs http, transform.0, filter, transform.1, hdfs http x transform filter transform hdfs http, x, filter, transform, hdfs ",XD-1177,
Update dependencies to spring data hadoop 2.0.0.M4,XD-1176,
The current behavior when there are global external defaults to module options is to set them in the placeholder construct foo the default where the default is sourced from some properties file. The downside is that the module options infrastructure is unaware of them. Provide support for such defaults at least when using PojoModuleOptions in the form of Annotate a field or the setter? with Value the default maybe Annotate the pojo with PropertySource to indicate the location of the properties file maybe come up with a general naming scheme for the properties file,XD-1175,
Expected benefits are key space value as well as key value on the command line eg XD 1108 nice usage screen ,XD-1172,
"XD container s id is set to use its application context id which is derived from vcap.application.name spring.application.name spring.config.name application vcap.application.instance index spring.application.index server.port PORT null With the default values the PORT is not set and embedded tomcat uses local port , the launcher id is set to application 0 When I have multiple launchers then all the launchers have the same id as application 0 which doesn t seem correct. Do we need to use the Id that is generated at the XDContainer s constructor here? public XDContainer this.id UUID.randomUUID .toString ; ",XD-1171,
The Gemfire CQ source needs some enhancements enable locator configuration consider decoupling from JSON. Currently designed to work with gemfire json server to avoid dependence on specific domain objects on the client and server side. So produces json strings from PdxInstance s stored in the cache. ,XD-1165,
"We should standardize on the options between modules idleTimeout timeout rolloverSize rollover Also, need to standardize on unit used for timeout should this be s or ms? ",XD-1160,
Create a script to sanity check JMS and MQTT,XD-1158,
"Currently, the JobPlugin extends AbstractPlugin and the AbstractPlugin has got lots of unused code like it doesn t do anything with preProcessSharedContext in there. ",XD-1156,
Support all available options,XD-1153,
"Instead of using jobExecutionId and stepExecutionId as two separate options for the job execution step progress command, we can have a single option with id mentioned as jobExecutionId stepExecutionId ",XD-1152,
"Currently local is not a supported data transport for the container. It should be an option. Note that local is not valid for control transport for a standalone container. So we need to revisit the current semantics that default the control transport to be the same as the data transport, i.e. , transport local should fail. ",XD-1148,
"Need to clarify if this means alternate transports within a stream, e.g source rabbit processor redis sink or specifying that a stream use an alternate transport to the one configured for the container. ",XD-1147,
"The TriggerSourceOptionsMetadata class should be able to use an actual Date object, thanks to Spring binding conversion. BUT, the date construct will receive a toString version of it. Make sure this works properly",XD-1145,
The initial parsing of a stream job definitions into a list of ModuleDeploymentRequests needs to be transformed into a Physical Deployment Model that takes into account 1 module co location 2 partitioning 3 number of instances 4 node assignment an potentially other data related to the runtime properties of a module e.g. concurrency settings The an external DeploymentManifest will be used to capture this information. A deployment of a stream or job will then need to optionally provide a reference to deployment manifest.,XD-1144,
"Base matching algorithm on the model used in http research.cs.wisc.edu htcondor Jobs Stream specify their requirements and preferences Nodes specify their requirements and preferences e.g. A job stream module requires a linux x85 64 platform and prefers the machine with the most free memory A node requires that only only can run jobs when there is 25 or more free memory and it prefers to run stream modules over job modules. The requirements and preferences are represented as SpEL expressions in a Advertisement data structure. There is a require expression and a preference expression. Matching occurs between Node Ads and Job Stream Ads so that the requirements of both Ads evaluate to true and the matching nodes are ranked according to the preference expression. The Job Streams Ads can make use of well defined attributes about the nodes, such as it s memory cpu usage.",XD-1143,
Each node in the cluster advertises itself and the admin node listens to these ads and creates groups out of them. The deployment of jobs and stream processing can then be deployed onto a specific group and specific nodes within the group. The project https github.com spring projects spring data grid is the start of this model.,XD-1142,
"For several Batch Job related JSON endpoints, we serialize too much information.",XD-1138,
"When a ModuleOption is backed by an enum, change the currently String type representation to be the possible values ie java.lang.String String but traffic.Light Red Green Orange",XD-1137,
This causes intermittent test failures when testing streams with other transports since ModuleDeployer receives duplicate requests from multiple threads. Fix is to check for local transport before invoking setUpControlChannels ,XD-1135,
need to add a Dxd.home XD HOME to the start scripts else all files will write to the logs directory. Need to update .bat files to use for env variables instead of . Need to rename logger.config to logging.config so that boot will pick up the log config files. Admin needs to use xd admin logger configs instead of xd container logger Renamed logging file for singlenode from admin.log to singlenode.log,XD-1134,
"See https github.com spring projects spring xd pull 415 issuecomment 29024329 This test should be created so that it reproduces the failure and then turned off, so that when we switch to the new HDFS writing code ",XD-1133,
"EC2 Deployer Needs to change its configuration behavior to use environment variables vs. the property files Remove ConfigureSystem class, since we will use environment variables instead Allow users to set environment variables via the xd ec2 properties. If properties are not present use those that are available in the application.yml Utilize JClouds environment variable setup features to implement this behavior.",XD-1130,
This could be inside gradlew or a .settings file.,XD-1129,
"This is a very big story, needs some planning discussion before starting work. Should be able to be implemented as a plugin. ",XD-1127,
"Following merge of XD 953, provide module options using the simple approach where applicable",XD-1125,
"Example noformat xd module delete name sink file 12 31 19,495 WARN Spring Shell client.RestTemplate 566 DELETE request for http localhost 9393 modules sink file resulted in 500 Internal Server Error ; invoking error handler Command failed org.springframework.xd.rest.client.impl.SpringXDException Cannot delete non composed module sink file noformat The WARN log is redundant with the command result and should be silenced",XD-1124,
Following merge of XD 1109. See discussion at https github.com spring projects spring xd commit eaf886eab3b2ef07da55575029ccabb2c8a36af9 commitcomment 4701947,XD-1122,
2 forces at heand here Spring binding validation itself jsr303 for eg NotNull ,XD-1121,
"We should we centrally standardize on date time formats so that we don t create inconsistencies, and follow ISO 8601 internally. Internally we should only work with UTC or make that the default config option . Ultimately, whatever the user sees is just a formatting concern.",XD-1120,
We need to create a shell script that calls the batch DB creation sql files for the JDBC option selected. ,XD-1119,
We no longer validate the hadoopDistro options in the xd scripts. Seem sthe classes doing this validation were removed for boot. We do this validation in the xd shell script,XD-1115,
We have observed in unit tests see AbstractSingleNodeStreamIntegrationTests that Redis SingleNode occasionally fail. The root cause must be investigated further but there is some evidence to suggest that the control messages ModuleDeploymentRequests are not always received and handled by the ModuleDeployer. This does not produce an error but results in runtime stream failures. This problem may be resolved as part of the planned Deployment SPI but is being tracked here until we are certain that it has been resolved.,XD-1114,
"ApplicationContext ID generation is difficult in general. Cloud Foundry solves this problem for us by providing unique instance ids to all running instances of an app. I'don t suppose that helps much in the general case though, and we need something a rule of thumb that is unique and preferably deterministic, so that nodes retain their ID across process and connector restarts. In Cloud Foundry the instance id plays a vital role and will be automatically picked up by the app and applied need to look at how that plays in a context hierarchy . User can set the context id manually using spring.application.name and spring.application.index .",XD-1113,
"Spring Boot support port scanning if you set server.port 0 and disable with 1 , so we could make that the default for the container node.",XD-1112,
The following keys remain after running the test suite code redis 127.0.0.1 6379 keys 1 containers 2 containers.application 9292 code ,XD-1111,
"Currently, the JobRepoTests use the same batch job repository that the XD runtime uses. Since the batch job repo doesn t delete the job instances, there would be stale data from this test. ",XD-1110,
"Wherever they come from cmd line args or ENV VARS , options such as transport, analytics, etc should be validated and issues should be reported to users",XD-1109,
Restore foo bar as well as foo bar Validation of values should be done as a separate story,XD-1108,
"Currently, the tests use instantiated DistributedJobService object instead of a simple mock. We can just use mock object for the tests.",XD-1107,
"Even though it may be hard to come up with a mqtt broker, an easy test that should be automated is somesource mqtt topic foo with mqtt topics foo somesink And asserting that what is emitted to somesource ends up in somesink. ",XD-1105,
"Would be nice to have some kind of regression testing on the jdbc sink, as it becomes more prominent in XD. Use of an in memory db where we expose eg a JdbcTemplate to assert state",XD-1104,
would be good to have a general feel for the general performance of these two options. Redis can run on the same node as the benchmark.,XD-1102,
The way we now include various Hadoop distributions is cumbersome to maintain. Need a better way of managing and isolating these dependencies on a module level rather than container level.,XD-1097,
"Currently, the BatchJobsController and BatchJobExecutionsController are not HATEOAS compliant and we need make them so.",XD-1096,
"This should go in the first section of the Batch Job documentation. Here is a rough suggestion The lifecycle of a job in XD. 1. Register a job module with the MoudleRegistry by putting a XML jar files in the XD HOME modules jobs directory. 2. Create a job definition from a job module by providing a name and properties that apply to all job instances can be configured at this point. The job is not yet deployed 3. Deploy the job to an xd container. A job instance can not be created by sending a message to a job queue that contains optional runtime job parameters 4. Launch a job by sending a message to the job queue with job parametres. A Job Instance is created, representing a specific run of the job. A Job Instance is the Job Definition plus the runtime job parameters. You can query for the Job Instances associated with a given job name 5. The job is executed creating a Job Exection object that captures the success or failure of the job. You can query for the Job Executions associated with a given job name. 6. Undeploy a job. This removes the job from xd container.",XD-1081,
"The automatic deployment of the job makes it harder to understand the lifecycle of the job and also does not allow for the opportunity to define any additional deployment metadata for how that job runs, e.g is it partitioned etc.",XD-1080,
BatchJobsController.listForJob should be executionsForJob BatchJobsController.jobInstances should be instancesForJob The JavaDoc for the class and each method should be more descriptive about their functionality ,XD-1079,
Develop out a Proof of concept for review that allows users to easily create a new module to Spring XD. Key features to be enabled 1. Allow existing modules to be included as a classpath dependency 2. Consolidate shared libraries in existing modules e.g. a shared lib for all gemfire modules 3. User develops a module as a normal Java project 4. User s project can then be added to a runtime container in the same way as a dependency Nice to have 1. at development time container can run continuously and pick up changes from user s module project. 2. Java config for a module. 3. command line functionality to create project scaffolding. ,XD-1077,
This is along the lines of what is in this blog post http coreyreil.wordpress.com 2012 12 21 spring batch creating an ftp tasklet to get remote files Note that there have been some new developments in SI to get at the underlying stream for FTP. The way to test this is to create a new batch job in XD that has this as it s tasklet. Going forward the target file system will also be HDFS.,XD-1076,
Migrating to boot dropped the XD banner and its info. Can be restored using eg a boot Initializer and removing the default boot banner,XD-1075,
"Summary says it all. When starting, we now get noformat SLF4J Class path contains multiple SLF4J bindings. SLF4J Found binding in jar file Users ebottard .gradle caches artifacts 24 filestore org.slf4j slf4j log4j12 1.7.5 jar 6edffc576ce104ec769d954618764f39f0f0f10d slf4j log4j12 1.7.5.jar! org slf4j impl StaticLoggerBinder.class SLF4J Found binding in jar file Users ebottard .gradle caches artifacts 24 filestore org.slf4j slf4j log4j12 1.6.1 jar bd245d6746cdd4e6203e976e21d597a46f115802 slf4j log4j12 1.6.1.jar! org slf4j impl StaticLoggerBinder.class SLF4J See http www.slf4j.org codes.html multiple bindings for an explanation. SLF4J Actual binding is of type org.slf4j.impl.Log4jLoggerFactory noformat Most certainly introduced by 1c4817ee60ae9325f6394dcc78aa803c47818546 or 72baec92f2e7bbe860b4a9dc6c994536c1670881 ",XD-1074,
Change the default port since it conflicts with the default port for the http source,XD-1073,
"for example, the following should work code xd stream create a1 definition queue a transform expression payload a log Created new stream a1 xd stream create b1 definition queue b transform expression payload b log Created new stream b1 xd stream create s1 definition http router expression payload.contains a ? queue a queue b Created new stream s1 xd http post data ha POST text plain;Charset UTF 8 http localhost 9000 ha 200 OK log shows ha a xd http post data hi POST text plain;Charset UTF 8 http localhost 9000 hi 200 OK log shows ha b code This needs to be tested against all transports local, redis, and rabbit ",XD-1064,
"Use of dot in property name prevents the user from specifying a value in stream definition Also, defaults are repeated at .xml and .properties level",XD-1063,
Looks like we need to spend a cycle on Asciidoc as we still have the author tag issue I thought we can simply upgrade the asciidoctor gradle plugin to 0.7.0 currently 0.4.1 but that breaks the docs being generated.,XD-1061,
"apologies if a ticket already exists for this, but I'didn t see one I spun up the Hortonworks Data Platform 2.0 sandbox, but see it isn t supported by Spring XD yet. How hard would it be to add these Distro s in? Is it just a matter of dropping in a lib folder for hadoop22 and or hdp20, and allowing those and options to be passed in via the hadoopDistro option? I m currently trying to work through the following tutorial, but using the HDP 2.0 sandbox instead of the 1.3 sandbox http hortonworks.com hadoop tutorial using spring xd to stream tweets to hadoop for sentiment analysis Thanks!",XD-1060,
"Currently, the bootstrap.less file has all the styles that the bootstrap supports. But we should only add compile the LESS that are needed by XD UI.",XD-1058,
The table background color on the Job Definition Tab is green while the others tabs have a white background. They should be consistent.,XD-1057,
Job gets a empty key value pair when launching the job from the admin ui.,XD-1056,
"I know that the feature is not ready, but we either should post a message to the user that the feature is not available or hide the button",XD-1055,
The deployment tab does not reflect the current state of the jobs. User must hit browser refresh button to make it work.,XD-1054,
"e.g. see comment on PR 390 https github.com spring projects spring xd pull 390 files r7563787 In that case, it s delete in one place and destroy in another. There are other cases as well.",XD-1052,
"note from PR 365 quote We should probably create a new story to at least rename module display to module showconfig or something, but possibly even reconsider it altogether. In some sense, it s even violating the encapsulation of ModuleRegistry. It wont work for java config style modules or spring integration Groovy DSL modules. Personally, if anything, I'd rather see those config files themselves exposed as part of an admin UI. What you are doing with the options here fits better with the encapsulation principle and the fact that typical usage should not require detailed knowledge of the actual underlying configuration of a Module. quote ",XD-1051,
"note from PR 365 which has been merged providing the initial level of support... Pending issues to be addressed in another PR? x complex case x default values for complex case, when option is not surfaced back to the module eg suffix in our canonical example plugin provided options and values descriptive defaults instead of actual defaults e.g. use stream name JSR303 Validation ",XD-1050,
"this would elminate dependencies that are currently in the codebase, such as RESTModuleType and ModuleType enums ModuleOption and DetailedModuleDefinitionResource.Option ",XD-1045,
see comments on this PR which is part of the code that needs to be refactored https github.com spring projects spring xd pull 390 ,XD-1044,
"Currently the parser returns a List ModuleDeploymentRequest , and the deployer works with that list directly. We need a higher level parser result e.g. DeployableStream or probably a better name after some thought that can encapsulate that list while also enabling metadata to be added. That metadata may be helpful for composite module information as well as the module dependencies of a given stream including any composed modules within that stream .",XD-1043,
"The ModuleOptions PR currently uses FQN for types eg java.lang.String Would be nice to have support for short names for common types, both in the properties files and the annotation",XD-1042,
Make sure the sinks and jobs work against Pivotal HD 1.1,XD-1041,
See the discussion in https github.com spring projects spring xd pull 370 There are now various superseded classes and tests which we no longer need.,XD-1040,
"Although composition of a module out of an already composed module seems to work at the module compose level, trying to deploy a stream with that more complex module fails with at org.apache.coyote.AbstractProtocol AbstractConnectionHandler.process AbstractProtocol.java 589 at org.apache.tomcat.util.net.JIoEndpoint SocketProcessor.run JIoEndpoint.java 312 at java.util.concurrent.ThreadPoolExecutor.runWorker ThreadPoolExecutor.java 1145 at java.util.concurrent.ThreadPoolExecutor Worker.run ThreadPoolExecutor.java 615 at java.lang.Thread.run Thread.java 724 Caused by java.lang.IllegalArgumentException each module before the last must provide output at org.springframework.util.Assert.notNull Assert.java 112 at org.springframework.xd.module.CompositeModule.initialize CompositeModule.java 132 at org.springframework.xd.dirt.module.ModuleDeployer.deploy ModuleDeployer.java 234 at org.springframework.xd.dirt.module.ModuleDeployer.deployModule ModuleDeployer.java 224 at org.springframework.xd.dirt.module.ModuleDeployer.handleCompositeModuleDeployment ModuleDeployer.java 180 at org.springframework.xd.dirt.module.ModuleDeployer.handleMessageInternal ModuleDeployer.java 129 at org.springframework.integration.handler.AbstractMessageHandler.handleMessage AbstractMessageHandler.java 73 ... 63 more",XD-1039,
"With the following semantics assuming http filter transform composition Fully qualified names always available eg filter.expression using module type as key or label if ambiguity Simple names available if no ambiguity eg here port refers to http.port As per discussion VIII Use of expression option in composed module filter filter Should not be supported require FQN always Should pertain to first filter module always Should pertain to all modules with an expression option here both filters Should fail if not qualified and ambiguity. Use label.expression or type.expression, eg if we had filter transform see VII nesting1.nesting2.nesting3.expression MF VIII Use of expression option in composed module http filter expression something transform Should not be supported already valued Should pertain to first filter module always Should pertain to all modules with an expression option here both filters Should fail if not qualified and ambiguity. Use label.expression or type.expression, eg if we had filter transform see VII nesting1.nesting2.nesting3.expression MF ",XD-1037,
"Provided it is not currently used in any stream V Attempt to destroy a composed module Should not be supported at all Should not be supported if involved in at least one stream EB?, MF! Should be supported and have no other consequences whatsoever see IV EB? Should be supported and invalidate destroy streams involving it ",XD-1036,
"As per discussion, any attempt to create something that would collide with existing should fail II Attempt to create a composed module with same name as an already existing, not composed module, with same type should fail EB, MF should work and shadow previous module from now on III Attempt to create a composed module with same name as an already existing composed module, with same type should fail EB, MF should work and shadow previous module from now on should work and retroactively change definitions of streams with that module ",XD-1035,
"This relates to XD 871 which provides a good scenario. stream create s1 definition http log deploy stream create s2 definition http log deploy The second command results in an error message that the port is in use but the stream definition is still saved. Since create deploy is a logical unit of work, it should follow transactional semantics. In other words if the deploy fails, the repository should be rolled back or a compensating destroy should be performed . Note this should not be handled the same way if create and deploy happen separately. In that case, the stream definition should remain.",XD-1034,
"Add a module that can act as a tcp client as opposed to our current tcp module, which acts as a server, waiting for an incoming connection Also, the module should allow to send commands to the remote server. The typical minimal case for such a protocol is to send PING messages, but a stateful mechanism should be put in place for more complex cases.",XD-1033,
"rename spring xd extension hdfs to something else, as it seems it is all spring data stuff and is not coupled to xd. But leave it in extensions for now rename and move spring xd hadoop inside extensions maybe to spring xd extension hadoop or hdfs make hadoop related modules depend on the latter which itself will depend on the former ",XD-1032,
"Use a modal dialog to specify runtime parameters. There should be a little text are that gives hints as to the spring batch parameter key value conventions, e.g. for type. Might be a good idea to have a checkbox that lets you select to auto increment job instance number. 4 columns key, value, type, identifying and an add parameter button that adds a new row. This would appear as a modal dialog box, polling of the state of the deployments would be suspended while the job parameter modal dialog box is shown. ",XD-1031,
Specify the default URL as code urlRoot location.protocol location.hostname location.port ? location.port code ,XD-1028,
The current admin UI uses bootstrap 3.0.0 which provides responsive design. We need to expand our scope to support all supported user agents. This requires changes to use user agent specific layout for the UI views.,XD-1026,
"From XD 1023, the job status deployed undeployed is available from JobInstance Repository and a job can be deployed undeployed correctly. Implement Job deploy undeploy for a given job from JobDefinitions page and indicate status of the job definition deployed undeployed .",XD-1025,
"The current XD uses an inadequate MessageRedisSerializer when extractPayload is false not currently being used . When porting this to SI, the serializer will be dropped. Suggest creation of Kryo serializer for Messages for when Redis source sinks are created.",XD-1024,
"Job deployment currently goes through an overloaded version of deploy that takes 4 parameters. This prohibits job handling code from benefiting from common behavior and eg currently breaks deployAll Given that the 3 additional parameters are in fine handled as module parameters, let s push them to the job definition, known at creation time, rather than at deployment time as it does not really make sense to change those between deploys ",XD-1023,
"The module list command currently has a very simplistic two column display of module name, module type . The is not very readable. Switch to a 4 column display Sources, Processors, Sinks, Jobs Additionally, mark composed module e.g. myhttp c ",XD-1022,
Create a composed module Create a stream that uses that module Try to undeploy the stream. Kaboom The dispatch is not correctly implemented in ModuleDeployer,XD-1021,
"ModuleDeployer has many methods with very similar names that are hard to understand. Moreover, there is a substantial amount of duplicated code that should be extracted in sub methods with descriptive names. One should even consider splitting the class ",XD-1020,
"Probably the cleanest approach is to provide a properties file in the xd config directory that enables this globally, e.g., json.pretty.print true. This will require some refactoring of the ModuleTypeConversion plugin, i.e., use DI in streams.xml",XD-1016,
"Create a reusable responsive UI layout to render the PagedResources returned from REST endpoint. As part of this, try upgrading the bootstrap to 3.0.0 and use the responsive styles offered in it.",XD-1015,
Currently HSQLDB is the only option for batch jobs. This should be configurable so that a user may select another JDBC data store option. Steps hsqldb.properties needs to be changed to batch jdbc.properties hsql prefixes should be changed to batch jdbc JDBC Connection String needs to be configurable JDBC Driver needs to be configurable The Setup Scripts to be used for spring batch need to be configurable. HSQLServerBean should be renamed to something batch jdbc.properties Tests Should be able write tests that support HSQLDB,XD-1012,
"Currently, the jobs definition list REST endpoint doesn t include deployed undeployed status on a given job.",XD-1008,
"On clicking the job detail page, we should display all the step executions associated with the specific job execution in a table view.",XD-1007,
"On clicking details link on a job execution row, user should see the job details. Job detail page will show all the information about the job, where as the table listing of jobs on the Execution tab may have omitted some columns or aggregated values to convey information more easily.",XD-1006,
"On clicking the Executions tab, user should see the list of all batch job executions. There should be options to filter job executions by few criteria such as by Job name , execution time etc., ",XD-1005,
"From the Deployed jobs page, by clicking the Schedule button on a specific deployed job row, user should be able to schedule this job with 1 Cron trigger with cron expression as a source to job launching named channel 2 Fixed rate delay trigger as a source to job launching named channel ",XD-1004,
"From the Deployed jobs page, user should be able to click on the Launch button on a specific job and specify the Job parameters as key value pairs in the text box and we will convert that into JSON string as JobParameters into JobLaunch request. ",XD-1003,
"On clicking a specific job name in the deployed jobs list, we need to redirect the user to show the list of all the job executions on that job. User should be able to navigate back to the deployed jobs list.",XD-1002,
"On clicking the Deployed Jobs , we can have a table view of all the deployed jobs. This is again a responsive table layout with all the job definitions with status deployed . The deployed XD job corresponds to a single batch Job Instance. This story addresses the UI layout changes to display existing JobInstance information.",XD-1001,
"Create a tab view with tabs Job Definitions , Runtime Jobs Deployed Jobs?, Job Instances Is Runtime Jobs a better name here? and Job Executions . On clicking Job Definitions tab, we can have a table view of job definitions. Since we bootstrap.js, we can have a responsive table layout to list all the available job definitions. At the REST layer, jobs provides the list of job definitions. We can expand the JobsController list s QueryOptions to add more criteria especially to list JobDefinition s status Deployed Undeployed . Also, this is the UI implementation for the shell command job list ",XD-1000,
"Related to https jira.springsource.org browse BATCH 2109 DistributedJobService listJobExecutionsForJob overrides SimpleJobService listJobExecutionsForJob and does not include the StepExecution s. This is due to serializion issues with Jackson. In order to fix this, we need to add a Jackson MixIn. ",XD-999,
"Need some sample usage, docs for https github.com spring projects spring xd tree master modules source gemfire ",XD-998,
"Support for partitioning on a field, e.g. date.",XD-997,
"Some tests esp. ModuleClasspathTests.testModuleWithClasspathAfterServerStarted seem to fail because of a race condition. Add a Hamcrest matcher that knows how to read the content of a FileSink Source and refactor those to read like e.g. assertThat fileSink, eventually hasContent foo ",XD-995,
Writing POJOs using Kite SDK ,XD-994,
Support for using compression when writing Sequence Files Either block or record based compression. ,XD-993,
Support for writing Sequence Files Without Compression Need a means to specify the key value to be used ,XD-992,
"Same setup as XD 987 for ItemReader and ItemProcessor, but should write to HDFS. One can assume that the table structure has been created already external to the batch job execution.",XD-988,
The ItemReader will read multiple files from HDFS and the data will be converted to a tuple data structure The ItemProcessor will be a no op groovy script. The ItemWriter will write the data to a MongoDB collection A TupleToDBObject converter will need to be developed. the sample job should be documented ,XD-987,
"Same processing as XD 984, but the job instacne is launched via an event from the input file source. Supporting a single file per job launch is OK. job create blah definition filehdfs stream create csvStream definition file ref true dir Users luke pattern .csv job blah the job should be documented ",XD-985,
"Create a sample batch job for inclusion in the distribution that will perform the following tasks. ItemReader Read a from a directory with multiple files configurable Support for CSV assume first line has header values Convert to tuple data structure ItemProcessor Provide groovy based no op ItemProcessor. configurable ItemWriter Write to JDBC. Provide Assume there is an DB instance running somewhere, specify connection info configurable The sample job should be documented ",XD-984,
We used to have a shared guava 11.0.2.jar dependency in the lib dir. That s no longer there so hadoop distros that require this now fail at least any hadoop 2.0.x based ones We should also upgrade to current Hadoop versions Hadoop 2.2 stable ,XD-981,
"Update the Deployer class to add the following methods RunningInstance deployContainer For each of the containers Using XD 977 install distribution Setup XD HOME variable Create configurator directory Copy the configurator to containers Run Configurators Verify that configuration files are setup correctly start container server Report if container started. using jmx Jolokia, if available If it didn t start report failure but continue. Report public DNS name of container Integration Testing Verify that config files have been setup properly For each container Verify container has been started Verify that container is working by creating a stream in admin trigger log . Verify that the log on the container is being updated. ",XD-980,
Create a Deployer class has methods RunningInstance deploySingleNode takes into account machine size as specified in properties file void destroyAllInstances or whatever JClouds returns from the destroy call ctor gets passed in the root boostrapping credentials. Install Script Steps Setup XD HOME variable Make sure privileges are set to ubuntu not root. start up redis and rabbit using ports as specified in xd ec2.properties Use port watch to make sure they started Start singlenode after configuration. Display hostname of singlenode server Report successful and failed startup Hit root of xd admin to see if there is a response on 9393 Integration Testing Verify that config files have been setup Verify XD has been started Verify XD can process a basic http post ,XD-978,
User specifies download distribution zip file from properties file. See XD 969 for key value pairs Copy the distribution from the shared EBS S3 the ebs volume assigned to the each node admin instance . If not on shared ebs s3 pull from http site specified by user and put on the shared EBS volume. Unzip the distribution from on the ebs volume for the instance to the home ubuntu directory make sure privileges are set to ubuntu not root. How to verify it works Create a JUNit style integration test that Deletes a known .zip distribution from EBS S3. Invoke the application functionality should be a 1 liner that will start up the instance and download the .zip distribution from the URI provided in xd ec2.properties. Verify the file is now in EBS S3 and also on the instance Tear down created instance Create new instance passing in the same URI of the .zip distribution. Verify as before ,XD-977,
"Create a Spring application context. XML or Java, dealers choice Use XD eclipse code format policy Create Source Package structure Create Test Package Structure Gradle build JClouds and Spring deps ",XD-976,
"Get a java.io.File and copy it into HDFS. Could be text or binary. Write compressed with Hadoop and third party codecs see XD 277, XD 279 should initially support bzip2 LZO ",XD-974,
Automated test will use directly use the Deployer class asserts on basic info of RunningInstance check that EBS was mounted that application was unzipped redis and rabbit are running via port checks http requests on admin port for root path list of modules AfterClass that will look for the cluster name and terminate all instances Look at live tag in JClouds tests for some additional tactics ,XD-972,
Update the Deployer class to add the following methods RunningInstance deployAdminServer The install script steps Using XD 977 install distribution Setup XD HOME variable start up redis and rabbit using ports as specified in xd ec2.properties on admin server Create configurator directory Copy the configurator to containers Use port watch to make sure they started start admin server use port watch to make sure the admin started on 9393 Report if admin server started. If it didn t start abort install. Report public DNS name of admin server Integration Testing Verify XD admin has been started Create a basic stream trigger log and make sure we get a success code from xd admin was received. Query the redis to see if the stream was created. ,XD-970,
"The Application should Create a Spring Application Context. Should take a command line parameter config that will point to a property file with key value pairs specified below. By default the file xd ec2.properties will be looked for on the classpath Associate EBS shared volume for each machine instance Packaging Use gradle application plugin to generate a bin directory with a script to start the application. Seehttp www.gradle.org docs current userguide application plugin.html The config file xd ec2.properties should be in a directory ideally a config directory parallel to bin and will be loaded by the application by default loading via the CP is probably the easiest way. Create a POJO to easily reference these properties, vs. using a raw java Properties object. How to verify it works Integration testing Create JUnit based tests. JClouds itself has extensive testing, can look at those for structure. Verify what you created has been installed. Verify ports are open Instance Information EBS of 50GB Base for each instance. Report successful and failed Instances. Key Value pairs in configuration file properties may include cluster name a name describing the cluster you are creating aws access keys the access key assigned to you by admin aws secret key the secret key assigned to you by admin private key file the private key file assigned to you by admin. Used for ssh ing into multi node true false if true then installer will run the number of nodes as enumerated in the number nodes property value. if false the installer will start a single node server number nodes The number of nodes containers to deploy for this cluster. Value is an integer 0 machine size The size of machines to be assigned for admin and nodes. small, medium, large redis port 6379 rabbit port 5279 xd dist url The url to download the XD to install. for example http blahblahblah.zip ami The ami image to use for your cluster. for example ami dfadsfdadf ",XD-969,
Logging into your XD Account For Example https 946513944028.signin.aws.amazon.com console Discuss how to terminate running instances. Users can terminate all instances using the UI on the EC2 admin page Usage monitoring via CloudWatch Investigate what metadata in each instance is required so that cloudwatch can track ,XD-968,
Add instructions to github wiki on the usage of the installer ,XD-967,
Setup groups for xd user Setup privileges so users can only see their instances Setup user accounts Send created access key to users Send username and passwords to user ,XD-966,
Currently . gradlew clean test fails since the module dependencies are not packaged before the test task. ,XD-962,
"Here is an example the following request for streams http ec2 23 20 25 30.compute 1.amazonaws.com 9393 streams Returns This XML file does not appear to have any style information associated with it. The document tree is shown below. errors xmlns atom http www.w3.org 2005 Atom error logref HttpMessageNotWritableException message Could not marshal PagedResource content links http ec2 23 20 25 30.compute 1.amazonaws.com 9393 streams ticktock ;rel self , metadata Metadata number 0, total pages 1, total elements 1, size 20 , links null; nested exception is javax.xml.bind.MarshalException with linked exception com.sun.istack.SAXException2 unable to marshal type org.springframework.xd.rest.client.domain.StreamDefinitionResource as an element because it is not known to this context. message error errors ",XD-961,
This is currently missing and probably supersedes some of the stuff that s in there now.,XD-955,
"Provide the infrastructure for HTTP GET completions?start http file d that would return a list of possible completions in this case returning the file option names that start with d This story is about and only about Having that REST controller, delegating to some CompletionsEngine Implementing the Spring Shell Converter that talks to that It s an empty shell, useless but easy to do without the actual CompletionsEngine ",XD-954,
"Module options are currently implemented using PropertySourcesPlaceholderConfigurer, doing simple text replacements. This story proposes to introduce a richer model for module options, which could take the following xml representation keeping in mind that there would be an underlying set of classes that could also apply to e.g. Configuration approach code xml xd params xd param name port help the http port to listen on xd params code So, the very first obvious benefit is providing help metadata. The second one is an easy way to list available option names, without resorting to brittle PropertySourcesPlaceholderConfigurer hacks we wouldn t for example detect xd.stream.name or XD TRANSPORT as a valid option One could also specify defaults computations, this time benefiting from SpEL everywhere code xml xd params xd param name directory default headers.directory xd params code Lastly, this opens the door to better type checking combinations optionality support code xml xd params valid fixedDelay cron xd param name fixedDelay type int xd param name cron type string xd params code The valid attribute can e.g. be evaluated by SpEL. Some final remarks That construct can be compatible with our current approach by behaving as a PropertySource itself instead of creating a PropertySource, the StreamPlugin would give this new bean the java.util.Properties Plugins could benefit from a hook in that construct and advertise the fact that they expect provide new options e.g. inputType There is a slight problem though, which is that if this construct lives in the same AppContext as the module definition itself, then the AppContext needs to be refreshed for the logic to kick in. One could circumvent that using profiles, or we could rely on a different filename convention e.g. module params.xml ",XD-953,
TBD,XD-948,
SPI for deployment on to YARN Local dirt cluster.,XD-947,
See Epic https jira.springsource.org browse XD 234,XD-945,
"If you create a simple http log stream and list the modules, you ll see that JobPlugin adds its numberFormat, makeUnique, etc properties. Even though they do no harm, it s really strange for users. Plus, it could conflict with e.g. activation of profiles given present properties",XD-943,
"Now that XD 924 is merged, we can convert splunk, twitter and gemfire modules to rely on the newly created projects. The hadoop module will get its own story, as classpath handling is a bit more tricky for that one. From there on, no new dependency should be added to DIRT for the sole purpose of a module. Rather, it should directly be created as a CP aware module and project.",XD-941,
The RuntimeContainersController from PR 340 returns the list of runtime modules. Instead we need make it pageable.,XD-939,
"With PR 340, listing of runtime modules with a non existent containerId will display empty table. Instead, we can throw exception saying Container doesn t exist.",XD-938,
"Currently, ModulesController creates the ModuleDefinitionRepository instance with ModuleRegistry. Instead, we should inject the moduleDefinitionRepository into ModulesController directly.",XD-937,
"We need a way to find the runtime module info by module type source , sink , processor , job . ",XD-936,
Currently TupleCodec uses JSON for serialization deserialization. It should use Kryo. This will require some customization and potentially changes to Tuple to address the Tuple s conversionService field. ,XD-935,
Register a JSON to Object converter in the DefaultContentTypeAwareConverterRegistry. Currently we only support Object to JSON but not the other way. This may or may not work for an arbitrary object but is useful in many cases.,XD-934,
See https github.com spring projects spring hateoas issues 89 Updating HATEOAS version and removing in a lot of controllers should be possible now. See eg https github.com spring projects spring xd blob 4919ea2498a13ef47aaa9437937308fb26a7a24f spring xd dirt src main java org springframework xd dirt rest XDController.java L219,XD-933,
This is cause generally by someone having port 9100 hsqldb port in use. It is recommended that setup checks to see if port is in use. If it is throw an exception stating that hsqldb port 9100 is in use and suggest options like. Free up the port or change the hsqldb port.,XD-932,
"The runtime module properties requires a format option when displayed in the Shell Based on the PR https github.com spring projects spring xd pull 340 , the module properties are stored as String and displayed as is. ",XD-931,
"The aggregate counter query result currently returns the interval that is passed in, whether it is aligned with the bucket resolution requested or not. It would be more intuitive if the time values returned are rounded down to the resolution of the query i.e. whole minutes, hours, days or whatever .",XD-930,
"In the testmodules.source Rename source config to packaged source Rename source config to packaged source no lib All xml files should be prefixed with test. i.e. testsource, testsink Make sure all tests pass with new configuration",XD-928,
Remove ModuleType.getModuleTypeByTypeName. All code should use the enum. ,XD-927,
"Similar to what is done for e.g. hadoop, reactor, and http, some of the classes in the .x package namely gemfire, splunk, twitter should go in dedicated albeit small projects. This would enable further modularization see XD 915 ",XD-924,
"As a user, I'd like to be notified when a exception is thrown in a module so that I can tap into an error channel to receive the failures for each stream module. ",XD-923,
"SingleNode server needs to stop cleanly with stopping both the admin server container server. Also, all the tests that require SingleNode main server needs to handle the server shutdown appropriately.",XD-922,
"Not everyone may be familiar with MQTT, or esp. with MQTT inside Rabbit",XD-921,
json parameter is no longer required. Use outputType application json instead,XD-919,
"See also XD 903, XD 915 A lot of dependencies have been added with the compile scope as an oversight over time. Some of them are only required at runtime, some may not be required anymore.",XD-918,
Enhance the stream parser to take message conversion into account in order to validate or automatically configure converters. For example noformat nopanel true source outputType my.Foo sink inputType some.other.Bar is likely invalid since XD doesn t know how to convert Foo Bar. noformat ,XD-917,
"File source should output either the File itself serialized File object or the contents as a byte . This option is configured by a parameter contents true. The byte may be converted to a String using XD Message Conversion, e.g., output text plain;charset UTF 8",XD-916,
"Once XD 887 is merged, gradually convert more modules. Recipe 1 Move the module .xml file to module config module .xml 2 Declare a module. type . module gradle project 3 Move dependencies from dirt project to newly created module project 4 gradle build picks it up. gradle clean build manual test Also have a look at gradle cleanEclipse eclipse",XD-915,
"See issue https jira.springsource.org browse XD 862 The docs should be updated to include examples that show how to use the standard SpEL based splitter, transformer, filters with jsonPath expressions.",XD-914,
The XD build breaks with Gradle 1.8 due to some changes in dependency resolution.,XD-913,
Users need to register custom message converters used by modules.,XD-912,
Should keep the critical error count as close to zero as possible.,XD-911,
Offers the functionality to make http request to a web service. i.e. outbound http gateway. Example implementations stream create name foo definition trigger rest reply timeout 1 url http earthquake.usgs.gov earthquakes feed geojson all day log stream create name foos definition trigger payload lat 34.0567006 lon 84.34368810000001 site all smap 1 searchresult Roswell 2C 20GA 2030076 2C 20USA .UktzaWSG1Dd rest url http forecast.weather.gov MapClick.php? log ,XD-910,
"It should be possible to supply a start or end date or none for the present , plus a count value for the number of points required i.e. after or prior to the given time .",XD-908,
It looks like Container s ContainerStartedEvent and ContainerStoppedEvent are published from ContainerLauncher s context whereas the ContainerEventListeners are running in XDContainer s context. This makes the container start stop events not getting processed. ,XD-905,
"The xd dirt project should be split in at least 3 parts Classes and resources pertaining to the admin server Container server Shared classes Additionally, we may consider splitting the first two in half as well, having a separate project for CLI handling and hence introduce 2 other projects for YARN, etc ",XD-903,
"Tests that leverage Redis Rabbit AvailableRule often create another connection factory in the test body but fail to close it. Tests should properly close the resource. As an added benefit, the rule itself can expose the resource that it created for deciding whether to skip the test or not",XD-902,
We currently include jetty util 6.1.26.jar but we need to add correct jar for different distributions PHD uses jetty util 7.6.10.v20130312.jar Need to check hadoop hdfs dependencies for the distros and add jetty util to the jar copy for each distro ,XD-901,
"When INT 3133 is resolved, SpEL PropertyAccessor s are inherited from parent contexts. Instead of adding the JsonPropertyAccessor to each module s context, add it to the parent instead.",XD-900,
"currently xd container will not start due to a DB connection failure if the xd admin is not already running In fact, if someone is not using Batch jobs at all with XD, they should not even need a DB connection for either xd admin or xd container to run so... consider using LazyConnectionDataSourceProxy so a connection failure would only occur when the DataSource is actually invoked to retrieve a connection",XD-899,
"We should support java.io.file payloads in order to support non textual file and large text file payloads being uploaded to HDFS. Currently text file payloads are converted to a text stream in memory and, non String payloads are converted to JSON first, using an object to json transformer . Ultimately we need to support streams such as file hdfs where the actually payload being copied to HDFS is not necessarily JSON or textual. Need to be able to support headers in the message that will indicate which HDFS file the data should be stored in. ",XD-897,
"The ability to configure message conversion via parameters. Consider programatic configuration of data type channels. Values can be media type, e.g., application json or a java class name.",XD-896,
"Currently, for adhoc launching of Batch jobs you have to use code stream create name myTriggerStream definition trigger job helloSpringXD code For renewed triggering of the job you have to undeploy and then redeploy the job. It would be nice if there was possibly a slightly simpler way of doing this. Just FYI As a different approach you can also use the HTTP source source job create name myjob definition myjob stream create name myjobhttp definition http job http http post data source ",XD-894,
"When clicking on a specific job execution from the job executions bar chart, the tool tips display isn t aligned with the job parameters. Please see the attachment.",XD-893,
We probably need to look into some options to run our JavaScript tests Jasmine as part of the build process some possibilities Jasmine Gradle Plugin https github.com dzhaughnroth jasmine gradle plugin Saga http timurstrekalov.github.io saga Looks like Maven has slightly better support http searls.github.io jasmine maven plugin index.html See also XD 865,XD-890,
This conflicts with and out of the box hadoop installation that uses 8080 as the map reduce shuffle port . 8088 sound ok? ,XD-889,
"Currently, a lot of jars that are on the classpath of xd dirt are there to support modules. We should move those to the lib construct of a module and remove them from the CP of dirt. But this should not be done by simple mv , as we d lose version tracking and dependency management offered by gradle. Pending a dependency aware ModuleRegistry, we should be able to alter the build.gradle file so that it knows about individual modules maybe handles them as project copies its libs into the appropriate directory does not copy dependencies that are already legitimate dependencies of xd dirt this can be achieved by runtime introspection of the dependeny tree of both projects ",XD-887,
"Add Batch Job Listeners Automatically Each major listener category should send notifications to own channel StepExecution, Chunk, Item etc. Add attribute to disallow automatic adding of listeners",XD-885,
If the spring batch database has already been initialized do not re initialize for each test run. ,XD-884,
In our tests the context is destroyed at the end of each module. It should be destroyed at the close of the container.,XD-883,
"Set the enableJmx to false because contexts are not getting destroyed properly, and in some cases prevents testSystemPropertiesOverridesDefault from running successfully.",XD-882,
We should consider moving to wire.js to encourage dependency injection in the UI Javascript code. See here https github.com cujojs wire blob master docs get.md,XD-881,
"Currently, the data directory created by the HSQLDB process during the tests run is not cleaned up and may cause issues. We should delete the data directory after each test completion.",XD-879,
The admin Server s tomcat is not shutdown properly. There is an existing method shutdownCleanly on AdminServer but the spring xd shell tests hang when we use this method to shutdown the admin server. ,XD-875,
It looks like we don t handle deletion of source files currently. We should provide some support for that Maybe there is a way to into Spring Integration s PseudoTransactionManager support http docs.spring.io spring integration api org springframework integration transaction PseudoTransactionManager.html The File Source should possibly also support File archival functionality But that might also be a dedicated processor? . Not sure where we want to set the semantic boundaries for the File Source. ,XD-874,
This story may need to be broken into several stories Particularly for Batch scenarios one may not want to run a file to string transformer on the payload file in the file source but rather handle pass the file reference itself local SAN etc. e.g. in case somebody drops a 2GB or in scenarios where one wants to push those large files into HDFS and run hadoop jobs on the data. This is important for Batch Jobs as they need to access the file itself for the reader. We need to keep in mind the various transports we support . Not sure how Kryo handles file serialization. I would think we only need the File Meta Data to be persisted not the file data itself make that configurable?? . ,XD-873,
"Just wanted to create story for this so we can consider whether this should be addressed. In at least 2 modules we use non persisted states. We may want to consider making them persistent Twitter Search uses an in memory MetadataStore that keeps track of the twitter ids. There exists a corresponding issue for Spring Integration Create a Redis backed MetadataStore See https jira.springsource.org browse INT 3085 File Soure s File Inbound Channel Adapter uses a AcceptOnceFileListFilter, which uses an in memory Queue to keep track of duplicate files. ",XD-872,
Commands that pair up with the functionality described in XD 859 module list would list all modules in a table format module list type source would list only source modules and so on.,XD-870,
i.e. http group1 filter group1 transform file then specifying anything labelled group1 goes to machineX,XD-869,
"We need to verify that we are seeing improved throughput when using the reactor based syslog adapter. A suggestion on a basic stream to perform a microbenchmark this would be using in memory counters, singlenode with the stream definition syslog counter . Based on the results of this microbenchmark, other stories may need to be created.",XD-868,
Parser creates a module compose command that allows a user to create a module of other modules. This composed module can accept parameters.,XD-867,
Get rid of all the thread.sleeps and code that supported them.,XD-866,
The admin ui currently has no unit tests. Need to add a test suite and hook it up to the build so that tests are run on every build.,XD-865,
We need to move the BatchJobExecutionsByJobName method to BatchJobsController as that seems appropriate,XD-864,
Needs some investigation on how the update information from Spring Batch listeners can be sent as a message across modules in a single node configuration as well as across JVMs in a distributed node configuration.,XD-863,
"Similar to xpath with XML, there are now some initial support in SI that enable the use of filter routers based on JSON Path expressions. That support needs to be reviewed and then brought up to the level of exposure in Spring XD so that router filter modules could use JSON Path. json path filter router are components that need to be created, perhaps others. This story needs to be broken down further.",XD-862,
This story will need to be broken down further. The current code mixes together the type conversion that happens within a single JVM for data that is passed on a local transport between modules and serialization deserialization between JVMs. This should be separated. There was a suggestion that we could perhaps use typed data channels in SI as a means implement the type conversion between modules. The media type conversion support in Spring 4 is another part of this solution.,XD-861,
"From the CLI, one should be able to get a listing of modules and be able to specifically ask for jobs, sources, sinks, and processors. A brief description of them would also be nice this might come from adding some metadata into the definition. Finer grained description implementation suggestion TBD",XD-859,
"Apart from sanity checks, there is not much that ties FileModuleRegistry to actual java.io.Files. Using the Resource abstraction would work just the same, and would allow loading modules from the classpath in constrained environments or other file systems locations. HDFS HTTP ",XD-857,
"Similar to what has been done for e.g. FileSink, refactor metrics related sinks to use smart Thread.sleep timings",XD-855,
"The doc at http docs.spring.io spring xd docs 1.0.0.M3 reference html modules and spring refers to an old version of the counter sink, when it was still hardwired to use redis. The text next to it that explains placeholders is out of date with respect to the redis placeholders ",XD-854,
Add serialVersionUID to the objects in package org.springframework.integration.x.twitter XDEntities XDUrlEntity XDHashTagEntity XDMentionEntity XDMediaEntity XDTickerSymbolEntity XDTweet The absence creates warnings during compile time.,XD-853,
Wildcard support for associating inbound and outbound channels with modules. The wild card will be represented by an asterisk . Example myEmailSource tap job send message to all jobs myEmailSource tap send message to all stream job taps myEmailSource foo send message to all channels that contain the channels that contains the word foo tap bar myEmailSource ,XD-852,
The syntax for both taps and job channels will be prefixed with the word tap. The parser will search both the all stream and job for now registries to find the name . If the name is present in only in one registry then that definition will be used. If the name is present both registries a syntax exception will be issued. The user then can optionally specify which registry to use by adding a second token to the definition that specifies the type of channel the user wants. i.e. tap stream streamName mySink If the user attempts to place a job on the greater left hand side without specifying a notification a syntax error will be thrown. Format tap type name tap type name Example tap streamName mySink tap stream streamName mySink mySource myProcessor tap stream mySink myEmailSource tap job jobName.step1 myEmailSource tap jobName.step1 tap job jobName notifications myEmailSink,XD-851,
Looks like there are some version mismatch issues with the build packaging of the XD components. Looking in xd lib I see the following which looks suspicious mqtt client 0.2.1.jar mqtt client 1.0.jar jackson core asl 1.9.13.jar jackson mapper asl 1.9.12.jar spring integration core 3.0.0.M3.jar spring integration http 2.2.5.RELEASE.jar spring data commons 1.6.0.M1.jar spring data commons core 1.4.0.RELEASE.jar ,XD-850,
"We should adjust our hadoopDistro options to the ones supported in the new spring data hadoop 1.0.1.RELEASE hadoop12 default , cdh4, hdp13, phd1, hadoop20 This includes updating the wiki pages",XD-847,
Tap and using numbers instead of module names.,XD-846,
"When using jobs, taps we no longer need to have the leading . i.e. tap foo. We should only support tap foo.",XD-845,
"As part of running in Cloud Foundry, one quick workaround for the lack of classpath support would be to use the Spring Boot Loader special ClassLoader and jar inside a jar support https github.com spring projects spring boot tree master spring boot tools spring boot loader",XD-844,
"First take on this involves being able to deploy the two separate applications xd admin xd container being able to CF service provided redis rabbit for internal needs of XD to some extent, make modules smart and CF aware e.g. http source uses correct port ",XD-843,
Add back classifier dist to distZip build target it was was accidentally removed.,XD-842,
As of M3... code javadoc warning Error fetching URL http static.springsource.org spring shell docs current api package list Users gpr Documents workspace si spring xd spring xd dirt src main java org springframework xd dirt module CompositeModuleRegistry.java 40 warning param argument cp is not a parameter name. Users gpr Documents workspace si spring xd spring xd dirt src main java org springframework xd dirt module CompositeModuleRegistry.java 40 warning param argument file is not a parameter name. Users gpr Documents workspace si spring xd spring xd dirt src main java org springframework xd dirt plugins job JobFactoryBean.java 62 warning Tag link can t find jobName in org.springframework.xd.dirt.plugins.job.JobFactoryBean Users gpr Documents workspace si spring xd spring xd dirt src main java org springframework xd dirt rest XDController.java 56 warning param argument V is not a type parameter name. Users gpr Documents workspace si spring xd spring xd dirt src main java org springframework xd dirt rest XDController.java 56 warning param argument T is not a type parameter name. Users gpr Documents workspace si spring xd spring xd dirt src main java org springframework xd dirt plugins job batch BatchJobAlreadyExistsException.java 32 warning param argument message is not a parameter name. Users gpr Documents workspace si spring xd spring xd dirt src main java org springframework xd dirt plugins job batch BatchJobLocator.java 32 warning DistributedJobService is an unknown tag. Users gpr Documents workspace si spring xd spring xd dirt src main java org springframework xd dirt plugins job batch BatchJobLocator.java 32 warning DistributedJobService is an unknown tag. Users gpr Documents workspace si spring xd spring xd dirt src main java org springframework xd dirt plugins job batch NoSuchBatchJobException.java 31 warning param argument message is not a parameter name. Users gpr Documents workspace si spring xd spring xd dirt src main java org springframework xd dirt server options ContainerOptions.java 30 warning param argument defaultTransport is not a parameter name. Users gpr Documents workspace si spring xd spring xd dirt src main java org springframework xd dirt server options ContainerOptions.java 30 warning param argument defaultAnalytics is not a parameter name. Users gpr Documents workspace si spring xd spring xd dirt src main java org springframework xd dirt server options OptionUtils.java 35 warning return tag has no arguments. Users gpr Documents workspace si spring xd spring xd module src main java org springframework xd module Plugin.java 32 warning Tag see reference not found ModuleDeployer Users gpr Documents workspace si spring xd spring xd dirt src main java org springframework integration x bus MessageBus.java 53 warning param argument moduleInputChannel is not a parameter name. Users gpr Documents workspace si spring xd spring xd dirt src main java org springframework integration x bus MessageBus.java 72 warning param argument moduleOutputChannel is not a parameter name. Users gpr Documents workspace si spring xd spring xd dirt src main java org springframework integration x bus MessageBus.java 102 warning param argument moduleOutputChannel is not a parameter name. Users gpr Documents workspace si spring xd spring xd reactor src main java org springframework xd integration reactor config ReactorNamespaceUtils.java 46 warning return tag has no arguments. Users gpr Documents workspace si spring xd spring xd dirt src main java org springframework xd dirt plugins job batch BatchJobLocator.java 32 warning DistributedJobService is an unknown tag. Users gpr Documents workspace si spring xd spring xd dirt src main java org springframework xd dirt plugins job batch BatchJobLocator.java 32 warning DistributedJobService is an unknown tag. code and code warning options bootstrap class path not set in conjunction with source 1.6 Users gpr Documents workspace si spring xd spring xd dirt src main java org springframework integration x bus LocalMessageBus.java 132 warning rawtypes found raw type LocalMessageBus.SharedChannelProvider SharedChannelProvider channelProvider aliasHint ? queueChannelProvider ^ missing type arguments for generic class LocalMessageBus.SharedChannelProvider T where T is a type variable T extends AbstractMessageChannel declared in class LocalMessageBus.SharedChannelProvider Users gpr Documents workspace si spring xd spring xd dirt src main java org springframework integration x bus LocalMessageBus.java 159 warning rawtypes found raw type LocalMessageBus.SharedChannelProvider SharedChannelProvider channelProvider aliasHint ? queueChannelProvider ^ missing type arguments for generic class LocalMessageBus.SharedChannelProvider T where T is a type variable T extends AbstractMessageChannel declared in class LocalMessageBus.SharedChannelProvider Users gpr Documents workspace si spring xd spring xd dirt src main java org springframework integration x twitter XDEntities.java 93 warning rawtypes found raw type List public List getUrls ^ missing type arguments for generic class List E where E is a type variable E extends Object declared in interface List Users gpr Documents workspace si spring xd spring xd dirt src main java org springframework integration x twitter XDEntities.java 101 warning rawtypes found raw type List public List getHashTags ^ missing type arguments for generic class List E where E is a type variable E extends Object declared in interface List Users gpr Documents workspace si spring xd spring xd dirt src main java org springframework integration x twitter XDEntities.java 109 warning rawtypes found raw type List public List getMentions ^ missing type arguments for generic class List E where E is a type variable E extends Object declared in interface List Users gpr Documents workspace si spring xd spring xd dirt src main java org springframework integration x twitter XDEntities.java 117 warning rawtypes found raw type List public List getMedia ^ missing type arguments for generic class List E where E is a type variable E extends Object declared in interface List Users gpr Documents workspace si spring xd spring xd dirt src main java org springframework integration x twitter XDEntities.java 126 warning rawtypes found raw type List public List getTickerSymbols ^ missing type arguments for generic class List E where E is a type variable E extends Object declared in interface List Users gpr Documents workspace si spring xd spring xd dirt src main java org springframework integration x twitter XDEntities.java 37 warning serial serializable class XDEntities has no definition of serialVersionUID public class XDEntities implements Serializable ^ Users gpr Documents workspace si spring xd spring xd dirt src main java org springframework integration x twitter XDUrlEntity.java 31 warning serial serializable class XDUrlEntity has no definition of serialVersionUID public class XDUrlEntity implements Serializable ^ Users gpr Documents workspace si spring xd spring xd dirt src main java org springframework integration x twitter XDHashTagEntity.java 32 warning serial serializable class XDHashTagEntity has no definition of serialVersionUID public class XDHashTagEntity implements Serializable ^ Users gpr Documents workspace si spring xd spring xd dirt src main java org springframework integration x twitter XDMentionEntity.java 32 warning serial serializable class XDMentionEntity has no definition of serialVersionUID public class XDMentionEntity implements Serializable ^ Users gpr Documents workspace si spring xd spring xd dirt src main java org springframework integration x twitter XDMediaEntity.java 32 warning serial serializable class XDMediaEntity has no definition of serialVersionUID public class XDMediaEntity implements Serializable ^ Users gpr Documents workspace si spring xd spring xd dirt src main java org springframework integration x twitter XDTickerSymbolEntity.java 31 warning serial serializable class XDTickerSymbolEntity has no definition of serialVersionUID public class XDTickerSymbolEntity implements Serializable ^ Users gpr Documents workspace si spring xd spring xd dirt src main java org springframework integration x twitter XDTweet.java 34 warning serial serializable class XDTweet has no definition of serialVersionUID public class XDTweet implements Serializable ^ code ,XD-840,
"In the XD UI, the list of jobs is refreshed from the server every 5 seconds. There are also tooltips that are activated when hovering over a job execution. These tooltips are no longer responsive ie they remain on the page and don t disappear after the list of jobs is refreshed.",XD-837,
"There are couple of issues here 1 The admin server destroy close event s onApplicationEvent ContextClosedEvent listener has stop to stop the admin server s tomcat instance. The stop also calls the applicationContext s destroy which loops again to stop. 2 With HSQLServer or any batch db server in future , the admin server stop also needs to handle the batch db server shutdown.",XD-834,
"Currently this works stream create foo definition tap baz.time log stream create baz definition time file But this doesn t stream create foo definition tap baz log stream create baz definition time file This is because the parser translates references to tap baz to named channel tap baz.time the name of the stream s first module . If the stream is not yet created, the parser cannot perform this translation. A fix for this will likely be related to the fix needed for XD 812.",XD-833,
"Now that taps are just channels, we need to update the docs. The preceding colon is no longer needed and will be removed altogether , so all examples should be like this code tap foo bar code ",XD-832,
"Currently, the way that we are accessing JobExecutions from batch admin, the JobParameters are not being filled in. We are using a org.springframework.batch.admin.service.JdbcSearchableJobExecutionDao to grab the job executions from the database. The database queries that it uses does not include the JobParameters which is stored in a different table . I think that this will require a change to batch admin in order to properly expose the parameters.",XD-830,
We also would like to upgrade the hsqldb version on spring batch admin so that both are compatible.,XD-829,
org.springframework.integration.x.bus.Bridge should now be called Binding we can also move the INBOUND OUTBOUND direction or possibly the CONSUMER PRODUCER role into this class; that should simplify its usage in conditional code within the MessageBus code and also reduce the use of in and out as Strings in that same code,XD-828,
"Twitter search source should produce JSON or Pojo. The Pojo requires a custom wrapper class that is JSON friendly e.g., zero arg constructor . The twittersearch module should have a parameter json true false default true to control the output type.",XD-827,
org.springframework.xd.shell.command.MailCommandTests in spring xd shell project. I get failures relating to invalid username password INFO Stream Name Stream Definition Status mailstream imap port 1044 protocol imap folder INBOX username johndoe password secret file dir tmp name FileSink1280066074228960855 suffix txt charset UTF 8 binary false deployed 13 09 04 11 32 11 WARN mail.ImapIdleChannelAdapter error occurred in idle task javax.mail.AuthenticationFailedException LOGIN failed. Invalid login password at com.sun.mail.imap.IMAPStore.protocolConnect IMAPStore.java 663 ,XD-826,
int channel id input int object to json transformer input channel input output channel output int channel id output ,XD-825,
"My current thinking is... ChannelRegistry MessageBus RabbitChannelRegistry RabbitMessageBus ... Then, method names change like so createInbound registerConsumer createOutbound registerProducer ",XD-824,
If true default filter for delete messages in the twitter stream and route to a discard channel. This creates a twitter stream including only new tweets and no references to deleted ones.,XD-823,
When converting a JSON string to a tuple the JSON may contain id. This method should handle this. Same with timestamp,XD-822,
"Currently, the url for accessing the XD UI is http localhost 8080 admin ui index.html . This feels messy and dated. We should be able to access the ui without explicitly including the index.html, like this code http localhost 8080 admin ui code ",XD-821,
"The admin UI should be polling the server to automatically pick up any new jobs, executions, and instances.",XD-818,
"A user should be able to view some important details of the last execution of a job from a job list. The batch jobs REST endpoint should provide extra fields not currently available in the JobInfo class. At a minimum, I would like to see startTime startDate last job parameters duration last job status",XD-817,
"Some recent changes caused this to be turned off. Basically the change was to police whether a stream is well formed at create time, rather than deploy time. By deferring that check we can create composed streams that are not deployable by themselves but that are when used as building blocks in proper streams.",XD-816,
"Once spring batch admin 1.3.0.M1 is available, update the build to use it. Likely to be Sept 7 or 9",XD-815,
"Now that the new batch admin api is taking shape, we need to rebase the XD web UI to use this. It s more than just changing the http urls sent to the xd server since the new API is not identical to the old one.",XD-814,
"When an XD job is destroyed deleted, the batch jobRepository entries for the job associated JobInstances, JobExecutions etc., and the BatchJobLocator entries.",XD-813,
"As of XD 685, we no longer have the ability to 1 Tap a named channel, ala stream1 foo sink stream2 tap foo sink 2 Tap a stream whose source is a named channel ala stream2 tap stream1 sink 3 Tap a label ala stream1 http obfuscator transform expression payload.replaceAll password , file stream2 tap stream1.obfuscator sink Loss of named channel support is due to the fact that we are creating a WireTap on a module s local output channel only thus we never tap named channels . We are not supporting labels because we only create a named channel called tap stream.module on stream creation, so later creation of tap on stream1.obfuscator is referring to a non existent named channel.",XD-812,
"We need a REST endpoint to launch a job. Given the constraint on JobRegistry being not persistent and not available outside the container JVM, we can not use the batch job admin controller service to launch the job. One possible way is to use the trigger source to launch the job at XD.",XD-811,
"The following sequence results in Dispatcher has no subscribers error stack trace below , because deleting stream2 disconnects stream1 from the foo channel. Current work on XD 685 has infrastructure for disconnecting just the channels involved in a stream, so should make it easier to fix this issue once merged. stream create stream1 definition time foo stream create stream2 definition http foo stream create stream3 definition foo file stream destroy stream2 expect file sink to still get time, but instead blows up b c deleteOutbound foo killed links b w foo and both local output channels Server stack trace 10 47 11,921 ERROR task scheduler 6 handler.LoggingHandler 140 org.springframework.integration.MessageDeliveryException Dispatcher has no subscribers for channel SimpleModule name time, type source, group stream1, index 0 .output . at org.springframework.integration.channel.AbstractSubscribableChannel.doSend AbstractSubscribableChannel.java 81 at org.springframework.integration.channel.AbstractMessageChannel.send AbstractMessageChannel.java 178 at org.springframework.integration.channel.AbstractMessageChannel.send AbstractMessageChannel.java 149 at org.springframework.integration.core.MessagingTemplate.doSend MessagingTemplate.java 304 at org.springframework.integration.core.MessagingTemplate.send MessagingTemplate.java 165 at org.springframework.integration.endpoint.SourcePollingChannelAdapter.handleMessage SourcePollingChannelAdapter.java 97 at org.springframework.integration.endpoint.AbstractPollingEndpoint.doPoll AbstractPollingEndpoint.java 199 at org.springframework.integration.endpoint.AbstractPollingEndpoint.access 000 AbstractPollingEndpoint.java 51 at org.springframework.integration.endpoint.AbstractPollingEndpoint 1.call AbstractPollingEndpoint.java 143 at org.springframework.integration.endpoint.AbstractPollingEndpoint 1.call AbstractPollingEndpoint.java 141 at org.springframework.integration.endpoint.AbstractPollingEndpoint Poller 1.run AbstractPollingEndpoint.java 273 at org.springframework.integration.util.ErrorHandlingTaskExecutor 1.run ErrorHandlingTaskExecutor.java 52 at org.springframework.core.task.SyncTaskExecutor.execute SyncTaskExecutor.java 49 at org.springframework.integration.util.ErrorHandlingTaskExecutor.execute ErrorHandlingTaskExecutor.java 49 at org.springframework.integration.endpoint.AbstractPollingEndpoint Poller.run AbstractPollingEndpoint.java 268 at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run DelegatingErrorHandlingRunnable.java 53 at org.springframework.scheduling.concurrent.ReschedulingRunnable.run ReschedulingRunnable.java 81 at java.util.concurrent.Executors RunnableAdapter.call Executors.java 439 at java.util.concurrent.FutureTask Sync.innerRun FutureTask.java 303 at java.util.concurrent.FutureTask.run FutureTask.java 138 at java.util.concurrent.ScheduledThreadPoolExecutor ScheduledFutureTask.access 301 ScheduledThreadPoolExecutor.java 98 at java.util.concurrent.ScheduledThreadPoolExecutor ScheduledFutureTask.run ScheduledThreadPoolExecutor.java 206 at java.util.concurrent.ThreadPoolExecutor Worker.runTask ThreadPoolExecutor.java 895 at java.util.concurrent.ThreadPoolExecutor Worker.run ThreadPoolExecutor.java 918 at java.lang.Thread.run Thread.java 680 Caused by org.springframework.integration.MessageDispatchingException Dispatcher has no subscribers at org.springframework.integration.dispatcher.UnicastingDispatcher.doDispatch UnicastingDispatcher.java 109 at org.springframework.integration.dispatcher.UnicastingDispatcher.dispatch UnicastingDispatcher.java 102 at org.springframework.integration.channel.AbstractSubscribableChannel.doSend AbstractSubscribableChannel.java 77 ... 24 more 10 47 12,924 ERROR task scheduler 6 handler.LoggingHandler 140 org.springframework.integration.MessageDeliveryException Dispatcher has no subscribers for channel SimpleModule name time, type source, group stream1, index 0 .output . at org.springframework.integration.channel.AbstractSubscribableChannel.doSend AbstractSubscribableChannel.java 81 at org.springframework.integration.channel.AbstractMessageChannel.send AbstractMessageChannel.java 178 at org.springframework.integration.channel.AbstractMessageChannel.send AbstractMessageChannel.java 149 at org.springframework.integration.core.MessagingTemplate.doSend MessagingTemplate.java 304 at org.springframework.integration.core.MessagingTemplate.send MessagingTemplate.java 165 at org.springframework.integration.endpoint.SourcePollingChannelAdapter.handleMessage SourcePollingChannelAdapter.java 97 at org.springframework.integration.endpoint.AbstractPollingEndpoint.doPoll AbstractPollingEndpoint.java 199 at org.springframework.integration.endpoint.AbstractPollingEndpoint.access 000 AbstractPollingEndpoint.java 51 at org.springframework.integration.endpoint.AbstractPollingEndpoint 1.call AbstractPollingEndpoint.java 143 at org.springframework.integration.endpoint.AbstractPollingEndpoint 1.call AbstractPollingEndpoint.java 141 at org.springframework.integration.endpoint.AbstractPollingEndpoint Poller 1.run AbstractPollingEndpoint.java 273 at org.springframework.integration.util.ErrorHandlingTaskExecutor 1.run ErrorHandlingTaskExecutor.java 52 at org.springframework.core.task.SyncTaskExecutor.execute SyncTaskExecutor.java 49 at org.springframework.integration.util.ErrorHandlingTaskExecutor.execute ErrorHandlingTaskExecutor.java 49 at org.springframework.integration.endpoint.AbstractPollingEndpoint Poller.run AbstractPollingEndpoint.java 268 at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run DelegatingErrorHandlingRunnable.java 53 at org.springframework.scheduling.concurrent.ReschedulingRunnable.run ReschedulingRunnable.java 81 at java.util.concurrent.Executors RunnableAdapter.call Executors.java 439 at java.util.concurrent.FutureTask Sync.innerRun FutureTask.java 303 at java.util.concurrent.FutureTask.run FutureTask.java 138 at java.util.concurrent.ScheduledThreadPoolExecutor ScheduledFutureTask.access 301 ScheduledThreadPoolExecutor.java 98 at java.util.concurrent.ScheduledThreadPoolExecutor ScheduledFutureTask.run ScheduledThreadPoolExecutor.java 206 at java.util.concurrent.ThreadPoolExecutor Worker.runTask ThreadPoolExecutor.java 895 at java.util.concurrent.ThreadPoolExecutor Worker.run ThreadPoolExecutor.java 918 at java.lang.Thread.run Thread.java 680 Caused by org.springframework.integration.MessageDispatchingException Dispatcher has no subscribers at org.springframework.integration.dispatcher.UnicastingDispatcher.doDispatch UnicastingDispatcher.java 109 at org.springframework.integration.dispatcher.UnicastingDispatcher.dispatch UnicastingDispatcher.java 102 at org.springframework.integration.channel.AbstractSubscribableChannel.doSend AbstractSubscribableChannel.java 77 ... 24 more 10 47 13,926 ERROR task scheduler 4 handler.LoggingHandler 140 org.springframework.integration.MessageDeliveryException Dispatcher has no subscribers for channel SimpleModule name time, type source, group stream1, index 0 .output . at org.springframework.integration.channel.AbstractSubscribableChannel.doSend AbstractSubscribableChannel.java 81 at org.springframework.integration.channel.AbstractMessageChannel.send AbstractMessageChannel.java 178 at org.springframework.integration.channel.AbstractMessageChannel.send AbstractMessageChannel.java 149 at org.springframework.integration.core.MessagingTemplate.doSend MessagingTemplate.java 304 at org.springframework.integration.core.MessagingTemplate.send MessagingTemplate.java 165 at org.springframework.integration.endpoint.SourcePollingChannelAdapter.handleMessage SourcePollingChannelAdapter.java 97 at org.springframework.integration.endpoint.AbstractPollingEndpoint.doPoll AbstractPollingEndpoint.java 199 at org.springframework.integration.endpoint.AbstractPollingEndpoint.access 000 AbstractPollingEndpoint.java 51 at org.springframework.integration.endpoint.AbstractPollingEndpoint 1.call AbstractPollingEndpoint.java 143 at org.springframework.integration.endpoint.AbstractPollingEndpoint 1.call AbstractPollingEndpoint.java 141 at org.springframework.integration.endpoint.AbstractPollingEndpoint Poller 1.run AbstractPollingEndpoint.java 273 at org.springframework.integration.util.ErrorHandlingTaskExecutor 1.run ErrorHandlingTaskExecutor.java 52 at org.springframework.core.task.SyncTaskExecutor.execute SyncTaskExecutor.java 49 at org.springframework.integration.util.ErrorHandlingTaskExecutor.execute ErrorHandlingTaskExecutor.java 49 at org.springframework.integration.endpoint.AbstractPollingEndpoint Poller.run AbstractPollingEndpoint.java 268 at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run DelegatingErrorHandlingRunnable.java 53 at org.springframework.scheduling.concurrent.ReschedulingRunnable.run ReschedulingRunnable.java 81 at java.util.concurrent.Executors RunnableAdapter.call Executors.java 439 at java.util.concurrent.FutureTask Sync.innerRun FutureTask.java 303 at java.util.concurrent.FutureTask.run FutureTask.java 138 at java.util.concurrent.ScheduledThreadPoolExecutor ScheduledFutureTask.access 301 ScheduledThreadPoolExecutor.java 98 at java.util.concurrent.ScheduledThreadPoolExecutor ScheduledFutureTask.run ScheduledThreadPoolExecutor.java 206 at java.util.concurrent.ThreadPoolExecutor Worker.runTask ThreadPoolExecutor.java 895 at java.util.concurrent.ThreadPoolExecutor Worker.run ThreadPoolExecutor.java 918 at java.lang.Thread.run Thread.java 680 Caused by org.springframework.integration.MessageDispatchingException Dispatcher has no subscribers at org.springframework.integration.dispatcher.UnicastingDispatcher.doDispatch UnicastingDispatcher.java 109 at org.springframework.integration.dispatcher.UnicastingDispatcher.dispatch UnicastingDispatcher.java 102 at org.springframework.integration.channel.AbstractSubscribableChannel.doSend AbstractSubscribableChannel.java 77 ... 24 more 10 47 14,928 ERROR task scheduler 4 handler.LoggingHandler 140 org.springframework.integration.MessageDeliveryException Dispatcher has no subscribers for channel SimpleModule name time, type source, group stream1, index 0 .output . at org.springframework.integration.channel.AbstractSubscribableChannel.doSend AbstractSubscribableChannel.java 81 at org.springframework.integration.channel.AbstractMessageChannel.send AbstractMessageChannel.java 178 at org.springframework.integration.channel.AbstractMessageChannel.send AbstractMessageChannel.java 149 at org.springframework.integration.core.MessagingTemplate.doSend MessagingTemplate.java 304 at org.springframework.integration.core.MessagingTemplate.send MessagingTemplate.java 165 at org.springframework.integration.endpoint.SourcePollingChannelAdapter.handleMessage SourcePollingChannelAdapter.java 97 at org.springframework.integration.endpoint.AbstractPollingEndpoint.doPoll AbstractPollingEndpoint.java 199 at org.springframework.integration.endpoint.AbstractPollingEndpoint.access 000 AbstractPollingEndpoint.java 51 at org.springframework.integration.endpoint.AbstractPollingEndpoint 1.call AbstractPollingEndpoint.java 143 at org.springframework.integration.endpoint.AbstractPollingEndpoint 1.call AbstractPollingEndpoint.java 141 at org.springframework.integration.endpoint.AbstractPollingEndpoint Poller 1.run AbstractPollingEndpoint.java 273 at org.springframework.integration.util.ErrorHandlingTaskExecutor 1.run ErrorHandlingTaskExecutor.java 52 at org.springframework.core.task.SyncTaskExecutor.execute SyncTaskExecutor.java 49 at org.springframework.integration.util.ErrorHandlingTaskExecutor.execute ErrorHandlingTaskExecutor.java 49 at org.springframework.integration.endpoint.AbstractPollingEndpoint Poller.run AbstractPollingEndpoint.java 268 at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run DelegatingErrorHandlingRunnable.java 53 at org.springframework.scheduling.concurrent.ReschedulingRunnable.run ReschedulingRunnable.java 81 at java.util.concurrent.Executors RunnableAdapter.call Executors.java 439 at java.util.concurrent.FutureTask Sync.innerRun FutureTask.java 303 at java.util.concurrent.FutureTask.run FutureTask.java 138 at java.util.concurrent.ScheduledThreadPoolExecutor ScheduledFutureTask.access 301 ScheduledThreadPoolExecutor.java 98 at java.util.concurrent.ScheduledThreadPoolExecutor ScheduledFutureTask.run ScheduledThreadPoolExecutor.java 206 at java.util.concurrent.ThreadPoolExecutor Worker.runTask ThreadPoolExecutor.java 895 at java.util.concurrent.ThreadPoolExecutor Worker.run ThreadPoolExecutor.java 918 at java.lang.Thread.run Thread.java 680 Caused by org.springframework.integration.MessageDispatchingException Dispatcher has no subscribers at org.springframework.integration.dispatcher.UnicastingDispatcher.doDispatch UnicastingDispatcher.java 109 at org.springframework.integration.dispatcher.UnicastingDispatcher.dispatch UnicastingDispatcher.java 102 at org.springframework.integration.channel.AbstractSubscribableChannel.doSend AbstractSubscribableChannel.java 77 ... 24 more 10 47 15,930 ERROR task scheduler 1 handler.LoggingHandler 140 org.springframework.integration.MessageDeliveryException Dispatcher has no subscribers for channel SimpleModule name time, type source, group stream1, index 0 .output . at org.springframework.integration.channel.AbstractSubscribableChannel.doSend AbstractSubscribableChannel.java 81 at org.springframework.integration.channel.AbstractMessageChannel.send AbstractMessageChannel.java 178 at org.springframework.integration.channel.AbstractMessageChannel.send AbstractMessageChannel.java 149 at org.springframework.integration.core.MessagingTemplate.doSend MessagingTemplate.java 304 at org.springframework.integration.core.MessagingTemplate.send MessagingTemplate.java 165 at org.springframework.integration.endpoint.SourcePollingChannelAdapter.handleMessage SourcePollingChannelAdapter.java 97 at org.springframework.integration.endpoint.AbstractPollingEndpoint.doPoll AbstractPollingEndpoint.java 199 at org.springframework.integration.endpoint.AbstractPollingEndpoint.access 000 AbstractPollingEndpoint.java 51 at org.springframework.integration.endpoint.AbstractPollingEndpoint 1.call AbstractPollingEndpoint.java 143 at org.springframework.integration.endpoint.AbstractPollingEndpoint 1.call AbstractPollingEndpoint.java 141 at org.springframework.integration.endpoint.AbstractPollingEndpoint Poller 1.run AbstractPollingEndpoint.java 273 at org.springframework.integration.util.ErrorHandlingTaskExecutor 1.run ErrorHandlingTaskExecutor.java 52 at org.springframework.core.task.SyncTaskExecutor.execute SyncTaskExecutor.java 49 at org.springframework.integration.util.ErrorHandlingTaskExecutor.execute ErrorHandlingTaskExecutor.java 49 at org.springframework.integration.endpoint.AbstractPollingEndpoint Poller.run AbstractPollingEndpoint.java 268 at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run DelegatingErrorHandlingRunnable.java 53 ",XD-810,
"We should provide a better shell integration when XD is run on Yarn. 1. yarn kill id TAB completion 2. yarn submit, more options like app name 3. yarn list, filter by app states, etc 4. admin config server TAB completion for running xd apps on yarn",XD-809,
"This might mean we should adjust our hadoopDistro options to the ones supported in the new release hadoop12 default , cdh4, hdp13, phd1 and hadoop21",XD-808,
The parameters are not optimal for the counter name between Aggregate Counter Field Value Counter counterName versus name,XD-807,
"Currently it s possible to do something like code http prot 8888 code It is possible to validate property names by parsing the module definition file s directly and matching property placeholders or profile declarations that may be mapped to properties, etc . This must account recursively for imports as well. I have some code in a branch that does this . ",XD-806,
For testing purposes it would be super helpful if there be a hook to get notified when a named channel is up and running. In current tests one may have to resort to Thread.sleep .,XD-805,
"We need an abstraction in place to retrieve messages from a named channel programmatically. Right now there is no implementation agnostic way of doing this such as receiveMessage , queueSize . This could be quite useful for integration tests of streams. E.g. to do more focussed tests without resorting to temp files and non essential sinks or sources etc. e.g. code routeit router expression payload.contains a ? foo bar code ",XD-804,
"This is to set the appropriate data source, so that the container will use admins batch repository.",XD-803,
Job channels need to have a namespace. i.e. job somejobname. Where the is the delimiter for the namespace. The preference is to use the instead of the . But XD 766 needs to be completed in order to support this.,XD-800,
"The current rabbitmq sink uses the attribute routing key, which defaults to the name of the stream. This should be change to use the attribute routing key expression so that the routing key can be determined using SpEL. This will enable a dynamic evaluation of the routing key based on message payload header. Implementation Suggestions This hopefully should be changing the XML description of the sink to routing key expression routingKey xd.stream.name This way, the xd.stream.name is surrounded by a single quote to indicate a string literal to SpEL in the default case. How to verify it works. One of the simple uses of this is to create a routing key based on payload. In a distributed word count example, the hashcode of a word would be sent to a certain number of processing modules that would perform the count. The idea is that the same word is sent to the same node over and over again, in particular if in memory counters or state is computed using centralized redis counters this wouldn t be necessary in the case of only counter state. The stream http rabbit routingKey word payload.hashCode 3 is an example of a stream that can be used to verify that messages published to a direct exchange will have routing keys of the value word 0, word 1, and word 2. Binding a queue to each of these routing keys, one can observe the contents of messages in the queue to make sure that words are being routed to the appropriate queue, e.g. publishing hello as the payload of an http request should always appear in the same queue. The rabbitmq admin console can be used for this purpose. ",XD-799,
https sonar.springsource.org drilldown measures 7173?metric package tangle index rids 5B 5D 7717,XD-797,
"Commands like stream deploy have changed over time to allow passing a all option. So it s either stream deploy foo or stream deploy all . This has a number of drawbacks, given that these are the only 2 alternatives Implementation code is cumbersome None of the options can be marked mandatory, yet one of them is required. This has to be checked in the command code itself TAB completion is less powerful as the shell doesn t know if we want the first or the second form. Consider splitting those commands into two distinct commands, one as before and one literally named stream deploy all .",XD-796,
Once XD 785 is merged,XD-795,
SingleNodeMain.launchSingleNodeServer options calls System.exit causing a gradle buffer underflow. This is called from SingleNodeMainIntegrationTests. System.exit should be called from the main method instead. ,XD-790,
similar to ChannelRegistry AbstractChannelRegistryTests that has the real tests subclasses for each impl provide the registry to be tested Thus one test can run against multiple transports.,XD-788,
related to XD 779. We need the ability to provide JSON serializable JobExecution information. Change from using JavaSerialization back to returning objects ,XD-787,
Should it be fatal vs. warning?,XD-786,
"This came up when working on email source. There is int mail imap idle channel adapter and int mail inbound channel adapter It would be nice to be able to put those in two profiles and have one of the profile being activated from module options e.g. email polling true false Don t know the runtime cost of activating profiles, but we could blindly activate profiles from all options passed explicitly beans profile profile optionname optionvalue Not sure if this is the same as XD 132",XD-785,
export XD HOME foo gradle clean test build fails. Need to detected environment variables and override for the build,XD-784,
See discussion at https github.com SpringSource spring xd pull 240 discussion r6045724,XD-783,
It would be nice to be able to have modules that are simply made of Their context xml file Some kind of manifest that expresses dependencies and have the runtime take care of the deps,XD-781,
See https github.com SpringSource spring xd pull 240 discussion r6045724,XD-780,
"Transport used Redis It looks like when the job is launched, the RedisChannelRegistry s composite handler tries to transform the JobLaunchingMessageHandler s output channel notifications payload which is of type org.springframework.batch.core.JobExecution . and, This results in Infinite recursion StackOverflowError . Please see the stack trace here 01 09 44,827 ERROR task scheduler 1 redis.RedisQueueInboundChannelAdapter 148 Error sending message org.springframework.integration.MessageHandlingException org.springframework.context.ApplicationContextException Failed to start bean jobTriggerBean ; nested exception is org.springframework.integration.MessageHandlingException error occurred in message handler org.springframework.integration.x.redis.RedisChannelRegistry CompositeHandler 26f8f92e at org.springframework.integration.handler.MethodInvokingMessageProcessor.processMessage MethodInvokingMessageProcessor.java 76 at org.springframework.integration.handler.ServiceActivatingHandler.handleRequestMessage ServiceActivatingHandler.java 67 at org.springframework.integration.handler.AbstractReplyProducingMessageHandler.handleMessageInternal AbstractReplyProducingMessageHandler.java 137 at org.springframework.integration.handler.AbstractMessageHandler.handleMessage AbstractMessageHandler.java 73 at org.springframework.integration.dispatcher.UnicastingDispatcher.doDispatch UnicastingDispatcher.java 115 at org.springframework.integration.dispatcher.UnicastingDispatcher.dispatch UnicastingDispatcher.java 102 at org.springframework.integration.channel.AbstractSubscribableChannel.doSend AbstractSubscribableChannel.java 77 at org.springframework.integration.channel.AbstractMessageChannel.send AbstractMessageChannel.java 178 at org.springframework.integration.channel.AbstractMessageChannel.send AbstractMessageChannel.java 149 at org.springframework.integration.core.MessagingTemplate.doSend MessagingTemplate.java 304 at org.springframework.integration.core.MessagingTemplate.send MessagingTemplate.java 165 at org.springframework.integration.endpoint.MessageProducerSupport.sendMessage MessageProducerSupport.java 92 at org.springframework.integration.x.redis.RedisQueueInboundChannelAdapter.access 3 RedisQueueInboundChannelAdapter.java 1 at org.springframework.integration.x.redis.RedisQueueInboundChannelAdapter ListenerTask.run RedisQueueInboundChannelAdapter.java 145 at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run DelegatingErrorHandlingRunnable.java 53 at java.util.concurrent.Executors RunnableAdapter.call Executors.java 471 at java.util.concurrent.FutureTask Sync.innerRun FutureTask.java 334 at java.util.concurrent.FutureTask.run FutureTask.java 166 at java.util.concurrent.ScheduledThreadPoolExecutor ScheduledFutureTask.access 201 ScheduledThreadPoolExecutor.java 178 at java.util.concurrent.ScheduledThreadPoolExecutor ScheduledFutureTask.run ScheduledThreadPoolExecutor.java 292 at java.util.concurrent.ThreadPoolExecutor.runWorker ThreadPoolExecutor.java 1145 at java.util.concurrent.ThreadPoolExecutor Worker.run ThreadPoolExecutor.java 615 at java.lang.Thread.run Thread.java 722 Caused by org.springframework.context.ApplicationContextException Failed to start bean jobTriggerBean ; nested exception is org.springframework.integration.MessageHandlingException error occurred in message handler org.springframework.integration.x.redis.RedisChannelRegistry CompositeHandler 26f8f92e at org.springframework.context.support.DefaultLifecycleProcessor.doStart DefaultLifecycleProcessor.java 170 at org.springframework.context.support.DefaultLifecycleProcessor.access 200 DefaultLifecycleProcessor.java 51 at org.springframework.context.support.DefaultLifecycleProcessor LifecycleGroup.start DefaultLifecycleProcessor.java 339 at org.springframework.context.support.DefaultLifecycleProcessor.startBeans DefaultLifecycleProcessor.java 143 at org.springframework.context.support.DefaultLifecycleProcessor.start DefaultLifecycleProcessor.java 89 at org.springframework.context.support.AbstractApplicationContext.start AbstractApplicationContext.java 1278 at org.springframework.xd.module.SimpleModule.start SimpleModule.java 152 at org.springframework.xd.dirt.module.ModuleDeployer.deployModule ModuleDeployer.java 162 at org.springframework.xd.dirt.module.ModuleDeployer.handleDeploy ModuleDeployer.java 149 at org.springframework.xd.dirt.module.ModuleDeployer.handleMessageInternal ModuleDeployer.java 120 at org.springframework.integration.handler.AbstractMessageHandler.handleMessage AbstractMessageHandler.java 73 at sun.reflect.NativeMethodAccessorImpl.invoke0 Native Method at sun.reflect.NativeMethodAccessorImpl.invoke NativeMethodAccessorImpl.java 57 at sun.reflect.DelegatingMethodAccessorImpl.invoke DelegatingMethodAccessorImpl.java 43 at java.lang.reflect.Method.invoke Method.java 601 at org.springframework.expression.spel.support.ReflectiveMethodExecutor.execute ReflectiveMethodExecutor.java 69 at org.springframework.expression.spel.ast.MethodReference MethodValueRef.getValue MethodReference.java 97 at org.springframework.expression.spel.ast.CompoundExpression.getValueInternal CompoundExpression.java 82 at org.springframework.expression.spel.ast.SpelNodeImpl.getTypedValue SpelNodeImpl.java 102 at org.springframework.expression.spel.standard.SpelExpression.getValue SpelExpression.java 103 at org.springframework.integration.util.AbstractExpressionEvaluator.evaluateExpression AbstractExpressionEvaluator.java 144 at org.springframework.integration.util.MessagingMethodInvokerHelper.processInternal MessagingMethodInvokerHelper.java 231 at org.springframework.integration.util.MessagingMethodInvokerHelper.process MessagingMethodInvokerHelper.java 130 at org.springframework.integration.handler.MethodInvokingMessageProcessor.processMessage MethodInvokingMessageProcessor.java 73 ... 22 more Caused by org.springframework.integration.MessageHandlingException error occurred in message handler org.springframework.integration.x.redis.RedisChannelRegistry CompositeHandler 26f8f92e at org.springframework.integration.handler.AbstractMessageHandler.handleMessage AbstractMessageHandler.java 79 at org.springframework.integration.dispatcher.UnicastingDispatcher.doDispatch UnicastingDispatcher.java 115 at org.springframework.integration.dispatcher.UnicastingDispatcher.dispatch UnicastingDispatcher.java 102 at org.springframework.integration.channel.AbstractSubscribableChannel.doSend AbstractSubscribableChannel.java 77 at org.springframework.integration.channel.AbstractMessageChannel.send AbstractMessageChannel.java 178 at org.springframework.integration.channel.AbstractMessageChannel.send AbstractMessageChannel.java 149 at org.springframework.integration.core.MessagingTemplate.doSend MessagingTemplate.java 304 at org.springframework.integration.core.MessagingTemplate.send MessagingTemplate.java 165 at org.springframework.integration.handler.AbstractReplyProducingMessageHandler.sendMessage AbstractReplyProducingMessageHandler.java 223 at org.springframework.integration.handler.AbstractReplyProducingMessageHandler.sendReplyMessage AbstractReplyProducingMessageHandler.java 207 at org.springframework.integration.handler.AbstractReplyProducingMessageHandler.produceReply AbstractReplyProducingMessageHandler.java 172 at org.springframework.integration.handler.AbstractReplyProducingMessageHandler.handleResult AbstractReplyProducingMessageHandler.java 166 at org.springframework.integration.handler.AbstractReplyProducingMessageHandler.handleMessageInternal AbstractReplyProducingMessageHandler.java 144 at org.springframework.integration.handler.AbstractMessageHandler.handleMessage AbstractMessageHandler.java 73 at org.springframework.integration.dispatcher.UnicastingDispatcher.doDispatch UnicastingDispatcher.java 115 at org.springframework.integration.dispatcher.UnicastingDispatcher.dispatch UnicastingDispatcher.java 102 at org.springframework.integration.channel.AbstractSubscribableChannel.doSend AbstractSubscribableChannel.java 77 at org.springframework.integration.channel.AbstractMessageChannel.send AbstractMessageChannel.java 178 at org.springframework.integration.channel.AbstractMessageChannel.send AbstractMessageChannel.java 149 at org.springframework.integration.core.MessagingTemplate.doSend MessagingTemplate.java 304 at org.springframework.integration.core.MessagingTemplate.send MessagingTemplate.java 165 at org.springframework.integration.handler.AbstractReplyProducingMessageHandler.sendMessage AbstractReplyProducingMessageHandler.java 223 at org.springframework.integration.handler.AbstractReplyProducingMessageHandler.sendReplyMessage AbstractReplyProducingMessageHandler.java 207 at org.springframework.integration.handler.AbstractReplyProducingMessageHandler.produceReply AbstractReplyProducingMessageHandler.java 172 at org.springframework.integration.handler.AbstractReplyProducingMessageHandler.handleResult AbstractReplyProducingMessageHandler.java 166 at org.springframework.integration.handler.AbstractReplyProducingMessageHandler.handleMessageInternal AbstractReplyProducingMessageHandler.java 144 at org.springframework.integration.handler.AbstractMessageHandler.handleMessage AbstractMessageHandler.java 73 at org.springframework.integration.dispatcher.UnicastingDispatcher.doDispatch UnicastingDispatcher.java 115 at org.springframework.integration.dispatcher.UnicastingDispatcher.dispatch UnicastingDispatcher.java 102 at org.springframework.integration.channel.AbstractSubscribableChannel.doSend AbstractSubscribableChannel.java 77 at org.springframework.integration.channel.AbstractMessageChannel.send AbstractMessageChannel.java 178 at org.springframework.integration.channel.AbstractMessageChannel.send AbstractMessageChannel.java 149 at org.springframework.xd.dirt.plugins.job.JobTriggerBean.executeBatchJob JobTriggerBean.java 74 at org.springframework.xd.dirt.plugins.job.JobTriggerBean.start JobTriggerBean.java 63 at org.springframework.context.support.DefaultLifecycleProcessor.doStart DefaultLifecycleProcessor.java 167 ... 45 more Caused by org.springframework.integration.x.json.TypedJsonMapper SmartJsonConversionException Infinite recursion StackOverflowError through reference chain org.springframework.batch.core.JobExecution stepExecutions java.util.UnmodifiableRandomAccessList 0 org.springframework.batch.core.StepExecution jobExecution org.springframework.batch.core.JobExecution stepExecutions java.util.UnmodifiableRandomAccessList 0 org.springframework.batch.core.StepExecution jobExecution org.springframework.batch.core.JobExecution stepExecutions java.util.UnmodifiableRandomAccessList 0 org.springframework.batch.core.StepExecution j ... ... java.util.UnmodifiableRandomAccessList 0 org.springframework.batch.core.StepExecution jobExecution org.springframework.batch.core.JobExecution stepExecutions at com.fasterxml.jackson.databind.ser.std.BeanSerializerBase.serializeFields BeanSerializerBase.java 611 at com.fasterxml.jackson.databind.ser.std.BeanSerializerBase.serializeWithType BeanSerializerBase.java 492 at com.fasterxml.jackson.databind.ser.BeanPropertyWriter.serializeAsField BeanPropertyWriter.java 571 at com.fasterxml.jackson.databind.ser.std.BeanSerializerBase.serializeFields BeanSerializerBase.java 597 at com.fasterxml.jackson.databind.ser.std.BeanSerializerBase.serializeWithType BeanSerializerBase.java 492 at com.fasterxml.jackson.databind.ser.std.CollectionSerializer.serializeContents CollectionSerializer.java 119 at com.fasterxml.jackson.databind.ser.std.CollectionSerializer.serializeContents CollectionSerializer.java 23 at com.fasterxml.jackson.databind.ser.std.AsArraySerializerBase.serializeWithType AsArraySerializerBase.java 197 at com.fasterxml.jackson.databind.ser.BeanPropertyWriter.serializeAsField BeanPropertyWriter.java 571 at com.fasterxml.jackson.databind.ser.std.BeanSerializerBase.serializeFields BeanSerializerBase.java 597 at com.fasterxml.jackson.databind.ser.std.BeanSerializerBase.serializeWithType BeanSerializerBase.java 492 ",XD-779,
"for an example, see comments here https jira.springsource.org browse XD 671 ",XD-775,
In order to hook up the to get access to all the jobs available the job registry has to be shared. currently the only implmentation is is the MapJobRegistry. Testability. The admin will need to be see all jobs created by its containers.,XD-774,
See discussion at https github.com SpringSource spring xd pull 250 files r6034885,XD-772,
User shall have the ability to get a listing of available named channels order by name ascending from the shell Add support to controllers Add tests,XD-771,
Also drop the enhanced portion of the EnhancedStreamParser.,XD-766,
Jobs will be started via trigger. So we won t need the JobTriggerBean.,XD-765,
Currently we have 2 trigger sources trigger cron trigger. The preference is to have a user to just use a single trigger source. for example trigger myjob trigger cron ... myjob trigger fixedDelay ... myjob One option to handle this is to use spel to reference a bean and then have different trigger beans defined. i.e. trigger cronTriggerBean . Each trigger bean would setup the channel with the correct poller. ,XD-764,
"Triggers will be a source and no longer as a unique module. The following have to be removed spring xd dirt package org.springframework.xd.dirt.plugins.trigger META INF spring xd plugins triggers.xml org.springframework.xd.dirt.stream.TriggerPlugin The following beans will require updates to remove the trigger code spring xd dirt META INF spring xd internal deployers.xml Remove Triggerdeployer org.springframework.xd.dirt.plugins.job.JobPlugin Remove the registrars for fixedDelay, fixedRate, Cron. As well as the component selection, only need the job modules bean Update the tests to use the trigger as a source, instead of the trigger module. spring xd shell Remove trigger commands and associated tests xd controllers Remove trigger controllers and their associated tests This list cover most but not all the components affected. Success criteria Successful unit and integration tests. ",XD-763,
This is issue depends on XD 761 https build.springsource.org browse XD JDK8,XD-762,
JavaDoc issues are causing the build to fail with Java 8,XD-761,
https sonar.springsource.org drilldown measures 7173?metric package cycles rids 5B 5D 7717,XD-760,
The xd singlenode script currently has 644 permissions unlike xd admin and xd container which have 755 code rwxr xr x 1 mark staff 5899 Aug 26 16 19 xd admin rwxr xr x 1 mark staff 5955 Aug 26 16 19 xd container rw r r 1 mark staff 5919 Aug 26 16 19 xd singlenode code ,XD-759,
UDP and Legacy syslog sources emit a Map ; reactor emits a POJO. Make them consistent and emit Tuple s.,XD-758,
"Create a processing module based on SI s aggregator component. The completion criteria for the aggregator should be a simple count of messages e.g. received 50 messages and a timeout so that messages don t stay in the aggregator module for more than 30 seconds. Implementation suggestions Create an XML based processing module definition using the SI aggregator namespace. Only the options to support the features in the description should be exposed as property placeholders. How to know it works A shell style integration test that has a source that sends a known amount of messages. A ticktock like module would perhaps be a good example. 10 messages sent every 100ms with an aggregator set to a aggregate count of 10, should have 1 message output perhaps to file sink whose name is based on time as well, is that possible. . A ticktock example with a 1 second delay and with the aggregator module set to have a timeout of 0.5 seconds will have only one message in the file again assumign the file name has a timestamp counter in the filename . ",XD-757,
"The splitter functionality in Spring Integration should be exposed to XD as a processing module. The splitter should use a SpEL expression to specify how to split the message up. Implementation Suggestions This should be a simple XML based module definition that has input output channels and has the SpEL expression parameterized. The default value of the SpEL expression should result in the message not being split. How to check it works The current file or tail input source can be used to split up the text in a file into words. The tail module should be checked to see how many lines of text it will read into memory at once. The file module node with the file to string transformer will only work for small files as it keep the whole file in memory. If there is a big memory inefficiency in using the tail file input source, create a new story to investigate how to have a file based input source that creates a message per line of text or something that is will not result in excessive memory usage. ",XD-756,
Use a profile or similar to only include the Environment conditionally currently in module common.xml. Also Jon Brisbin one thing to keep in mind we talked about having a properties file for XD that configured the RingBuffer et al in a non default way Jon Brisbin e.g. no event loop Dispatchers a ThreadPoolDispatcher with a large thread pool size 50 threads? 100? and maybe even two RingBufferDispatchers input and output Jon Brisbin so we might want to change from strictly a default Environment bean to an EnvironmentFactoryBean with a specific configuration thinking about it now I maybe should add a namespace element for the Environment,XD-755,
container and event . XDContainer references and is referenced by ContainerStartedEvent and stopped . https sonar.springsource.org drilldown measures 7173?metric package cycles rids 5B 5D 7717 ,XD-754,
We need to have a properties section documented as well so that users can setup their jdbc connections for the various components.,XD-753,
"Currently the Job launcher launches all the batch jobs configured in the job module. Please refer, ModuleJobLauncher s executeBatchJob . This makes the JobRegistry registers with multiple batch jobs under the same Spring XD job name group name . Also, it is understood that having multiple jobs configuration under the same config xml is uncommon.",XD-752,
Technically speaking of we want to integrate XD UI on Hadoop tools we should do it so that the proxy on resource manager works with XD UI. From Hadoop Yarn resource manager point of view this proxied url is the applications tracking url which is registered when application is deployed .,XD-751,
"1. We ll need a system which give better control of what yarn xd containers are out there and what is a status of those containers. 2. We also need grouping of containers order to choose, prioritize and scale tasks. 3. We need heartbeating of the grid nodes. Hadoop Yarn itself doesn t give enough tools to know if container is alive .",XD-750,
We need to be able to talk to appmaster which will control the whole xd yarn app. 1. Choose the implementation? Thrift? Spring Int? Something else? ,XD-749,
1. How we talk to the XD instance s on Yarn 2. There is a rest interface which location can be exposed either via resource manager or appmaster 3. Technically appmaster could also expose interface which could eihter be proxy for xd rest or dedicated interface implementation i.e. thrift or spring int ,XD-748,
"The current XD JobController that returns a list of jobs has quite a different API signature than what is in spring batch admin. To simplify the UI'development, a new controller JobAdminController, will be created that lives under the request path jobs admin. The goal is to return a the current JSON structure of spring batch admin jobs request and make only minimal changes to implementations of controllers as found . See 1 in the Doc link to json output doc for spring batch . Implementation Suggestions There will need to be some SpringMVC setup that will enable the current style of spring batch admin controller requests to co exist with the existing XD Controllers, e.g. the use of .json for json marshalling etc. This may in fact be the bulk of time spend in this first story to integration spring batch admin style controllers into XD. A new controller named JobAdminController that in the spring xd dirt project in the package org.springframework.xd.dirt.rest. The JobAdminController will not need to follow the same HATEOAS style as the other controllers at this time. The current controller in Spring Batch Admin looks like this code RequestMapping value jobs , method RequestMethod.GET public void jobs ModelMap model, RequestParam defaultValue 0 int startJob, RequestParam defaultValue 20 int pageSize int total jobService.countJobs ; TableUtils.addPagination model, total, startJob, pageSize, Job ; Collection String names jobService.listJobs startJob, pageSize ; List JobInfo jobs new ArrayList JobInfo ; for String name names int count 0; try count jobService.countJobExecutionsForJob name ; catch NoSuchJobException e shouldn t happen boolean launchable jobService.isLaunchable name ; boolean incrementable jobService.isIncrementable name ; jobs.add new JobInfo name, count, null, launchable, incrementable ; model.addAttribute jobs , jobs ; code Something like code RequestMapping value jobs admin jobs , method RequestMethod.GET public void jobs ModelMap model, RequestParam defaultValue 0 int startJob, RequestParam defaultValue 20 int pageSize We do not have to query the Spring Batch Admin JobService at this time, but instead use the JobDeployer to get information about jobs launched by Spring XD Iterable JobDefinition jobDefinitions dobDeployer.findAll copy these over to a List JobInfo as best as possible, copy name over. not sure how description is getting added to the JSON pari code How to verify it works A sample job needs to be in the modules job directory. JobCommandTests AbstractJobIntegrationTest seems to have what is need to stage a job for ",XD-745,
We should depend on dependency groupId org.springframework.batch groupId artifactId spring batch admin manager artifactId version project.parent.version version dependency dependency groupId org.springframework.batch groupId artifactId spring batch admin resources artifactId version project.parent.version version dependency we are using spring batch 2.2.0.RELEASE. We need to depend on spring batch admin version 1.3.0.BUILD SNAPSHOT ,XD-744,
"Unlike in spring batch admin, in SpringXD all the jobs the modules jobs directory is not visible to query when the server starts. Jobs only become visible to XD s jobs list command once they have been created . Creating a Job in XD is an opportunity to specify additional values to any property placeholders in the job bean definition. This isn t part of spring batch admin. We will not worry about the creation of job definition in this story. Assume that they have been created already and that the GET for jobs works as it does now for Spring XD. We should however, make sure that there is always a replacement of the job name in the job bean definition to match the name specified in the command line. That is job create name myjob description thisfunkyjob will use myjob to replace job id xd.stream.name in the file thisfunkyjob.xml Implementation Suggestions This should hopefully just be a matter of changing job definition files to follow the naming pattern. job id xd.stream.name How to verify it works 1. Create a JUnit integration style test that has job create name myjob defintion testJob and then deploy the job. The name myjob should appear in the job execution table ",XD-743,
Currently Main class provide alternate static methods for parsing CLI options. One used for testing does not call System.exit just throws an exception. This code should be moved to spring xd test to support integration testing.,XD-740,
"Remove System.setProperty or System.getProperty for internal xd properties. Use spring Environment abstraction instead. Also, replace . in property names with XDPropertyKeys . This is compatible with environment variable names. As a result, XD should accept System properties or environment variables or command line options. Command line options should have highest precedence. Retain StandardEnvironment order wrt to System properties and environment variable. ",XD-739,
"Rename XDContainer, ContainerMain, ContainerLauncher, ContainerLauncherFactory and any variable or methodNames, bean names, etc. that refer to container in favor of the term Node . Eliminate the dirt.container package, and move Node into .server",XD-738,
"Trigger can send a message to a named channel. For example trigger create name mytrigger definition trigger cron 10 message Good Luck, we are all counting on you channel foo Where the message contains the message that will be sent to foo job component.",XD-737,
This story utilizes BatchAdmin and its restful interfaces to show the state of jobs in Spring XD. Steps Create a Branch in the BatchAdmin we don t want to lose history Update the restful API s to XD standards. Create bamboo task to push jars to artifactory Update gradle.build to pull in the Batchadmin jars. Expose the restful calls.,XD-736,
The HSQLDB that stores the JobRepository needs to have its content exposed via TCP network service so that container has access to update the status of a job run. Needs to have property that enumerates the host and port for the admin that is accessible by the user. If one is not specified it should default to localhost 9500. Testing Unit Tests Bring up module and admin. ^Verify that default host and port work ^Verify that container on different machine has access to admin ,XD-735,
"When creating a job, a named channel will be created with a name of job. your job name i.e. job.foo. Required components A Transform See XD 733 JobPlugin needs to create the NamedChannel for the job and associate the transform. Registrar.xml will need an input channel? Name channel support will be required. Add channel to job rest apis to notify system that a named channel is requested. Unit Test ",XD-734,
"The JobLaunchRequest Transformer shall accept the following payloads File JSON String Properties Map Tuple Use Migrate some of the logic from JobParametersBean , e.g. using the DefaultJobParametersConverter . Special Case File When handling a File , add special JobParameter absoluteFilePath populating it with message.getPayload .getAbsolutePath Add unit tests ",XD-733,
code filter expression payload.myfield.startsWith foo code Example using index code filter expression payload.2.startsWith foo code This should support nested keys as well code filter expression payload.myfield.subfield.startsWith foo code This is related to https jira.springsource.org browse XD 676 and that in turn depends on SI being able to configure SpEL,XD-732,
Enhance bean naming strategy or provide a value for the property that binds to this,XD-731,
Configure embedded servlet container needs to know where to load the UI code.,XD-730,
The UI code will be sitting in one or more top level directories in the repository This story will address the need to 1 copy over the UI code into a location so that it can be picked up by the embedded servlet container when the distribution zip is unzipped . After running . xd admin or . xd singlenode one should be able to hit the UI at http localhost 8999 xd just an example ,XD-729,
The UI code will be sitting in one or more top level directories in the repository This story will address the need to 1 copy over the UI code into a location so that it can be picked up by the embedded servlet container when running inside eclipse,XD-728,
Create a directory structure that best benefits UI'development. The copying of the UI files and other gradle build tasks so that the UI can be run inside the embedded servlet container of XD will be a seperate story,XD-727,
Register the module under test Send a message to the sink using a test source and verify the sink contents this requires checking an external resource depends on the sink ,XD-726,
Register the module under test and have access to a source channel that drives messages into the processor and a output channel where output messages are sent. Examples Built in Message conversion send JSON to a processor module that accepts Tuples. ,XD-725,
"Register the module under test and deploy the module Verify output across all transports Examples Be able to start the rabbitmq source just by pointing to modules source rabbit.xml, pass in some property file for parameters to be replaced, and outgoing message is placed in a in memory queue backed channel for use with assertions to verify functionality. Test that sending json, results in media type header is set to json Test that sending POJO POJO Test that sending Tuple Tuple Test that sending a JSON String String Test that sending raw bytes raw bytes ",XD-724,
"There are a lot of Thread.sleep calls with delays chosen in the 1 2 seconds range. Change to a while loop with smaller pauses until a timeout is reached and give up. This applies to verification code e.g. verifying that a counter has expected value as well as File setup, or http being ready to accept requests etc",XD-723,
This is the other side of launching a job by sending a message. The Job plugin should add listeners at the job step level so that the job step context information can be sent out on a channel. myjob.notifications is a suggested channel name that would be created automatically.,XD-722,
"After the xd singlenode process has started, create a new job that has dependencies not already in the parent application context, and then create and run a new job that uses the new module. Implementation Suggestions Develop in the test tree, we can put in the jar and config from https github.com SpringSource spring xd samples tree master batch simple How to verify it works. In a JUnit test case copy in a new job that has new dependencies, ..copy the lib and config directories into the location where the ModuleRegisty will pick it up. Deploy a new job and check in the job repository that the job ran and was successful. ",XD-721,
"After the xd singlenode process has started, create a new module that has dependencies not already in the parent application context, and then create a stream that uses the new module. Implementation Suggestions Develop in the test tree, maybe of the xd shell project, a new module. the lib and config should be sititng around in a directory waiting to be copied into the appropriate spot. Could try http www.date4j.net ..The config file would be similar to time.xml but use the date4j class. How to verify it works In a JUnit test case copy in a new module that has new dependencies, ..copy the lib and config directories into the location where the ModuleRegisty will pick it up. Deploy a new stream, date4j file and see if there are contents in the file. ",XD-720,
"Convert a simple module, such as file, to further test that what was done in the previous story, Use ParentLastClassLoader to create the Modules ApplicationContext. works as expected. Implementation Suggestions Remove from build.gradle the dependency on spring integration file and place that jar inside a directory . modules source file lib place the current file.xml inside . modules source file config How to verify it works. 1. Running tests that currently use the file source, e.g. in spring shell, should work as before 2. When deploying a stream file log, we should be able to interrogate the channel registry and make sure it found the dependencies for the module, ModuleDescriptor should have a not null URL property.",XD-719,
"The ParentLastClassloader is located in the spring hadoop project. It will resolve classes first looking at the child context and then the parent. This works well for XD since the we want and dependencies of the module to be considered first and if not found, resolve against the parent. It would be possible to even include other versions of .jars already in the parent classloaders e.g. Spring Integration jars , but for now, we will not immediately test that case. SimpleModule needs to change to that we can pass in the classloader to use for creating the application context. The current implementation creates a GenericApplicationContext as a field initializer...that should change to be in the ctor. ModuleDeployer should implement .BeanClassLoaderAware. The classloader passed in to the BeanClassLoaderAware callback will be used as the parent when creating the ParentLastClassloader. The URL to pass into ParentLastClassloader should be null or an empty array in this case of an older style module. Hopefully ParentLastClassloader allows that type of fallback . Implementation Suggestions The ModuleDeployer code is where the application context for the module is defined and instantiated. Here is a possible impl path. 1. Assuming we can always use ParentLastClassloader even for older style modules , then the ModuleDescriptor needs to return an array of URL locations for the module, getURL . This is passed into the cto for SimpleModule. The ctor then creates a new application context, creates the parentclassloader, sets the classloader on the application context and then proceeds as normal. 2.AbstractModuleRegistry should try and load the resource from two possible locations, e.g. . modules source file config file.xml or . modules source file.xml The module registry needs to be a bit smarter to know, ah, i see a config directory, let me try . config file.xml otherwise just . file.xml How to verify it works. 1. JUnit test in which one of the ModuleRegistry implementations points to a test directory that contains both old and new style modules. FileModuleRegistry is probably a good choice here. Need to test that the new getting for URL works as expected. 2. Existing tests should run as they did before, in particular the shell integration tests.",XD-718,
. xd admin transport redis . xd container transport redis . xd container transport redis xd stream create name httpStream definition http file Created new stream httpStream xd tap create name httpTap definition tap httpStream counter Created and deployed new tap httpTap xd http post target http localhost 9000 data helloworld POST text plain;Charset UTF 8 http localhost 9000 helloworld 200 OK xd ! cat tmp xd output httpStream.out command is cat tmp xd output httpStream.out helloworld xd http post target http localhost 9000 data helloworld POST text plain;Charset UTF 8 http localhost 9000 helloworld 200 OK xd ! cat tmp xd output httpStream.out command is cat tmp xd output httpStream.out helloworld xd ! cat tmp xd output httpStream.out command is cat tmp xd output httpStream.out helloworld xd http post target http localhost 9000 data helloworld2 POST text plain;Charset UTF 8 http localhost 9000 helloworld2 200 OK xd ! cat tmp xd output httpStream.out command is cat tmp xd output httpStream.out helloworld helloworld2 xd http post target http localhost 9000 data helloworld3 POST text plain;Charset UTF 8 http localhost 9000 helloworld3 200 OK xd ! cat tmp xd output httpStream.out command is cat tmp xd output httpStream.out helloworld helloworld2 helloworld3 xd http post target http localhost 9000 data helloworld3 POST text plain;Charset UTF 8 http localhost 9000 helloworld3 200 OK xd ! cat tmp xd output httpStream.out command is cat tmp xd output httpStream.out helloworld helloworld2 helloworld3 xd ! cat tmp xd output httpStream.out command is cat tmp xd output httpStream.out helloworld helloworld2 helloworld3 xd http post target http localhost 9000 data helloworld3 POST text plain;Charset UTF 8 http localhost 9000 helloworld3 200 OK xd http post target http localhost 9000 data helloworld3 POST text plain;Charset UTF 8 http localhost 9000 helloworld3 200 OK xd http post target http localhost 9000 data helloworld3 POST text plain;Charset UTF 8 http localhost 9000 helloworld3 200 OK xd ! cat tmp xd output httpStream.out command is cat tmp xd output httpStream.out helloworld helloworld2 helloworld3 xd http post target http localhost 9000 data helloworld4 POST text plain;Charset UTF 8 http localhost 9000 helloworld4 200 OK xd ! cat tmp xd output httpStream.out command is cat tmp xd output httpStream.out helloworld helloworld2 helloworld3 helloworld4 xd counter display name httpTap 9 xd however in the regular shell. cat tmp xd output httpStream.out helloworld helloworld helloworld2 helloworld3 helloworld3 helloworld3 helloworld3 helloworld3 helloworld4 ,XD-717,
The above method is invoked before the shared context is refreshed. preProcess... is more accurate,XD-714,
Register in MBeanExportingPlugin. ,XD-711,
"Update JavaDocs in Plugin interface to clearly describe the Plugin contract, i.e., where in the lifecycle each method is invoked",XD-710,
Remove unnecessary code that adds beans to shared context after refresh Scheduler should not be in common.xml register it in TriggerPlugin.postProcessSharedContext ,XD-709,
SingleNodeMain parent new AC .. AdminMain.launch parent ; ContainerMain.launch parent ; This should make startup processing more consistent and symmetrical ,XD-708,
"Description When a job is created in SpringXD, a control channel for that job is also created. The listener for that channel will receive a message, be able to take the jobParameters and other launch information from the message, and be able to launch run the job. NOTE I can see a few other stories that should probably be made to break this up after writing it. I put estimate of 10 for now, but we should break this up. Here are some suggestions 1. create data only JobParametersBean equivalent with primitive types 2. create jobLauncher source 3. create jobParameterTransformer processor 4. Refactoring of ChannelRegistry s aliasHing to use a callback strategy. Implementation Suggestions job create name helloWorldJob definition myjob somePropertyToOverride someValue This would not execute the batch job immediately, but instead register the job definition and deploys a jobLauncher and the job definition to an XD Container. The XD Container that receives the deploy request message will create a module application context, will also create a channel with the Channel registry named after the job, e.g. myJob. This should be a pub sub channel from the point of view of the middleware. From the point of view of the spring integration channel, it should ideally be of the executor channel. There is a limitation in the current implementation of ChannelRegistry now as createInbound only creates direct channels. The boolean aliasHint should probably be extended to some type of callback that creates a channel. The aliasHint was added to address the case of LocalChannelRegistry creating or looking up a queue backed channel or a direct channel. There will be a consumer on the SI channel in the module application context that will be responsible for getting the job launch information and launching the job. The launching of the job may need to be explicitly done in a separate thread if direct channels are created by the ChannelRegistry. The contents of the message should be something similar to the current JobParametersBean , it needs to be easily serializable with simple types via JSON over the wire. The current impl of JobParametersBean has ObjectMapper, so that may require a bit of reworking. The handler of the message will use the jobLauncher to launch the job, using the information in the JobParametersBean. The myjob can then be launched by sending a message, perhaps this is handled by having a jobLauncher source jobLauncher jobParameters jobParameters dateFormat dateFormat numberFormat numberFormat makeUnique makeUnique myJob e.g. with no args jobLauncher myJob How to verify it works With the test HelloSpringXDTasklet, we should be able to create the job job create name helloSpringXD definition myjob This will not launch the job as mentioned in the implementation section. It would then be launched by jobLauncher myJob where jobLauncher is a new source. Ideally would like to be able to test a data driven triggering. This would require a new file source that doesn t use the file to string transformer, but lets a File object be the payload. file jobParameterTransformer myJob ",XD-705,
Need to support Rabbit virtual host property in properties file and as args to Rabbit source and sink,XD-704,
"The current code is creating an in memory job repository for each batch job that is launched. This makes it impossible to query the tables in the job repository across the cluster. A single job repository that is backed by a file need to be shared across all jobs that are a launched. Implementation Suggestions The XDAdmin server should create the job repository schema, if not found, in a HSQLDB database, when it starts up The bean definitions should be added to the same context that the analytics are being loaded in as it is already shared across xd admin xd container. The analytics context should be renamed to something more generic, shared parent context or something. There is some clean up removal of the code in the current JobPlugin, META INF spring xd plugins job common.xml wouldn t be needed anymore. That might be all, not sure. How to verify it works A JUnit test that verifies the spring batch tables were created in the job repository when xd admin is launched. This would require deleting the backing db file before instantiating singlenode xd admin xd container. If you start the xd container it should be able to find the necessary DataSource JobRepository beans information to be able to contact the database. We don t have DI style JUnit tests so this will required getting a reference to the xd container and it s application context, and performing getBean JobRepository.class ",XD-703,
"NOTE even if we do want to prevent the use of module names for stream names, we obviously need to avoid a StackOverflowError to reproduce start the xd singlenode container start the xd shell, and type the following code xd stream create time definition time log code that should produce an Internal Server Error output message check the xd singlenode console, and find code SEVERE Servlet.service for servlet xd in context with path threw exception Handler processing failed; nested exception is java.lang.StackOverflowError with root cause java.lang.StackOverflowError at java.lang.StringValue.from StringValue.java 24 at java.lang.String. init String.java 178 at org.springframework.xd.dirt.stream.dsl.Token. init Token.java 46 at org.springframework.xd.dirt.stream.dsl.Tokenizer.lexIdentifier Tokenizer.java 195 at org.springframework.xd.dirt.stream.dsl.Tokenizer.process Tokenizer.java 62 at org.springframework.xd.dirt.stream.dsl.Tokenizer. init Tokenizer.java 41 at org.springframework.xd.dirt.stream.dsl.StreamConfigParser.parse StreamConfigParser.java 65 at org.springframework.xd.dirt.stream.dsl.StreamConfigParser.parse StreamConfigParser.java 55 at org.springframework.xd.dirt.stream.dsl.StreamConfigParser.lookupStream StreamConfigParser.java 545 at org.springframework.xd.dirt.stream.dsl.StreamNode.resolveModuleNodes StreamNode.java 135 at org.springframework.xd.dirt.stream.dsl.StreamNode.resolve StreamNode.java 122 at org.springframework.xd.dirt.stream.dsl.StreamsNode.resolve StreamsNode.java 53 at org.springframework.xd.dirt.stream.dsl.StreamConfigParser.parse StreamConfigParser.java 74 at org.springframework.xd.dirt.stream.dsl.StreamConfigParser.parse StreamConfigParser.java 55 at org.springframework.xd.dirt.stream.dsl.StreamConfigParser.lookupStream StreamConfigParser.java 545 at org.springframework.xd.dirt.stream.dsl.StreamNode.resolveModuleNodes StreamNode.java 135 at org.springframework.xd.dirt.stream.dsl.StreamNode.resolve StreamNode.java 122 at org.springframework.xd.dirt.stream.dsl.StreamsNode.resolve StreamsNode.java 53 at org.springframework.xd.dirt.stream.dsl.StreamConfigParser.parse StreamConfigParser.java 74 at org.springframework.xd.dirt.stream.dsl.StreamConfigParser.parse StreamConfigParser.java 55 at org.springframework.xd.dirt.stream.dsl.StreamConfigParser.lookupStream StreamConfigParser.java 545 at org.springframework.xd.dirt.stream.dsl.StreamNode.resolveModuleNodes StreamNode.java 135 at org.springframework.xd.dirt.stream.dsl.StreamNode.resolve StreamNode.java 122 at org.springframework.xd.dirt.stream.dsl.StreamsNode.resolve StreamsNode.java 53 ...ad nauseum code ",XD-702,
"After an initial attempt which was not ready for M2 we are rethinking our strategy. One of the fundamental things we have come to realize is that its important to treat serialization and type conversion as separate concerns. Serialization A core principle is the consumer should by default receive exactly what the producer sent If the producer sends a byte payload then no serialization is required. A String payload can use simple byte conversion, taking the Charset into account Transporting an Object uses whatever serialization is configured json, xml, avro, protocol buffer, java.io, msgpack, etc. . The actual serialization performed for each message must be shared with the producer and consumer. I.e., the consumer needs to know which case above applies to each payload. Currently we are using the MessageHeaders.CONTENT TYPE defining custom mime types for this The designated header is subject to change Conversion The consumer optionally defines one or more content types read MimeType it can accept in order of preference. If no conversion succeeds, we can either give them the byte payload or throw an exception configurable? . Examples Consumer accepts a Java Object application x java object;type example.Foo . Assume for simplicity, the consumer may send a JSON String, or a Foo. On the receiving end we need to distinguish a String payload containing a JSON representation of Foo from a serialized Foo payload. If the payload is a String, we need to know that its original content is application json. We are currently using a 2nd original content type message header to supply this information. So in the first case we have conceptually content type XD plain text , original content type application json . In the second case we have content type XD Serialized JSON original content type not used in this case since the serialized JSON includes type information using Jackson conventions which are a bit brittle . If the producer type is different from the accepted type, we use the conversion service and the consumer must register appropriate converters. A twist for XD that may be generally relevant is that some optimization is possible when we know the bytes represent JSON Tuple conversion Since we serialize using JSON and we know how to transform JSON Tuple, we can convert any Object payload or any JSON String to a Tuple. We can avoid the two step deserialization conversion, e.g. 1 Foo JSON Foo 2 Foo Tuple. ",XD-701,
Remove bean id idGenerator class org.springframework.xd.dirt.container.UUIDGenerator container.xml Delete org.springframework.xd.dirt.container.UUIDGenerator remove compile dependency on eaio from build.gradle,XD-700,
"When trying to undeploy destroy a tap that has reference to an already deleted stream fails with the following exception Command failed org.springframework.xd.rest.client.impl.SpringXDException XD116E pos 4 unrecognized stream reference stream name at the tap defintion . As expected, the StreamConfigParser s lookupStream fails to find the stream name as the stream doesn t exist in the repository. In this scenario, what is a better way to handle the tap operations. Should we undeploy the tap when the stream is destroyed? though I'don t see an easy way to find the taps that use a specific stream .",XD-699,
Automate running integration tests on all supported transports,XD-698,
we should check the actual deployment requests were built correctly for each module in the testCreateUndeployAndDeleteOfStream test. Currently we just use the anyListOf check.,XD-694,
Make the default value of enableJmx false until we have tested documented JMX functionality,XD-691,
"AbstractDeployer has 4 subclasses, 3 of which override e.g. deploy making the boilerplate factorization ineffective. Introduce an intermediate class for those deployers that support the concept of an instance Stream, Tap, Job to some extent ",XD-690,
String byte string.getBytes byte byte no serialization Pojo configured serialization ,XD-689,
"stream create name test1 definition http port 8827 gemfire server Created new stream test1 stream create name test2 definition http port 8828 gemfire json server Created new stream test2 even if gemfire server is not started, streams are successfully created. This behavior is inconsistent with hdfs where if hdfs connection is not available, creating stream using http hdfs will fail. ",XD-688,
"xd stream create name testgemfire definition http port 8887 gemfire 16 20 28,503 WARN Spring Shell client.RestTemplate 524 POST request for http localhost 8080 streams resulted in 500 Internal Server Error ; invoking error handler Command failed org.springframework.xd.rest.client.impl.SpringXDException org.springframework.beans.factory.BeanDefinitionStoreException Invalid bean definition with name region defined in null Could not resolve placeholder regionName in string value regionName ",XD-687,
Provide some syntax allowing multiple tap points to be directed to a named channel. e.g. tap foo.4 namedTap tap bar.2 namedTap or tap.foo counter,XD-686,
Taps are currently source modules. They could be refactored to simply bridge the tapped module s tap pub sub topic directly with conversion to the first tap module s input channel. Note ensure destroy works. Currently the tap is destroyed by the simple fact it is a module; if it s no longer a module we ll need special handling to stop remove the tap adapter.,XD-685,
"also, the current behavior is broken; it checks if the property is set but does not actually check whether it s true or false",XD-683,
"The expression currently appends . suffix where the default suffix is out . If the suffix value were an empty String, this would lead to the file name ending with a dot. We should update the expression so that it only appends the dot if the suffix is not empty. This might be possible with a ternary expression.",XD-682,
See https github.com dturanski spring xd commit 18302ec62a85d5fd8918beb26cf19968d4a63a2d,XD-681,
This example should require no code. Just the basic XML.,XD-680,
Please put in suggestions for the current .settings file. Maybe one suggestion is to not format on save?,XD-679,
Example using name code filter expression payload.myfield.startsWith foo code Example using index code filter expression payload.2.startsWith foo code This should support nested keys as well code filter expression payload.myfield.subfield.startsWith foo code ,XD-676,
"Because StringToJsonNodeTransformer expects a String as input, one cannot chain json related processors. A simple solution would be to also accept Jackson IN and forward it directly in that case.",XD-675,
"the value for target is required there is no default , but the hint for that option states otherwise code xd http post target http post target required target the location to post to; default if option not present http localhost 9000 code ",XD-673,
should go thru the list of all commands available and make sure that a simple not connected message is returned instead of something like this code org.springframework.web.client.ResourceAccessException I O error on GET request for http localhost 8080 Unexpected end of file from server; nested exception is java.net.SocketException Unexpected end of file from server at org.springframework.web.client.RestTemplate.doExecute RestTemplate.java 498 .... code ,XD-672,
"It should be possible to create streams like the following which rely upon named channel support and dynamic routing capabilities code http somerouter x xtransformer hdfs y ytransformer hdfs code The somerouter processor could return x or y which determines the downstream path for each message. This should be implemented in such a way that any developer adding a router module would only need to deal with existing Spring Integration semantics in this case, only considering the return of x or y whether it be SpEL or a POJO method invocation . Perhaps in the plugin that modifies a module context, we could simply add a new ChannelResolver implementation by adding that ChannelResolver as a bean and or a BeanPostProcessor that configures that as the resolver for any router, if necessary . That ChannelResolver would have a reference to the ChannelRegistry so that the router actually sends its messages to those shared channels. The shared channels themselves would have been created as long as a valid downstream flow has been defined.",XD-671,
Provide Shell TAB completion when referencing an existing entity,XD-670,
Not only should it not use Joda see XD 668 but the passing of dates currently relies on default formatting,XD-669,
The Rest Client project should not impose Joda to the user.,XD-668,
"Currently, the initial tap module accepted media types are not retrieved from the module when creating the tap.",XD-667,
Redis transport headers are not removed in taps.,XD-666,
It would be nice to have lastHours and lastDays options for aggregatecounter display command.,XD-665,
"Keep getting the following warning WARN Spring Shell conf.Configuration 817 fs.default.name is deprecated. Instead, use fs.defaultFS Should switch to use the runtime value of the FS DEFAULT NAME KEY constant based on Hadoop version used.",XD-663,
Remove the NoOpRedisSerializer and use the non serialization feature of M2.,XD-658,
"Consider 2 Admins Containers that are using discrete Redis instances but a shared Rabbit instance for the transport. If two different streams are deployed on each, but with the same stream name, the Rabbit queues will be common e.g. foo.0 , causing crosstalk. Stream names must be unique across all container instances sharing Rabbit infrastructure. I am not sure what the solution is; two instances of the same stream do need common queues but instances of different streams need a qualifier of some kind container name? . I guess it s not that big of an issue because, if they re sharing infrastructure, they re likely to be sharing a stream repo too in which case you d need unique stream names.",XD-656,
Instead of xd http post target http localhost 9898 data hello world POST text plain;charset UTF 8 http localhost 9898 hello world 200 OK Content Length 0 Connection keep alive Success sending data hello world to target http localhost 9898 have xd http post target http localhost 9898 data hello world POST text plain;charset UTF 8 http localhost 9898 hello world 200 OK or better yet xd http post target http localhost 9898 data hello world 200 OK POST text plain;charset UTF 8 http localhost 9898 hello world ,XD-655,
Support pubsub named channels the story could be a bit more general though enable channel creation with configurable settings via the REST API and shell namedchannel create foo domain PUBSUB,XD-654,
"Allow Json payloads from external sources, e.g., http post to contain single quoted field names and values. This is required where XD uses Jackson to convert payloads from Json to object or Tuples.",XD-653,
"Any kind of sophisticated artifact retrieval mechanism in XD will need to grab more than one kind of artifact at once. For example, if I want to see all taps, streams, triggers, and jobs ie everything , I need to make 4 http requests. I can imagine dashboards that need to display information on artifacts of multiple kinds. There will also need to be a way to pass a query to return a sub set of artifacts, but that should be designed separately.",XD-651,
"After running gradle refresh source folders on the spring xd module project in Eclipse, there is an error because the src test java folder is missing. Solution is to add a placeholder file.",XD-650,
This will come back in M3 once we iron out the issues.,XD-649,
"As we overwrote changes to file source by mistake, let s add some regression tests, esp. to the file location. Plan on extending the utility source and sink functionality",XD-648,
"Current implementation converts to a String. See if we can emit raw payload given that we also emit content type header Setting to 8 points, as this may have lots of implications down the line though",XD-647,
"support of the alpha parameter is awkward and can confuse people who are expecting a simple average mean. Consider splitting RichGauge in two flavors arithmetic and exponential. Involves quite some work at the repository, handler and REST level though... ",XD-646,
We need to add support for matching column names with underscores like user name and map them to camel case style keys like userName in the JdbcMessagePayloadTransformer.,XD-643,
"Figure 1 here https github.com SpringSource spring xd wiki Architecture should also show Rabbit as an option, since otherwise people will think we are tied to redis.",XD-642,
"Factor out common Redis Rabbit ChannelRegistry code. Also, factor out common inbound tap code very similar . Change transport nternals to Use AbstractTransformer instead of ARPMH and BridgeHandler .",XD-637,
"The AbstractReplyProducingMessageHandler in the Rabbit transport exposes the internal transport content type, if none existed on the original transported message.",XD-636,
pollers should standardize on fixed delay vs fixed rate. The value should accept a property with a standard name like interval ,XD-635,
Spring Xd currently ships with Guava 12.0 while Hadoop 2.0.5 and Pivotal HD 1.0 depends on 11.0.2 this could lead to classpath problems if we include both.,XD-634,
Consistency with JMS Source.,XD-633,
E.g. allow for posting of JSON data stored in local files. Allow users to specify the content type . Ensure that Unicode data UTF posts correctly.,XD-632,
"The classes under test are pluralized. Therefore, the test classes themselves should reflect that. E.g. rename JobCommandTests to JobCommandsTests as it tests class JobCommands . Please check all tests in that package for correct naming.",XD-631,
home gpr Documents github spring xd spring xd analytics src main java org springframework xd store AbstractRedisRepository.java 196 warning param argument the is not a parameter name. home gpr Documents github spring xd spring xd module src main java org springframework xd module AbstractPlugin.java 93 warning return tag has no arguments. home gpr Documents github spring xd spring xd rest domain src main java org springframework xd rest client util RestTemplateMessageConverterUtil.java 63 warning Tag link reference not found StreamDefinitionResource.Page home gpr Documents github spring xd spring xd rest client src main java org springframework xd rest client TapOperations.java 40 warning param argument control is not a parameter name. home gpr Documents github spring xd spring xd dirt src main java org springframework xd dirt server options OptionUtils.java 29 warning parame is an unknown tag. home gpr Documents github spring xd spring xd dirt src main java org springframework xd dirt stream MissingRequiredDefinitionException.java 38 warning param argument name is not a parameter name. home gpr Documents github spring xd spring xd dirt src main java org springframework xd dirt stream StreamServer.java 102 warning return tag has no arguments. home gpr Documents github spring xd spring xd dirt src main java org springframework xd dirt stream TapDefinition.java 57 warning return tag has no arguments. home gpr Documents github spring xd spring xd module src main java org springframework xd module AbstractPlugin.java 93 warning param argument group is not a parameter name. home gpr Documents github spring xd spring xd module src main java org springframework xd module AbstractPlugin.java 93 warning param argument index is not a parameter name. home gpr Documents github spring xd spring xd module src main java org springframework xd module AbstractPlugin.java 101 warning param argument group is not a parameter name. home gpr Documents github spring xd spring xd module src main java org springframework xd module AbstractPlugin.java 101 warning param argument index is not a parameter name. home gpr Documents github spring xd spring xd dirt src main java org springframework integration x json TypedJsonMapper.java 133 warning return tag has no arguments. home gpr Documents github spring xd spring xd shell src main java org springframework xd shell util UiUtils.java 60 warning CloudApplication is an unknown tag. home gpr Documents github spring xd spring xd tuple src main java org springframework xd tuple TupleJsonMarshaller.java 26 warning param argument tupleToStringConverter is not a parameter name. home gpr Documents github spring xd spring xd tuple src main java org springframework xd tuple TupleJsonMarshaller.java 26 warning param argument stringToTupleConverter is not a parameter name. home gpr Documents github spring xd spring xd dirt src main java org springframework xd dirt stream dsl DSLException.java 89 warning return tag has no arguments. home gpr Documents github spring xd spring xd dirt src main java org springframework xd dirt stream dsl StreamLookupEnvironment.java 60 warning return tag has no arguments. ,XD-622,
"Currently, you have to set the default name node every time your start the shell. We should do 2 things Provide a default Name node Set Default Hadoop Name Node for Shell hdfs localhost 8020 Should we provide some form of persistence? It kind of sucks that you have to re specify the name node every time the shell starts up code xd hadoop fs ls You must set fs URL before run fs commands code ",XD-621,
Model the API more akin to SpringXDOperations api.,XD-620,
"Was following the now updated directions for gemfire cq source. xd stream create name stocks definition http port 9090 gemfire json server regionName Stocks keyExpression payload.getField symbol xd stream create name cqtest definition gemfire cq query Select from Stocks where symbol VMW file xd http post target http localhost 9090 data symbol VMW , price 73 The double quotes were causing a problem with xd singlenode Aug 06, 2013 5 38 15 PM org.jboss.netty.channel.SimpleChannelUpstreamHandler WARNING EXCEPTION, please implement org.springframework.integration.x.http.NettyHttpInboundChannelAdapter Handler.exceptionCaught for proper handling. org.springframework.integration.transformer.MessageTransformationException org.springframework.integration.MessageHandlingException org.springframework.integration.transformer.MessageTransformationException Expected a after a key at 22 character 23 line 1 at org.springframework.integration.transformer.MessageTransformingHandler.handleRequestMessage MessageTransformingHandler.java 73 at org.springframework.integration.handler.AbstractReplyProducingMessageHandler.handleMessageInternal AbstractReplyProducingMessageHandler.java 137 at org.springframework.integration.handler.AbstractMessageHandler.handleMessage AbstractMessageHandler.java 73 Using single quotes inside the json brackets worked, need to investigate.",XD-617,
"Content Type during transport transit is not the same as the content type within modules. Real transports always use byte which may contain raw byte from a source, a byte converted from a String which may or may not already contain JSON , or a byte containing JSON converted by the transport on the outbound side. The transport needs to convey which of these was applied on the outbound side so it can properly reconstruct the message. Retain any content type header that already exists in the message, and restore it. For Rabbit, use normal SI Rabbit headers to convey this information. For Redis, add the information to the byte .",XD-614,
"When using Redis store, stored deployed streams should be deployed on container restart.",XD-613,
https github.com springsource spring xd wiki Sinks should have rabbit added to the list and also the corresponding section that shows some basic usage.,XD-612,
http static.springsource.org spring xd docs 1.0.0.BUILD SNAPSHOT reference html sources should have file added to the list and also the corresponding section that shows some basic usage.,XD-611,
http static.springsource.org spring xd docs 1.0.0.BUILD SNAPSHOT reference html sources should have jms added to the list and also the corresponding section that shows some basic usage.,XD-610,
http static.springsource.org spring xd docs 1.0.0.BUILD SNAPSHOT reference html sources should have rabbit added to the list and also the corresponding section that shows some basic usage.,XD-609,
"This may be an issue following the search replace from curl to Shell, but for example, this documentation line does not work http post target http localhost 9000 data symbol VMW , price 72.04 The backslash prior to quote is left in the payload and hence Jackson chokes on it We need clear rules about quoting at the shell level",XD-606,
"The RichGauge section does not mention the alpha parameter in redis output, nor does it explain its meaning.",XD-605,
"Need to investigate why this is happening, normally setting code xml gfe client cache close false code prevents the singleton cache from closing when the application context is closed. ",XD-598,
When running an ad hoc job without the use of a trigger adhoc or named . The user has to wait for job to complete before receiving a success. We need to launch a job and get a success back to the user letting them know the job has been launched. for example immediate,XD-597,
"Add CONTRIBUTING.md file, use the Spring Integration file as the basis.",XD-596,
We need to fix the github wiki to use the xd shell command prompt xd .,XD-595,
"We need to add list delete commands for the metrics InMemoryAggregateCounter FieldValueCounter Gauge RichGauge Currently, the AbstractMetricsController class has the delete method to delete the metric from the repository. We can probably use the same for all the metrics.",XD-594,
Add counter delete shell command. This also requires implementation of DELETE rest end point at CountersController.,XD-593,
The current flow of gradle tasks is confusing. Suggest the following changes to simplify the flow. 1. Move the current task logic in zipXD to distZip 2. Have distZip depend on dist 3. Update the how to build docs on the wiki 4. Make sure that the distZip task only shows up once in the list of gradle target. ,XD-591,
Keep track of named streams that were create and use After to destroy them.,XD-589,
"Both Luke s original code and my refactored PR 1 which uses same code snippet seem to behave strangely. Stored values seem fine, but the getCounts method seems phony. To test 1 stream create foo definition time log 2 tap create bar definition tap foo aggregatecounter 3 curl H application json http localhost 8080 metrics aggregate counters bar this gives default bucketing hourly but chances are that they are empty. ",XD-588,
"Sending data to an incomplete stream which is created using a named sink channel only works when using Redis or Rabbit?, not tested . Since the in memory version doesn t use a queue, it will fail if you are using xd singlenode. We should use a queue channel with unlimited capacity to allow messages to be sent before the full stream is created.",XD-582,
results in both in memory and redis based definitions of RichGaugeService can t satisfy autowiring because there are two candidates. Had to change analytics memory to get the application context to load.,XD-581,
From https github.com SpringSource spring xd pull 161 The command shell needs to also support different hadoop distribution options. Perhaps the shell just uses a relative path to the location of xd lib ,XD-580,
"http localhost 8080 hadoop config fs namenode webhdfs localhost 50070 http localhost 8080 hadoop fs ls Hadoop configuration changed, re initializing shell... run HDFS shell failed. Message is org mortbay util ajax JSON This was on a hadoop 1.0.1 install The hdfs http interface was available curl i http localhost 50070 webhdfs v1 tmp?op GETFILESTATUS HTTP 1.1 200 OK Content Type application json Transfer Encoding chunked Server Jetty 6.1.26 FileStatus accessTime 0, blockSize 0, group supergroup , length 0, modificationTime 1365015846724, owner mpollack , pathSuffix , permission 777 , replication 0, type DIRECTORY ",XD-578,
"The current http command is of the form http localhost 8080 post httpsource target http localhost 9090 data 10 It isn t intuitive to think post , rather the command can be http post target http localhost 9090 data 10 which will allow us to have support for other http verbs and cleanly separate the namespace from hadoop etc. The RestShell from which this came was only concerned with http actions, so the leading command classification probably seemed superfluous. ",XD-575,
e.g. http localhost 8080 post httpsource target http localhost 9090 data 10 I believe this will also help to avoid ugly syntax to escaping quotes for json as in the gemfire example.,XD-574,
Expected usage ATM would be sink channel called foo http transform expression payload.toUppercase foo source channel called foo foo count file,XD-571,
"DSL should be able to parse what is below, need tests CLI integration tests to ensure it is being mapped to an executeable stream. myIntricateFlow transform expression payload.toUppercase transform expression payload.toLowercase http myIntricateFlow file obfuscateName transform expression payload.replaceAll name ,XXX twitter query Bieber obfuscateName name Justin file ",XD-570,
Create a reproducible series of steps or shell integration test. ,XD-569,
Show how to select a specific hadoop distribution when starting embedded standalone XDContainer.,XD-565,
make sure nothing is broken spot check using. 1 ticktock 2 twitter 3 gemfire ,XD-563,
"reproduce 1 Create a bad stream definition name bad Try to recreate with the same name, but correct stream definitions. The system will report that the stream already exists. ",XD-561,
"There is some overlap between the gauge and counter repository types and also between the domain resources used by the REST controllers CounterResource, GaugeResource . The aggregate counter may wish to return a simple count value for the counter too, which would also be a simple integral value.",XD-558,
"It seems the html rendering of documentation is using a variable width font for some of the code esp. source,sh apparently rendering. Weird thing though is that when mouse hovering over some of them, they went back to fixed width. See screenshot. http static.springsource.org spring xd docs current SNAPSHOT reference html start the runtime and the xd shell ",XD-557,
"the top level URL works via simple curl without an Accept header or the browser code curl http localhost 8080 links rel streams , href http localhost 8080 streams , rel triggers , href http localhost 8080 triggers , rel jobs , href http localhost 8080 jobs , rel taps , href http localhost 8080 taps , rel counters , href http localhost 8080 metrics counters code However, trying any of those links then fails, e.g. code curl http localhost 8080 streams ?xml version 1.0 encoding UTF 8 standalone yes ? errors xmlns ns2 http www.w3.org 2005 Atom error logref HttpMessageNotWritableException message Could not marshal PagedResource content links lt;http localhost 8080 streams mqttdemo gt;;rel quot;self quot; , metadata Metadata number 0, total pages 1, total elements 1, size 20 , links null; nested exception is javax.xml.bind.MarshalException with linked exception com.sun.istack.internal.SAXException2 unable to marshal type quot;org.springframework.xd.rest.client.domain.StreamDefinitionResource quot; as an element because it is not known to this context. message error errors code ",XD-555,
"Split plugin module processing into pre and post processing where preprocessing is done before the context is refreshed and post processing is done after the refresh, but before the start. In the Stream plugin, wire the module into the ChannelRegistry during post processing, instead of using the ChannelRegistrar .",XD-554,
"Seems like the current file source results from an initial POC. Very few things can be parameterized, including the polled directory that needs to be in tmp xxx To be useful in production, we might want to revisit",XD-553,
"FieldValueCounterHandler was first written to support setting several fields at once, but the current constructor field value counter.xml does not use it. Either leverage that feature or simplify code",XD-550,
"Most of the infrastructure and code cleanup has been done for In Memory Analytics. The only remaining issue is that, by including memory analytics.xml from common.xml, we re actually creating e.g. a new InMemoryCounterRepository that is different from the one present in the Admin process space. This story involves fixing that. It may actually be done as part of XD 353, handling the local transport as a special case context inheritance rather than import based on xd.transport",XD-544,
"Currently many methods take module, group, index defining a module instance; group and index can be encapsulated in Module so one arg can be passed around.",XD-542,
"Use an undeploy topic to broadcast undeploy requests to all containers. Applies to Redis and Rabbit transports, not local. Also, rename ModuleDeploymentRequest to ModuleOperationRequest with an enum DEPLOY , UNDEPLOY .",XD-540,
Investigate using transactions and pipelining to improve performance of both the inbound and outbound RedisQueue channel adapters. Involves testing against a pre release of SDR 1.1 M2.,XD-539,
"This requires to boostrap the singlenode admin server in process, submit commands to the shell programmatically, and assert on the results of executing the command.",XD-538,
"This story corresponds to 3 4 in discussion below. Currently, sink xml files define the Repository hardcoded to be redis and the services tied to Redis as well! I want to 1 Move those definitions out of the sink files, to somewhere shared by both admin and container 2 Make them aware of some configuration parameter similar to the store command line option 3 Get rid of so called Service layer doesn t do much right now, and logic would better live in the Handler IMO 4 Have REST controllers depend on XRepository in all cases",XD-537,
"creating job defs, deploying jobs, undeploying jobs, deleting job defs",XD-536,
"creating triggers, deleting triggers",XD-535,
"creating taps, deleting",XD-534,
"create, delete, deploy streams...",XD-533,
Existing code https github.com ghillert springone2012,XD-532,
Still keep existing one.,XD-530,
"Currently, living at the root of the project, those files don t benefit from IDE SI awareness. Make it so that they belong to a java project which sees the correct version of the SI jars used. Has impact on the build.gradle file",XD-526,
Thinking about using the official SpringSource rules as a template,XD-525,
We need to fail fast.,XD-519,
Create proper test coverage for Controllers,XD-514,
CI job will run integration tests that are tagged for CI build.,XD-513,
"Since most of the xd.shell.itests will do more then one thing deploy a stream, start it, add a tap, add a job, stop, etc we decided to decouple writing testcases with running it. Test cases will be written in spring shell scriptlets. Scriptlets are json files with command and expectedResult as tokens. Here s an example code testscript command stream create definition http file name http2file , result Created new stream http2file , command stream list , result ... code A parser will parse scriptlets, executes it and asserts on expected results. ",XD-512,
"Add top level utility methods to manage XD runtime deploy, start and stop . These methods will be used by underlying integration tests to control runtime test environment. ",XD-511,
See XD 477,XD-508,
"XD 482 addresses the use of camel case in fixed delay job module parameter name. and, we need to fix the same for other module parameters wherever is being used. ",XD-505,
We need to determine where this information could fit in. It can be either in README at the project home page or Getting started wiki page.,XD-504,
Shell command to delete a trigger. Note this command will only remove the trigger definition not modifying the jobs that use the trigger.,XD-502,
public StreamPlugin postProcessContextPath CHANNEL REGISTRY; Subclasses should not directly update superclass fields.,XD-501,
Current behavior is to just have a prompt of unknown I think any return value of a CliCommand method is not shown b c the whole infrastructure is not up at that time,XD-498,
"Caused by that weird annotation dependency problem that I worked around for compile. But Sonar complains. One solution would be to add Jackson 2 to the Sonar classpath , but I'did not manage to do that. ",XD-497,
"DefaultFormattingConversionService provides Collection Object conversion which will produce the first item if the target type matches. Here, this results in an unfortunate side effect, getTuple List Tuple list would return a Tuple which is misleading. In this case it is preferable to treat it as an error if the argument is not a Tuple.",XD-496,
Save Save a XYZDefinition method used to be create Delete Delete a XYZDefinition method used to be called destroy Deploy Deploy a XYZDefinition Undeploy Undeploy a XYZDefinition List List a XYZDefinition Returns PagedResources XYZDefinitionResource Display Get specific information about a XYZDefinition Create other stories for each Controller and include in this weeks sprint ,XD-494,
"Only create in TapDeployer has some additional code to check if the stream exists, could take place in another location.",XD-493,
To be consistent with Spring Data Repository method names.,XD-492,
"Favor using custom exceptions instead of using Assert.notNull, review usage and make changes. Eg. if a stream can t be found or another definition a XYZNotFoundException instead of Assert.Null on the return value of a findOne method ",XD-491,
"StreamController to not access the repository instance directly, all access to go through StreamDeployer ",XD-490,
Rename existing Tap class to something else.,XD-489,
"See implementation used for Steams and apply to jobs, taps, triggers.",XD-488,
Resource objects should be returned from all controller methods. MVC Tests should be added to check returned values.,XD-486,
"We need a few steps 1. Investigate if we need to move off Spring Shell 1.0 dependency, e.g. need to use code in Spring Shell 2.0 branch 2. If we need to use code in Spring Shell 2.0 branch, we need to release a Spring Shell 1.1 M1 release with appropriate code changes. Create stories related to Shell release. 3. Determine and document the basic recipe for doing integration tests. 4. Create stories to provide integration tests for each existing command",XD-485,
Implements automatic conversion. Provide APIs to channel registry to register Payload conversion. Includes Redis and Rabbit transport.,XD-479,
A module can declare one ore more payload types it will accept. This will inform the runtime re. automatic payload conversion. This can be done in the module XML configuration and processed by StreamPlugin,XD-478,
"Spring HATEOAS is here to help. Nonetheless, there are currently a number of outstanding issues, namely https github.com SpringSource spring hateoas pull 98 https jira.springsource.org browse SPR 10262 comment 91685 https github.com SpringSource spring hateoas pull 94 Creating a issue here for future reference",XD-477,
We need a generic script that can do JSON to tab delimited text transformation for data written to HDFS HAWQ external tables. Users should be able to specify columns fields to be included.,XD-474,
we need to modify startup script to use hadoop 1.1.2 as default or phd1 when specified with hadoopDistro phd1,XD-473,
we need to modify build adding two sub projects for spring xd hadoop one for hadoop 1.1.2 and one for phd1 Pivotal HD to pull in transitive dependencies for correct Hadoop distro,XD-472,
we need a batching JDBC channel adapter int jdbc outbound channel adapter is not batching statements AFAICT ,XD-471,
we need a JDBC sink for writing to HAWQ using int jdbc outbound channel adapter and postgresql JDBC driver ,XD-470,
spring data hadoop 1.0.1.RC1 provides flavors for commonly used Hadoop distros versions and we should make use of that.,XD-469,
"There s a lifecycle problem when a tap creation fails e.g. because the DSL syntax is wrong . Subsequent attempts to create the tap will fail with an error links , logref MessageHandlingException , message org.springframework.context.ApplicationContextException Failed to start bean org.springframework.integration.monitor.IntegrationMBeanExporter 0 92e27d20 4c48 4131 866c 91b6cb642ca2 ; nested exception is org.springframework.jmx.export.UnableToRegisterMBeanException Unable to register MBean MessageChannelMonitor name nullChannel, sends 0, receives 0 with key xd.tap1 type MessageChannel,name nullChannel,index 1,module log ; nested exception is javax.management.InstanceAlreadyExistsException xd.tap1 type MessageChannel,name nullChannel,index 1,module log Disabling JMX solves the issue. reproduce Create a bad stream definition name bad Try to recreate with the same name, but correct stream definitions. The system will report that the stream already exists.",XD-467,
Support toString to emit JSON by default. Should be backed by a simple strategy to allow the possibility of other representations. Also provide toTuple String json . This supports seamless mapping JSON Tuple in XD,XD-466,
"For example, using tcpdump I can see both an exception and message information HTTP 1.1 500 Internal Server Error Server Apache Coyote 1.1 Content Type application json;charset UTF 8 Transfer Encoding chunked Date Fri, 12 Jul 2013 13 38 26 GMT Connection close 275 links , logref MessageHandlingException , message org.springframework.context.ApplicationContextException Failed to start bean org.springframework.integration.monitor.IntegrationMBeanExporter 0 92e27d20 4c48 4131 866c 91b6cb642ca2 ; nested exception is org.springframework.jmx.export.UnableToRegisterMBeanException Unable to register MBean MessageChannelMonitor name nullChannel, sends 0, receives 0 with key xd.tap1 type MessageChannel,name nullChannel,index 1,module log ; nested exception is javax.management.InstanceAlreadyExistsException xd.tap1 type MessageChannel,name nullChannel,index 1,module log However the client only shows http localhost 8080 tap create name tap1 definition tap test1.file log deploy true 14 38 26,113 WARN Spring Shell client.RestTemplate 524 POST request for http localhost 8080 taps resulted in 500 Internal Server Error ; invoking error handler Error creating tap tap1 The error doesn t seem to be logged in the XD Admin server either, so the information is effectively lost. ",XD-465,
A pause means that a trigger will wait to fire its job until after the pause is removed. It does not apply the misfire behavior. ,XD-459,
Commonly called Calendar support ,XD-458,
"In the case that there are not enough resources to fire a trigger, the highest priority will be fired first.",XD-457,
"If we want spring xd to support interactions through a UI, then it would make sense that we should support the UI coming from a separate origin. This way, the UI could remain a separate project and be served from wherever we want. So, we would need to add the header to all outgoing REST responses. We may also need to add a Access Control Allow Methods header as well. In the short term, the Access Control Allow Origin header could be hard coded to a specific url I m using http localhost 9889 for now , but in the long term we would need this configurable.",XD-451,
"The following will retrieve the names of all module types eg sources, sinks, jobs, processors, triggers . code GET module types code I m expecting that the plural would be used, but singular would work as well. The following gets modules of a given type code GET module types type code This would be similar to the modules call in XD 265, but it would only return modules of the specified type. ",XD-450,
2 options are 1 Fire the trigger immediate Launch the job when trigger can gather the resources necessary start the job 2 Do nothing Ignore this job fire time and catch this scenario can occur if XD is down or resources threads are not available at the time a job is to be launched. ,XD-449,
We need to have the ability to set read timeout for http request. This is already implemented here https github.com SpringSource rest shell ,XD-445,
"Dependent servers should be required on the CI server, but optional on developer systems.",XD-444,
Once issues like XD 438 have been completed the wiki doc will need updates to reflect the current behaviour and syntax options.,XD-442,
"With support for substreams parameterized streams now in the parser it will be possible to create a stream that cannot be deployed it may not fit the source processor sink structure or it is a parameterized stream with no default values for parameters. Need to check how XD is going to handle these after creating them, attempting to deploy them should return appropriate errors. They should exist in the stream directory .",XD-441,
"The new parser supports for connecting regular modules and for connecting job steps. The modules in the ast that were connected with are tagged but nothing is currently using that information it doesnt get into the module deployment request . We need to think about using this data policing the modules that are being deployed to ensure they are job steps, for example.",XD-440,
"Following stream parsing there is now a stream resolution stage that chases down substream references and fills in parameterization. The lookup of streams is done through implementors of the StreamLookupEnvironment interface. Currently the parser implements this itself but it is really a job for the stream directory. The parser implementation doesn t know about stream deletions, for example, so may still resolve streams that no longer exist.",XD-439,
The DSL changes under XD 369 now build stream Ast objects that can include a source and sink channel code Source Channel mystream.foo count log Sink Channel http count foo code These new fields in the Ast object need to be copied into the module deployment request objects and then used at the destination as the channels for wiring things together. Currently the only channels used are the .NNN numeric channels where NNN is the index of the module in the stream definition. The source sink channels are extra channels that need creating the source channel acting as a real source for the next module in the chain whilst the sink channel acts as a sink output for the last channel in the chain. I can think of two ways to handle the implementation In order to police the stream structure as source processor sink maybe special SourceChannel and SinkChannel modules are created to represent these channels and when deployment happens the deployer understands that they don t represent a real request to deploy a module but simply the channels to wire up to the adjacent module. Carry source sink channel info in the existing module definitions. But then the verification of source processor sink structure will need modification to say a source isn t necessary if the first processor has a source channel attached and a sink isn t necessary if the last processor has a sink channel attached. ,XD-438,
Looking at the latest Sonar run we have 3 package tangles in Spring XD https sonar.springsource.org drilldown measures 7717?metric 87,XD-437,
Currently spring xd dirt has direct dependencies on Redis and Rabbit. Consider moving transport dependent classes to separate jars with runtime dependencies,XD-436,
The basic launch configurations should be tested automatically to ensure that startup scripts and launch aren t broken by changes.,XD-435,
"As a user, I'd like to have the option to delete the queues topics so that we can include an optional attribute as part of the stream destroy command to also clean up the associated queues topics. Notes Spring AMQP RabbitAdmin now has a getQueueProperties method which returns the number of consumers so it may be possible to use it for this purpose. Consider the possibility of producers and or queues still containing data Consider the scenario even after the topics queues are cleaned up, what to do with fanout exchange? Some Further Thoughts Consider using the upcoming Spring AMQP REST API RabbitManagementTemplate if the timing is not right, we could temporarily invoke the rabbit REST API'directly. Should be optional; perhaps via stream destroy foo clean Should this be done by the admin? Or, via a new plugin handling module undeployments in the rabbit case, undeploying a consumer would check for us being the last consumer and remove the queue binding exchange, since we undeploy left right, everything can be cleaned up on the consumer side. Third option would be new methods on the bus cleanConsumer etc invoked by the StreamPlugin Down side of doing it on the admin is that he wouldn t necessarily know which rabbit cluster a stream was deployed to so it probably has to happen on the container even so, we d need the admin url s for the cluster.",XD-434,
"If Redis is not running, the container fails to initialize in ContainerMain.launch because the connection factory attempts to eagerly connect. If RabbitMQ is not running, the container fails to initialize in AbstractContainerLauncher.launch . Make the failure behavior consistent from a user perspective and add a spring retry RetryTemplate to retry container startup.",XD-433,
XD 162 requires registering message converters with the ChannelRegistry. End user needs to configure this statically as the Spring configuration is not exposed.,XD-432,
Avoid the need for jmxPort xxxx when running both a Container and Admin on the same server,XD-430,
See http static.springsource.org spring xd docs 1.0.x SNAPSHOT reference html test the deployed module 3 ,XD-428,
See http static.springsource.org spring xd docs 1.0.x SNAPSHOT reference html test the deployed module,XD-427,
test the deployed module sub section uses curl.,XD-426,
Add section to Analytics chapter on use of AggregateCounter. The example should show the use of the shell to create the tap that uses the AggregateCounter.,XD-420,
See http static.springsource.org spring xd docs 1.0.0.M1 reference html taps The existing docs should be made to show a real stream being created with filter and or transformer and then a tap that goes to logging. The shell syntax to also stop undeploy a tap should be shown here as well since the lifecycle is discussed.,XD-419,
See http static.springsource.org spring xd docs 1.0.0.M1 reference html gemfire ,XD-418,
See http static.springsource.org spring xd docs 1.0.0.M1 reference html tcp sinks,XD-417,
See http static.springsource.org spring xd docs 1.0.0.M1 reference html hdfs,XD-416,
See http static.springsource.org spring xd docs 1.0.0.M1 reference html file sinks,XD-415,
See http static.springsource.org spring xd docs 1.0.0.M1 reference html log sinks,XD-414,
See http static.springsource.org spring xd docs 1.0.0.M1 reference html script,XD-413,
See http static.springsource.org spring xd docs 1.0.0.M1 reference html json field extractor,XD-412,
See http static.springsource.org spring xd docs 1.0.0.M1 reference html transform,XD-411,
See http static.springsource.org spring xd docs 1.0.0.M1 reference html filter http static.springsource.org spring xd docs 1.0.0.M1 reference html json value filter,XD-410,
See http static.springsource.org spring xd docs 1.0.0.M1 reference html tcp,XD-409,
See http static.springsource.org spring xd docs 1.0.0.M1 reference html syslog,XD-408,
See http static.springsource.org spring xd docs 1.0.0.M1 reference html gemfire cq,XD-407,
See http static.springsource.org spring xd docs 1.0.0.M1 reference html twittersearch,XD-406,
http static.springsource.org spring xd docs 1.0.0.M1 reference html tail,XD-405,
The documentation in the Running in Distributed Mode chapter should discuss that the distributed runtime can use essentially any middleware to communicate between nodes. This functionality is provided by the core ChannelRegistry abstraction. A new intro paragraph shoul convey that it isn t a redis only or rabbitmq only system. There should be Installing RabbitMQ and Starting RabbitMQ sections to match those for Redis. Starting Spring XD in Distributed Mode should cover how to configure the system to select to use Redis or Rabbit.,XD-404,
See http static.springsource.org spring xd docs 1.0.0.M1 reference html http ,XD-403,
There are existing commands that can be taken from https github.com SpringSource spring hadoop samples or https github.com SpringSource impala that can be used for this,XD-402,
"the current streams chapter http static.springsource.org spring xd docs 1.0.0.M1 reference html streams shows using curl to post some data to a http source module, curl d hello http localhost 9000 create a shell command so curl doesn t have to be used. https github.com SpringSource rest shell has a command already developed for this.",XD-401,
"the current streams chapter http static.springsource.org spring xd docs 1.0.0.M1 reference html streams shows creation and deleting streams using CURL switch to use shell. Also add listing of a stream. there is also an example of creating a stream, this should be replaced as well. ",XD-400,
The chapter on how to start up the shell should ocme right after start the runtime and before create the stream ,XD-399,
See http static.springsource.org spring xd docs 1.0.0.M1 reference html getting started ,XD-398,
"This section should discuss what is exposed via JMX, how you can view it in JConsole, and how you can view it over http via Jolikia. in particular showing how some existing metrics for inbound message channel adapters or the inbound channel of the stream, that indicate the number of messages processed per section. ",XD-397,
This should likely be in the start the runtime section of Getting Started section.,XD-396,
"As part of the Hadoop World demonstration work, the flow of data using XD from twitter to be analyzed by HAWQ as done. Part of this work had the data going into HDFS that HAWQ was able to query using external tables. The work for this story is to identify the concrete technical tasks stories to be created do deliver and document this functionality in XD. ",XD-388,
"Some java files are currently missing headers. The plugin at https github.com hierynomus license gradle plugin can help, but initial trial revealed that skipExistingHeaders does not seem to be honored. We may then need to use a year construction like 2001 current or force all files to have current year. Don t know the legal implications of this Default source sets encompass all files in the classpath basically, so that means .xml as well as .properties files for example. It would seem logical to add header to those as well, but I'don t think this is what we do on other projetcs.",XD-386,
Have proper exceptions for common error cases on Stream creation deployment and propagate those to clients correctly.,XD-385,
see StreamsRepository as an example. This includes in memory and Redis implementations,XD-382,
see https docs.google.com a gopivotal.com drawings d 1kCNbVspRBjGc10itF9cSkwST8WgCjgg3wGzFKqLCAzU edit,XD-381,
see https docs.google.com a gopivotal.com drawings d 1kCNbVspRBjGc10itF9cSkwST8WgCjgg3wGzFKqLCAzU edit create TapsController if necessary,XD-380,
see https docs.google.com a gopivotal.com drawings d 1kCNbVspRBjGc10itF9cSkwST8WgCjgg3wGzFKqLCAzU edit Refactor current DefaultStreamDeployer,XD-379,
see https docs.google.com a gopivotal.com drawings d 1kCNbVspRBjGc10itF9cSkwST8WgCjgg3wGzFKqLCAzU edit create optionally deploys,XD-378,
see https docs.google.com a gopivotal.com drawings d 1kCNbVspRBjGc10itF9cSkwST8WgCjgg3wGzFKqLCAzU edit Create the deployer if it doesn t exist.,XD-377,
see https docs.google.com a gopivotal.com drawings d 1kCNbVspRBjGc10itF9cSkwST8WgCjgg3wGzFKqLCAzU edit Create the controller if it doesn t exist. Test with MvcTest,XD-376,
To store it s definition and optionally deploy with autostart flag,XD-373,
Deploy an existing job. Must exist in the JobsRepository,XD-372,
optional autostart switch to also deploy the job,XD-371,
Deploy a named stream. The stream must exist in the StreamRepository,XD-370,
"Extend the DSL in the following ways stream naming, use name code mystream http file code module aliasing for later referencing use label code mystream http t1 transform expression payload.toUpperCase t2 transform expression payload.toLowerCase code sequence of job steps with code mybigjobby step1 option value step2 option value code Channels for sources and sinks, use , channels references prefixed code sink channel called foo http transform expression payload.toUppercase foo source channel called foo foo count file code Qualify channels with a stream stream . channel code mystream http transform expression payload.toUppercase foo mystream.foo count log code Reusable substreams, define then reuse code myIntricateFlow transform expression payload.toUppercase transform expression payload.toLowercase http myIntricateFlow file code Parameterized substreams, use XX or XX to indicate parameters code obfuscateName transform expression payload.replaceAll name ,XXX twitter query Bieber obfuscateName name Justin file code Tapping still not 100 happy about the format here code mystream http filter t1 transform XXX t2 transform YYY file These are then equivalent tapping on a module is effectively tapping a channel, hence the tap filter count file tap mystream.filter count file mystream http filter foo tap foo count file tap mystream.foo count file code I'd still like to thing about removing tap and using a symbol perhaps , but mystream.foo is a little odd still not covered, topological constraints on the stream components.",XD-369,
This is currently too chatty. It should be possible to use a single connection for each increment operation.,XD-368,
"Get closure on open discussion points for REST API wrt to streams, taps and jobs. ",XD-367,
when posting the DSL to create a spring batch job e.g. trigger job.xml option1 foo it should be stored in redis so that a listing of XD job definitions can be retrieved.,XD-366,
Right now the PPC for jolokia mgmt is conflicting with the PPC used to resolve redis properties. Need to determine a strategy such that multiple PPCs can be used.,XD-365,
Redis based.,XD-364,
Simple cron based triggers,XD-358,
"It might be worth creating a base class for Plugins that combines common concerns across plugins. E.g. That would allow us to hide the commonApplicationContext and BeanDefinitionAddingPostProcessor for common cases, instead exposing a simple addBeanDefinition method to sub classes. ",XD-357,
"startup scripts on windows should be tested, xd admin, xd container, xd shell.",XD-356,
"Need to understand how individual modules may or may not share Dispatchers that are part of the parent context. If modules have their own dispatchers, those also need to be configurable.",XD-355,
"Container context should be separate from Admin Context in local mode consistency across transports . Provide a LocalChannelRegistry to bridge deploy and undeploy channels to the ModuleDeployer Verify Plugins are not in common module context. They are only needed by the ModuleDeployer not the Modules. Add global beans Config for beans to be shared among admin and container and available to modules . This would be set as the parent context where needed. Currently analytics context.xml and JobRepository shared by Admin and modules Fix ModuleDeployer sets parentContext twice Rename common.xml to module common.xml NOTE Analytics parent only required in local mode Write unit tests to verify configurations are as expected. Correct bean implementations and no stray beans or redundant instances where not needed Decouple Command options from System properties in general XD property names , this gives us some flexibility in mapping to properties or profiles where appropriate ",XD-353,
Currently Jobs can be either executed using cron expression or immediately at once. We should also support the one time scheduling of jobs in the future. Would this possibly require us to implement schedule persistence? That could severely impact story points.,XD-349,
Trigger Add support for fixed delay interval,XD-348,
"With the performance test run, the numbers messages sent received per second keep varying as there are redis client connection timeout exceptions Caused by org.jboss.netty.channel.ConnectTimeoutException connection timed out at both redis inbound outbound channel adapters as I increase the total number of messages being processed max. 10K second . Some of the exception messages for the review 1 With connection pool at Redis outbound Caused by org.springframework.data.redis.connection.PoolException Could not get a resource from the pool; nested exception is com.lambdaworks.redis.RedisException Unable to connect at org.springframework.data.redis.connection.lettuce.DefaultLettucePool.getResource DefaultLettucePool.java 95 at org.springframework.data.redis.connection.lettuce.DefaultLettucePool.getResource DefaultLettucePool.java 36 at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory.createLettuceConnector LettuceConnectionFactory.java 318 at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory.getConnection LettuceConnectionFactory.java 109 at org.springframework.data.redis.core.RedisConnectionUtils.doGetConnection RedisConnectionUtils.java 81 at org.springframework.data.redis.core.RedisConnectionUtils.getConnection RedisConnectionUtils.java 53 at org.springframework.data.redis.core.RedisTemplate.execute RedisTemplate.java 157 at org.springframework.data.redis.core.RedisTemplate.execute RedisTemplate.java 137 at org.springframework.data.redis.core.AbstractOperations.execute AbstractOperations.java 84 at org.springframework.data.redis.core.DefaultListOperations.leftPush DefaultListOperations.java 71 at org.springframework.data.redis.core.DefaultBoundListOperations.leftPush DefaultBoundListOperations.java 67 at org.springframework.xd.perftest.redis.outbound.RedisQOutboundChannelAdapter.handleMessageInternal RedisQOutboundChannelAdapter.java 71 at org.springframework.integration.handler.AbstractMessageHandler.handleMessage AbstractMessageHandler.java 73 ... 17 more Caused by com.lambdaworks.redis.RedisException Unable to connect at com.lambdaworks.redis.RedisClient.connect RedisClient.java 176 at com.lambdaworks.redis.RedisClient.connectAsync RedisClient.java 139 at org.springframework.data.redis.connection.lettuce.DefaultLettucePool LettuceFactory.makeObject DefaultLettucePool.java 252 at org.apache.commons.pool.impl.GenericObjectPool.borrowObject GenericObjectPool.java 1181 at org.springframework.data.redis.connection.lettuce.DefaultLettucePool.getResource DefaultLettucePool.java 93 ... 29 more Caused by org.jboss.netty.channel.ConnectTimeoutException connection timed out localhost 127.0.0.1 6379 at org.jboss.netty.channel.socket.nio.NioClientBoss.processConnectTimeout NioClientBoss.java 137 at org.jboss.netty.channel.socket.nio.NioClientBoss.process NioClientBoss.java 83 at org.jboss.netty.channel.socket.nio.AbstractNioSelector.run AbstractNioSelector.java 312 at org.jboss.netty.channel.socket.nio.NioClientBoss.run NioClientBoss.java 42 2 Without connection pool at Redis inbound Caused by com.lambdaworks.redis.RedisException Unable to connect at com.lambdaworks.redis.RedisClient.connect RedisClient.java 176 at com.lambdaworks.redis.RedisClient.connectAsync RedisClient.java 139 at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory.createLettuceConnector LettuceConnectionFactory.java 321 ... 12 more Caused by org.jboss.netty.channel.ConnectTimeoutException connection timed out localhost 127.0.0.1 6379 at org.jboss.netty.channel.socket.nio.NioClientBoss.processConnectTimeout NioClientBoss.java 137 at org.jboss.netty.channel.socket.nio.NioClientBoss.process NioClientBoss.java 83 at org.jboss.netty.channel.socket.nio.AbstractNioSelector.run AbstractNioSelector.java 312 at org.jboss.netty.channel.socket.nio.NioClientBoss.run NioClientBoss.java 42 ... 3 more",XD-347,
The object naming is still not ideal for XD since SI conventions add some noise. Likely need to design and implement a custom naming strategy,XD-343,
"There is some conflicting Servlet API jars on the claspath that needs cleanup. Building and running with xd singlenode script gave this error Jun 27, 2013 3 18 16 PM org.apache.coyote.http11.AbstractHttp11Processor process SEVERE Error processing request java.lang.NoSuchMethodError javax.servlet.ServletContext.getEffectiveSessionTrackingModes Ljava util Set; at org.apache.catalina.connector.CoyoteAdapter.postParseRequest CoyoteAdapter.java 674 at org.apache.catalina.connector.CoyoteAdapter.service CoyoteAdapter.java 402 at org.apache.coyote.http11.AbstractHttp11Processor.process AbstractHttp11Processor.java 1004 at org.apache.coyote.AbstractProtocol AbstractConnectionHandler.process AbstractProtocol.java 589 at org.apache.tomcat.util.net.JIoEndpoint SocketProcessor.run JIoEndpoint.java 310 at java.util.concurrent.ThreadPoolExecutor Worker.runTask ThreadPoolExecutor.java 895 at java.util.concurrent.ThreadPoolExecutor Worker.run ThreadPoolExecutor.java 918 at java.lang.Thread.run Thread.java 680 ",XD-342,
Document jmx command line options and refer to jolokia,XD-341,
We should be able to write a script that can examine the table structure for a given HAWQ table and then extract the data from JSON without the custom script we are using now.,XD-340,
Investigate how efficiently we can integrate profiler into the performance test.,XD-339,
Create a load generator script which can generate messages at specific 1 Rate 2 Payload 3 Concurrency to a specific tcp udp port where a syslog adapter is listening.,XD-338,
"updated story points to 14 since 5 of us just participated in a 2 hour call, and we still need to discuss topology support after some dev spikes later this week",XD-335,
"TODO as part of this see XD 537 Get rid of so called Service layer in analytics project doesn t do much right now, and logic would better live in the Handler IMO Have REST controllers depend on XRepository in all cases",XD-332,
"For a sink source processor this would be among other things message rate, number of messages",XD-327,
POST?,XD-321,
This would be based off the spring integration extenstions splunk project. The use of this adapter for storing tweet data is in https github.com markpollack springone We should be able to reproduce the use case as done in that demo,XD-318,
"Need to capture exceptions from the various projects that make up XD and wrap them in XD Specific exceptions. An example of this is when leaving out the channels in the module definitions, we see NoSuchBeanExceptions and IllegalArgumentExceptions thrown based on which module and what channel is missing. ",XD-316,
"The shell should be an executable delivered out of the box in much the same way that xd container and xd admin are right now. If we follow how redis mongo distribut the shell, it sits side by side with the other binaries",XD-315,
Expose runtime stats for core components.,XD-314,
Global option? Override for individual modules? module types?,XD-313,
WAR Vs. JVM Jolokia Agent Jolokia Vs. JVM MBeanServer Probably needs support for Spring Profiles.,XD-312,
Probably needs support for Spring Profiles.,XD-311,
"See XD 194 for additional considerations. Zip support should be similar to uber jar, or possibly replace uber jar support.",XD-309,
"Examples 1. Be able to start the rabbitmq source just by pointing to modules source rabbit.xml, pass in some property file for parameters to be replaced, and outgoing message is placed in a in memory queue backed channel for use with assertions to verify functionality. 2. Test for as many source types as is reasonable , e.g. MQTT TCP testing might be harder than say rabbitmq. 3. Test that sending json, results in media type header is set to json 4. Test that sending POJO, POJO 5. Test that sending Tuple, Tuple 6. Test that sending raw bytes, raw bytes ",XD-306,
Handled by 1245,XD-305,
"Be able to point to the processor xml file, e.g. modules processors transformer.xml, and have access to a source channel that drives messages into the processor and a output channel where output messages are send. The outbound channel is queue backed. Test sending JSON to a processor module that uses Tuples. ",XD-304,
So that we can validate the message content in the stream,XD-303,
To send a pre set message to process es ,XD-302,
"It would be nice if we have a git repo for Spring XD performance testing. This would enable us to have a common repository rather than inside spring xd as a subproject for all performance related code specific to any module, message middleware etc., ",XD-301,
"Twitter s streaming APIs have more capabilities than just the plain statuses sample.json. In particular we should support the filter.json option and the use of track https dev.twitter.com docs streaming apis parameters track as well as other request parameters delimited, language etc .",XD-298,
"I wanted to have a rollover feature when I was streaming tweets to a file overnight, just to avoid dealing with a single enormous file in case I collected more data than my demo could handle and needed to split it up .",XD-297,
"The changes for XD 144 mean that log4j files are no longer in the library jars. The admin server already has a logging configuration which should be activated by the startup scripts, but the separate gemfire app doesn t.",XD-296,
"Currently, the RedisQueueInboundChannelAdapter has blocking operation when pulling the messages out of redis queue and this is not performant. There are few ideas from the discussion to make it better 1 Get more items from the redis queue per connection 2 We will also have compression of messages at the channel registry before being sent to the redis queue We also need to investigate what redis connection strategy makes the RedisQueueInboundAdapter better. ",XD-290,
See https github.com kevinweil elephant bird,XD-288,
the key used in writing key value pairs should be able to be specified declaratively.,XD-285,
Writing POJOs using CDK Data Avro We should support both partitioned and un partitioned. This story addresses only un partitioned. Document limitations in terms of which Java types are supported and not supported by the Avro serialization ,XD-282,
"This could be an optimization, to be verified, that delegating the writing operations to Reactor e.g. with a backing ringbuffer implementation will increase the throughput performance. Other strategies, such as threads to handle writes to individual files concurrently, should be investigated.",XD-276,
"This should be an optimization, to be verified, that aggregating data in memory, for example at the size of a HDFS block 64Mb often will result in increased performance vs. not aggregating data for writes.",XD-275,
"Based on message processing, a header in a Message can be added that contains the output file name. This will work together with the hdfs writer module so it can read the header and write the contents of the message to the specified file. ",XD-274,
"The file name should allow the use of date and time patterns, either JDK or Joda TBD .",XD-273,
"A strategy that will automaticaly roll over files based time of day. For example New files will be created every hour, or every 6 hours etc. The directory for files can also be rotated so that directory structures such as data year month day can easily be supported with a minimum of configuration. ",XD-272,
"A strategy to roll over files that allows the user to choose between 1 the size of the file 2 the number of events items in the file 3 an idle timeout value that if exceeded, will close the file",XD-271,
"A file that is in the process of being written to should have a customized suffix added to the name, e.g. temp . Once the file is closed, the suffix is removed and replaced with another value default value can be dependent on the serialization format used, but can be customized",XD-270,
"As XD, I need a persistent way to register job definitions beyond the map registry implementation provided by Spring Batch . h2. Acceptance Criteria XD should be able to register, unregister, and find job definitions via the registry. The registry should be backed by Redis so that it is persistent.",XD-269,
"Command line arguments and especially their default values are currently scattered around different places. The aim is to regroup those in a common place Options classes make sense . Also, not very happy with how System properties are used as a vehicle for options.transport options.home",XD-268,
"As an XD developer, I need to be able to use a batch job to stream data as a source. h2. Acceptance Criteria Implement the ability for a job to be defined as a source in the DSL Add the configurations for the batch infrastructure transparently to the user Add the ability to specify if the job is stateful picks up where it left off if it stops or restarts at the beginning .",XD-267,
"So that clients e.g. Shell or custom user program are insulated from REST details ala Cloud Foundry . May go even further if we want a Java DSL for stream definitions that may reuse Batch command POJOs btw Difference between xdClient.createStream mystream , http port 9000 file and import static stuff. ; StreamDef stream http .port 9000 .pipe file ; xdClient.createStream mystream , stream ;",XD-266,
GET streams streamname modules and GET streams streamname modules modulename The former returning links to the latter ,XD-265,
"Pagination support, maybe querying by name as well",XD-263,
This is the basic setup of the commands file no specific command implementations,XD-257,
Set up a basic Spring Shell project for XD Shell,XD-255,
For stream creation we need to be able to specify source sink processor filter transformer script etc. ,XD-251,
Need to create a basic client library to provide easier access to the XD REST API. ,XD-249,
Need to create a basic Spring Shell implementation to provide easier access to the XD REST API via an XD REST API Client library. ,XD-248,
Running on Cloud Foundry and other managed environments we need to be able to specify a Redis password in addition to host and port.,XD-247,
"As a user of XD, I want to be able to use a job as a source. To do so, we need the output of a job to be written to a message channel h2. Acceptance Criteria Create a new ItemWriter in the Spring Batch project to write to a Spring Integration message channel.",XD-246,
"As a developer, I need a way to deploy job configurations as well as the related custom code to XD. h2. Acceptance Criteria Provide the ability to register jobs that have been deployed as modules via something like curl d job http localhost 8080 streams myJob where job is the name of the job definition located in modules job and myJob is the name of the resulting registered job Confirm that both regular jobs and Spring Hadoop based jobs can be packaged run.",XD-245,
"As the XD system, I need to be able to execute a job or potentially a stream based on a given condition time, data existence, etc . This story is intended is for a local trigger implementation but remote triggers will also need to exist. h2. Acceptance Criteria Implement the ability to register a time based trigger trigger CRON STRING for example Implement the ability to register a file existence based trigger trigger PATH for example Implement the ability to execute a job via an anonymous trigger job name CRON STRING OR PATH Implement the ability to execute a job via a job via the previously registered trigger job name trigger name ",XD-244,
An aggregate counter rolls up counts into discrete time buckets. There is an existing POC implementation in Java based off the library https github.com thheller timed counter The README there has a good description of the desired feature set.,XD-236,
"we have a prototype gardenhose adapter that was built directly upon RestTemplate streaming on a background thread , but Spring Social Twitter has an issue on its 1.1 roadmap that is relevant https jira.springsource.org browse SOCIALTW 2 ",XD-231,
"configurable parameters should include the queue name s and optional binding key pattern connection info, such as host and port, should also be configurable but with defaults localhost and default port , and that should likely fallback to a rabbit.properties file in the XD HOME config directory",XD-230,
This is needed for the use of the webhdfs scheme to talk to HDFS over http.,XD-227,
"We need to cleanup some of the duplicate gradle tasks that bundle spring xd distributions. Currently, distXD does the copy of distributions from spring xd dirt , redis and spring xd gemfire server projects into rootDir dist spring xd . And, the task zipXD makes the zip archive. These tasks should be combined with the distZip docZip tasks. We also need to remove the duplicate artifacts configuration from these tasks.",XD-226,
"for example, when using the twittersearch source module, the hashTags are nested within entities , and the value for hashTags is itself an object with a text field, so the following would be needed to count the actual value of interest code tap tweets field value counter fieldName entities.hashTags.text code ",XD-225,
"https github.com SpringSource spring xd wiki Creating a Source Module uses the SI twittersearch inbound channel adapter, which is no longer going to work once Twitter disallows anonymous searches. Ideally we update the example to use a new version of SI twitter that adds support for this as opposed to the XD workaround. ",XD-223,
curl X DELETE http localhost 8080 streams ticktock,XD-222,
"The issue arises because the link document Label asciidoc macro is meant for external documents and creates ulink in docbook a href document in html, whereas we want link linkend anchor a href doc anchor resp. We also want it to continue working in github live view. I guess what could work is to have the macro either override the link macro or create our own if github supports that that looks like link document anchor Label the anchor works out of the box in asciidoc and should work in github but override it for the html and docbook backends to render to the correct form. The thing is, there are several ways to create override macros and templates they render to , some of which make sense to our setup having asciidoc.conf in the directory of the processed document http asciidoc.org userguide.html X27 having docbook.conf html.conf in the directory of the processed document http asciidoc.org userguide.html X27 defining macros using attributes http asciidoc.org userguide.html setting configuration entries I tried all of those, but to no avail. These DO WORK with plain asciidoc, but not with our toolchain. Don t know if the problem is with asciidocTOR or with the gradle wrapper though. ",XD-221,
Those property keys should then be provided as defaults for the placeholders in source twittersearch.xml,XD-220,
"The transform, filter, and script processor modules support passing in a properties location for script variables. We need a default location on the classpath for users to provide custom properties files.",XD-217,
"Since the changes for XD 202, twittersearch requires authentication. Need to update the docs to reflect this.",XD-215,
The asciidoc wiki should have a section included in the Sidebar.asciidoc as well that describes the general usage of the DSL syntax.,XD-214,
There shouldn t be a need to do a mkdir p before sending data to a file sink.,XD-210,
"The wiki docs on creating custom modules have entire build.gradle files in them. Would be good to explore existing STS templates, maven archetypes, etc or create new ones for authoring custom modules.",XD-209,
The config file modules sink hdfs.xml has a hardcoded value to locate the namenode. hdp configuration register url handler false fs.default.name hdfs localhost 9000 hdp configuration the fs.default.name proprety should be configurable and we should also support loading an external configuration file using hdp configuration properties location xd.home config hadoop.properties hdp configuration ,XD-207,
"Filter, Transform, and Script modules all assume the provided script is written in Groovy. This is partly due to the fact that the lang attribute of int script script can t be set to a property value i.e. lang lang groovy , which would allow users to pass in the expected language. Or perhaps we could use a SPEL expression or script to pick the language based on the file extension?",XD-205,
Fill in https github.com SpringSource spring xd wiki Processors,XD-204,
I'don t see that we have automated tests for the modules we provide out of the box. We could make the modules folder an Eclipse project which would also help solve XD 198 and add some integration tests similar to those documented here https github.com SpringSource spring xd wiki Creating Custom Modules,XD-203,
This will enable arbitrary processing logic to be used in a processing step. See http blog.springsource.org 2011 12 08 spring integration scripting support part 1 int service activator ... script script lang groovy location file scripts groovy myscript.groovy int service activator would be the essence of the module. Probably lang gets detected from the file extension.,XD-197,
Replace the existing DSL parser that uses string indexing with a more robust one based on a derivative of SpEL. This will provide a stable base on which to quickly iterate on syntax. ,XD-196,
"When running in local mode no Redis time tcp no longer works. Change the time source to emit the date as a String, while allowing an option to emit a Date object.",XD-195,
"If a user needs to deploy a module containing custom code, they have to build a jar for the lib dir and somehow deploy the app context file separately to a modules dir. This is a bit inconvenient to build from a project, since context files in src main resources typically get built into a jar. Might be better to accept both jar and xml files in the modules dir, though that brings up the issue of classpath isolation.",XD-194,
"Currently internal config files are in META INF spring with fairly generic names. To avoid potential collisions if users add their own configuration in the classpath, we should have a more unique location, e.g. META INF spring xd",XD-193,
"With the new option of starting without requiring redis, the getting started documentation should reflect this easier way to start processing data.",XD-192,
"XD 106 included detailed logging about the Redis metadata within the RedisContainerListener, but it seems as though that info could be logged somewhere closer to the establishment of a Redis connection for the XD runtime and could be logged even if this listener, whose main role is to capture Container related events, is not enabled .",XD-191,
a stream such as time filter script oddMinuteFilter.groovy file would load the groovy script oddMinuteFilter.groovy that is located in the directory modules processor or perhaps in modules processor scripts. Not sure the benefit of having a subdirectory below processor just for scripts.,XD-188,
"This script will launch XD admin along with the module container. As part of this implementation, we will also remove the embedded options for XD admin container scripts.",XD-187,
Create StreamDeployer that does not depend on an adapter implementation,XD-186,
The current StreamServer depends on RedisStreamDeployer. Call this RedisStreamServer and extract interface to allow alternate implementations,XD-185,
The redis specific beans that are defined in the current launcher.xml should move into this configuration file. ,XD-182,
"launcher.xml can make use of the system property xd.pipeProtocol inside an import statement. This determines which version of the XD infrastructure to load, for example what ChannelRegistry implementation, Local or Redis based, or specific message listener containers. File name conventions should be used, so if the option passed in from the command line is pipeProtocol localChannel then the XML filename looked for has the Protocol suffix applied, e.g. localChannelProtocol, and is loaded via the classpath. Redis and Local will not be the only options, other implementations will be provided in the future, e.g. Rabbit, and the user may be able to provide their own implementations of these infrastructure classes an advanced task . ",XD-181,
"The name pipeProtocol is tentative. 1. The command line scripts for xd admin and xd container would support a pipeProtocol option, with the default being to use Redis. Otherwise use xd singlenode . 2. The xd admin and xd container scripts will use the value of pipeProtocol to set the java system property xd.pipeProtocol when launching the app. ",XD-180,
The xd singlenode script will launch a main application that creates both the admin node to process http admin requests and the container node to execute modules for data processing within in the same process the xd admin script will launch a main application that creates only the admin node remove current embeddedContainer options the xd container script will launch a main application that creates only the container node as it is now ,XD-179,
The current incrementAndGet approach based off redis will not easily be applicable in local model deployment,XD-178,
"This could easily be supported in the existing gauge by adding a setAlpha method to RichGaugeService and adding the extra parameter alpha to the gauge data https en.wikipedia.org wiki Exponential moving average . If not set it would default to the current behaviour simple mean , otherwise it would calculate the exponential moving average in place of the mean.",XD-176,
"2 3 containers separate processes that the stream syslog tcp 1 container separate process that aggregates the data sent from those conainers, tcp severityFilter hdfs ",XD-175,
The use case is to write custom code that does processing on a specific domain class perhaps from twitter adapter or a tuple. Need to package up this code so that it can be used inside XD. ,XD-174,
"Document how to take an existing input output channel adapters in spring integration and add them as a XD source sink module. Should be as end user focused, step by step guide as possible. Consider including a getting started gradle pom.xml ",XD-173,
bottom home page list of projects data integration category landing pages related projects. ,XD-172,
A minimal project page of a top level project page that has basic information of docs and links to the github wiki page. No need to list maven coordinates.,XD-171,
"Add more structure, more easily find the reference guide. The style that is here https github.com snowplow snowplow wiki is nice. ",XD-170,
Trying to run XD offline results in an error in redis.xml because the cloudfoundry schema file is missing. We need to add the cf runtime jar to the classpath to resolve this.,XD-169,
"We need to have the XD container admin reading the registry specific property based on the registry type selected. From Mark F, on one of the code review comments Maybe rather than having redis, rabbit, etc. properties all within a container.properties we should rely upon naming conventions instead. Specifically, we could have a single configurable property for the type of channel registry redis , rabbit , or local being possible values , and then we could use something like import resource config registry.type .xml context property placeholder location config registry.type .properties ",XD-166,
"Validate that modules have required channels declared according to their type. Currently the stream deployer accepts processors with no input, but the stream doesn t complete. We should fail earlier and more loudly.",XD-164,
example code a b c d code ...where b and c modules are deployed together as a composite module. There are 2 options maybe more for how we could handle that. One would be defining a CompositeModule type that simply bridges the channels b s output to c s input in this example . The second option would be to deploy those together on the same node as modules but using the LocalChannelRegistry between them. ,XD-163,
"The conversion should be based on content type headers, similar to the way Spring s HttpMessageConverters work with mime types . Also, the map of available converters should be extensible while including the most common defaults for JSON, XML, etc . We most likely want to add a few of our own content types also e.g. for Tuples . Most likely, this logic and the configuration methods for extending the converter map, belong in AbstractChannelRegistry since it should be common across all implementations i.e. the logic should be the same regardless of the transport used after serialization before deserialization .",XD-162,
"The wiki repo contains a script, gen docs.sh, that we are planning to use to generate a pretty HTML version of the Getting Started guide. We should consider using maven or gradle, but there is currently an issue documented in build.gradle to generate this and other reference docs and publish them automatically as part of a nightly build.",XD-160,
"Parameter parsing does not work if an argument contains . For example code ... transform expression 42 transform expression payload ... code Also, I was surprised that this worked.. code transform expression new StringBuilder payload .reverse code ... but this didn t... code transform expression new StringBuilder payload .reverse code I think we need to tokenize the argument with if contains spaces and remove any surrounding ... from the result. This means if someone wants a SpEL literal they would have to use something like code expression Hello, world! code resulting in a SpEL literal Hello, world! ",XD-159,
This will allow for a simple way to shutdown the server via an HTTP call. Support for security is a separate story. The end goal is to have some shell scripts distributed that can issue HTTP requests to shutdown the xd admin and xd container servers. The newest version of Jolokia has the ability to boostrap itself inside an application context vs. requiring a java agent. I suspect using the application context approach will provide us with more flexibility e.g. property replacement etc but not sure.,XD-158,
In both cases there are multiple application contexts that can be running in the process. The JMX Managed bean should call close on those application contexts. The more detailed lifecycle of cleanly shutting down components within those application contexts is another story.,XD-157,
We would like to have Redis driven from a config property file under XD HOME.,XD-156,
A processor module that accepts either the location of a groovy script resource or an inline script string . Also some discussion about a default classpath location for scripts. ,XD-155,
"Shouldn t we have something like a ContextRefreshedEvent Listener and output some informational messages to the console, so the user knows the Container is up Which contexts. Maybe even print a link to the docs ? Maybe even some simple ascii art for demos ? Right now it looks somewhat barren. Redis provides something similar. This may even go hand in hand to provided a better configuration model storing common config parameters centrally code V . . , v1.0.0.M1 eXtreme Data Using Redis at localhost 6379 The Server PID 12345 is now ready on http myserver 123 streams Documentation https github.com SpringSource spring xd wiki code ",XD-154,
Spring config for simple gauge plus message handler to process message. There is some code common to RichGaugeHandler to coerce the payload to a double that should be refactored for reuse.,XD-153,
Spring config for rich gauge plus message handler to coerce a numeric or string payload to a double.,XD-152,
"Presently, Spring XD does not ship Windows binaries for Redis. However, Microsoft is actively working 1 on supporting Redis on Windows. You can download Windows Redis binaries from https github.com MSOpenTech redis tree 2.6 bin release 1 http blogs.msdn.com b interoperability archive 2013 04 22 redis on windows stable and reliable.aspx",XD-151,
"Currently, Bamboo s gradle artifactory plugin has the artifacts configured to projects target build directory archives . We need to have a way to set the final distribution archive as one of the gradle configurations in our build.gradle and refer it inside bamboo artifacts.",XD-150,
"Publishing an html version of the guide that uses the toc2 style format, table of contents on the left. Looks like a stylesheet factory http asciidoctor.org docs produce custom themes using asciidoctor stylesheet factory needs to be installed. From the theme showcase, http themes.asciidoctor.org preview , the golo theme has a toc2 style. In the root of the git repo for the wiki is a build.gradle file that uses the asciidoctor gradle plugin, but it doesn t support using a single file with import as input. See See https github.com asciidoctor asciidoctor gradle plugin issues 15 The mvn plugin does support this, so maybe using mvn is an option or just a bash script.",XD-149,
"Redis is not running we get a nasty stacktrace code dev git spring xd dist spring xd xd bin master . xd container 13 05 29 16 17 15 INFO support.ClassPathXmlApplicationContext Refreshing org.springframework.context.support.ClassPathXmlApplicationContext 851052d startup date Wed May 29 16 17 15 EDT 2013 ; root of context hierarchy 13 05 29 16 17 16 INFO xml.XmlBeanDefinitionReader Loading XML bean definitions from class path resource META INF spring launcher.xml 13 05 29 16 17 16 INFO xml.XmlBeanDefinitionReader Loading XML bean definitions from class path resource META INF spring redis.xml 13 05 29 16 17 17 INFO support.DefaultListableBeanFactory Pre instantiating singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory 4934ce4a defining beans org.springframework.context.support.PropertySourcesPlaceholderConfigurer 0,redisConnectionFactory,org.springframework.xd.dirt.launcher.RedisContainerLauncher 0 ; root of factory hierarchy 13 05 29 16 17 17 INFO support.DefaultListableBeanFactory Destroying singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory 4934ce4a defining beans org.springframework.context.support.PropertySourcesPlaceholderConfigurer 0,redisConnectionFactory,org.springframework.xd.dirt.launcher.RedisContainerLauncher 0 ; root of factory hierarchy Exception in thread main org.springframework.beans.factory.BeanCreationException Error creating bean with name redisConnectionFactory defined in class path resource META INF spring redis.xml Invocation of init method failed; nested exception is com.lambdaworks.redis.RedisException Unable to connect at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean AbstractAutowireCapableBeanFactory.java 1488 at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean AbstractAutowireCapableBeanFactory.java 524 at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean AbstractAutowireCapableBeanFactory.java 461 at org.springframework.beans.factory.support.AbstractBeanFactory 1.getObject AbstractBeanFactory.java 295 at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton DefaultSingletonBeanRegistry.java 223 at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean AbstractBeanFactory.java 292 at org.springframework.beans.factory.support.AbstractBeanFactory.getBean AbstractBeanFactory.java 194 at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons DefaultListableBeanFactory.java 626 at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization AbstractApplicationContext.java 932 at org.springframework.context.support.AbstractApplicationContext.refresh AbstractApplicationContext.java 479 at org.springframework.context.support.ClassPathXmlApplicationContext. init ClassPathXmlApplicationContext.java 139 at org.springframework.context.support.ClassPathXmlApplicationContext. init ClassPathXmlApplicationContext.java 83 at org.springframework.xd.dirt.launcher.RedisContainerLauncher.main RedisContainerLauncher.java 68 at org.springframework.xd.ContainerMain.main ContainerMain.java 68 Caused by com.lambdaworks.redis.RedisException Unable to connect at com.lambdaworks.redis.RedisClient.connect RedisClient.java 176 at com.lambdaworks.redis.RedisClient.connectAsync RedisClient.java 139 at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory.initConnection LettuceConnectionFactory.java 108 at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory.afterPropertiesSet LettuceConnectionFactory.java 86 at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods AbstractAutowireCapableBeanFactory.java 1547 at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean AbstractAutowireCapableBeanFactory.java 1485 ... 13 more Caused by java.net.ConnectException Connection refused localhost 127.0.0.1 6379 at sun.nio.ch.SocketChannelImpl.checkConnect Native Method at sun.nio.ch.SocketChannelImpl.finishConnect SocketChannelImpl.java 599 at org.jboss.netty.channel.socket.nio.NioClientBoss.connect NioClientBoss.java 150 at org.jboss.netty.channel.socket.nio.NioClientBoss.processSelectedKeys NioClientBoss.java 105 at org.jboss.netty.channel.socket.nio.NioClientBoss.process NioClientBoss.java 79 at org.jboss.netty.channel.socket.nio.AbstractNioSelector.run AbstractNioSelector.java 312 at org.jboss.netty.channel.socket.nio.NioClientBoss.run NioClientBoss.java 42 at java.util.concurrent.ThreadPoolExecutor Worker.runTask ThreadPoolExecutor.java 895 at java.util.concurrent.ThreadPoolExecutor Worker.run ThreadPoolExecutor.java 918 at java.lang.Thread.run Thread.java 680 code I think it would be helpful to provide users with some helpful advice e.g. Redis does not seem to be running at localhost 127.0.0.1 6379 . Did you start or install Redis? Please see for further help http foo bar ",XD-148,
Currently redis project uses application plugin to bundle distribution. This also includes java plugin which causes java specific build behavior on this project. We should try removing the use of application plugin and use something similar or custom tasks that does the bundling. ,XD-147,
The TCP source supports inbound binary data. We currently have to go through unnecessary byte String byte conversion.,XD-145,
"If, say, xd dirt is ahead of a local config on the classpath, it s log4j.properties is found first.",XD-144,
We need to have an externalized property file under xd conf for the xd container admin scripts to use as options. ,XD-143,
The ModuleDeployer calls getBeansOfType before the context has had its PropertySourcesPlaceholderConfigurer attached. This can cause issues with FactoryBean s with placeholders in constructor args because the unresolved placeholder is used when the FactoryBean is pre instantiated to determine the type of object it will serve up.,XD-142,
"Currently, the install redis script uses relative path to determine redis source dist file. Since this is error prone, we need to fix it.",XD-141,
The syslog source currently is hard coded to use udp on port 11111. Need to parameterize the port and provide an option to use TCP.,XD-140,
"Building XD should not be part of the out first out of the box experience, but we should include some instructions on what targets are available, such as distXD.",XD-139,
Pointers to other documentation on how to install hadoop. ,XD-136,
"Show overall flow of data in a stream, the server components admin and container . How modules are deployed.",XD-135,
Asciidoc doctor might have one as part of it toolchain,XD-134,
Similar to what would show up on structure101 reports.,XD-133,
"To allow for groups of beans to be defined or not in the container that runs a module. When deploying a stream e.g. via the REST API , it should be possible to also provide profile names. Then those would apply to any modules within that particular stream deployment.",XD-132,
Based off SI tcp inbound adapter. This will allow for event fowarding.,XD-128,
Based off SI tcp inbound adapter. This will allow for event forwarding that can select among the existing SI serialized deserializer options. ,XD-127,
"This will eventually be supplied by the admin server, but for now write it up by hand in the documentation",XD-126,
"Need to shutdown cleanly, no exception messages are shown. Order of components in the stream should be shut down from first to last opposite of creation ",XD-124,
The current default is hdfs localhost 9000 but most new distributions installs use 8020,XD-119,
"This should facilitate testing while avoiding any class dependencies. Also, log is a generally useful sink by itself and time is a more interesting source for testing should accept interval for the seconds between time messages .",XD-118,
This will enable the use of groovy scripts within modules.,XD-117,
It should provide an expression param for SpEL and have a default value of true accept everything .,XD-116,
It should provide an expression param for SpEL and have a default pass thru of the payload.,XD-115,
"The final directory structure should look like install dir xd install dir redis install dir gemfire inside the XD directory xd bin which has xd container and xd admin scripts xd lib inside the gemfire directory gemfire bin has the gemfire server script gemfire lib inside the redis directory is redis redis latest v.x.y.z.tar redis README readis install redis script that does the basic 4 commands to install redis. There should be a gradle task that runs after the distZip task, that will take the contents of different project directories, script diretories and redis binary directories and creates the final layout for the distribution.",XD-111,
This is in the AdminMain and ContainerMain. Can get the environment property directly in java code unless provided explicitly on the command line using xdHomeDir.,XD-110,
"We are packaging separate scripts to start XDAdmin and XDContainer. The Gradle application plugin will generate an unwanted spring xd dirt scripts, this should be removed from the bin directory when creating a distribution zip.",XD-108,
"A ctrl c of xd admin results in exception messages about disconnecting from redis. 14 16 07,327 ERROR task scheduler 1 handler.LoggingHandler 136 org.springframework.data.redis.RedisSystemException Redis command interrupted; nested exception is com.lambdaworks.redis.RedisCommandInterruptedException Command interrupted ",XD-107,
". xd container processing module Module name file, type sink from group tailtest with index 1 processing module Module name tail, type source from group tailtest with index 0 Logging of processing module should have log level, time..",XD-106,
should contain apache licence,XD-105,
should explain basic layout of the distribution,XD-104,
"This will launch the RedisContainerLauncher, in future will be able to select from a variety of middleware options.",XD-103,
"Provide optional command line arg to embed the container launcher, aka xd admin server. XDContainer.sh embeddAdmin",XD-102,
"The Tuple classes in Reactor follow the more traditional data structure concept of Tuples, an immutable fixed length sequence of values where each value can have different types. They are ordered and can often be access by index. An example in a static language is the Tuple class found in .NET http msdn.microsoft.com en us library system.tuple.aspx or in Scala http www.tutorialspoint.com scala scala tuples.htm Using this standard definition of a Tuple, they do not support named values. There is also a different tuple class instance for each length, e.g. Tuple T1,T2 , Tuple T1,T2,T3 . The Tuple class in XD is more like a record or named tuple. Python has a named tuple concept http docs.python.org 2 library collections.html collections.namedtuple and http stackoverflow.com questions 1490413 languages that allow named tuples shows that other languages use the term Record for a named tuple Haskell, Standard ML, OCaml, and F . http en.wikibooks.org wiki F Sharp Programming Tuples and Records Defining Records So boiling it all down, to avoid conflicts of names, and also to open up the possibility of using Reactor tuples as keys instead of strings for names , we should change the name to either NamedTuple or Record. ATM, there is no direct relationship between Reactor s Tuple and NamedTuple such as inheritance and so probably Record is the way to go. ",XD-100,
https build.springsource.org browse XD SONAR 34 Caused by java.lang.ClassNotFoundException org.sonar.api.Plugin at org.codehaus.plexus.classworlds.strategy.SelfFirstStrategy.loadClass SelfFirstStrategy.java 50 at org.codehaus.plexus.classworlds.realm.ClassRealm.loadClass ClassRealm.java 244 at org.codehaus.plexus.classworlds.realm.ClassRealm.loadClass ClassRealm.java 230 ... 94 more,XD-99,
For people who are familiar with Spring Spring Integration provide documents that show how to add additional input sources sinks.,XD-98,
Put on the guide as a section in an input stream wiki page. ,XD-91,
"Put on the guide as a section in an streams wiki page. End user focused, no need to mention spring underpinning, impl details. ",XD-79,
Put on the guide as a section in an input sources wiki page. https github.com springsource spring xd wiki GuideGettingStarted ,XD-78,
"in additional to existing tests that check for redis connection, we need to add tests that start stop stream server. ",XD-73,
stream should be able to ingest data from http ,XD-72,
The Java UUID class is known not to be the fasted implementation available. See https github.com stephenc eaio uuid and http mvnrepository.com artifact com.eaio.uuid uuid for high perf impls. ,XD-71,
"Adopt Asciidoc as the markdown syntax, useful for generating pdf and more feature rich than standard github flavored markdown. Loosely following the conventions of https community.jboss.org wiki TheHolyGrailAsciiDocOnGitHubToDocBookTrain that have generate docbook pdf docs from the Asciidoc wiki. The asciidoctor project is a key element in the adoption of AsciiDoc for use as the format in github, it is the rendering engine used by github for AsciiDoc. See http asciidoctor.org docs asciidoc writers guide for guidance. ",XD-70,
"Based on a single process Spring Batch job, ETL of data from HDFS to MongoDB.",XD-69,
"Based on a single process running a Spring Batch job, support the ETL of data from HDFS to a RDBMS",XD-68,
"Host the Spring XD distributable zip somewhere that is accessible by external http request. Create brew formula for Spring XD install while specifying redis as dependency. starting up stream server upon successful brew install couple of questions should we name the brew task springxd? name not taken yet should we start the stream server as part of the brew install process? should we specify redis as a recommended dependency? user can pass in brew install springxd without redis to skip redis installation. by default, brew install springxd will install redis as well.",XD-67,
Update a gemfire region.,XD-65,
Do not require a POJO in order to do end to end processing in a batch step.,XD-62,
"The gradle application task should get us most of the way to create a distributable artifact akin to what you see when downloading tomcat jetty etc. Now there is a launch task task launch, dependsOn classes , type JavaExec main org.springframework.xd.dirt.stream.StreamServer classpath sourceSets.test.runtimeClasspath The same main should be referenced in the application plugin, a task to create a .zip distributable is needed. Ideally would be nice to 1. download .zip 2. unzip 3. cd spring xd bin 4. xdserver start and gracefully shutdown later with 5. xdserver stop I'don t know if we can should bundle redis, I think we should bundle it. The scripts can be for unix linux and for windows. Discuss a brew based install as well. ",XD-61,
"The difference between saving a new metric and updating an existing one needs to be defined. Suggest that if we try to save when an existing counter is already in the database to throw exception, such as DataIntegrityViolationException.",XD-60,
"Nested tuple structures shoudl be supported, getTuple int index , getTuple String name ",XD-59,
Replace the use of Jedis with Lettuce as it has higher performance,XD-56,
"A Spring Integration based ServiceActivator that counts the occurrence of field names, from either a tuple data structure or a POJO, using the Spring XD metrics support.",XD-55,
A Spring Integration based ServiceActivator that counts the number of messages using the Spring XD metrics support,XD-54,
Start to explore how the DSL can cover both advanced non linear spring integration flows as well as spring batch jobs.,XD-53,
syntax code tap somechannel key value somecounter code ,XD-50,
"Currently these implementations are in the spring xd dirt module, but they should be moved into spring integration redis. We are already depending upon Spring Integration 3.0 snapshots since the ChannelRegistry implementation is not yet at a milestone, so this should be okay for the Redis Channel Adapters also until Spring Integration M2 is released.",XD-49,
"There is duplicated code in Redis based repositories that related to expiry behavior, move into a common shared helper class and or base class.",XD-45,
RedisCounterRepository and RedisGaugeRepository have duplicated code that needs to be factored out into a one place. One such duplication is the determination of the key name to use for persistence. This should be abstracted out into a strategy helper class.,XD-44,
This provides common CRUD behavior and a shared interface that can be useful in testing scenarios. ,XD-43,
Gradle application plugin is a good starting point. this should be the main server that would host SI based modules to do syslog file ingestion as an example ,XD-40,
TODO break out into sub task or other stories.,XD-38,
multi project build. look to Spring Framework for source of starting point.,XD-37,
bamboo based,XD-35,
"A field value counter is useful for bar chart graphs, Strings on x axis and count on y axis. Maps well to zset in redis. Implementations for in memory and redis.",XD-31,
A simple counters can increment decrement a number. Implementations for in memory and redis.,XD-30,
"A rich gauge stores a number and also rmd, min, max. Implementations for in memory and redis.",XD-29,
A gauge just stores a number. Implementations for in memory and redis.,XD-28,
"Initial simple handcoded implementation for straight through pipe and filter model, e.g. a b c",XD-24,
create enough of a design to develop additional stories.,XD-14,
"When there is support for boostrapping a http server in the reactor project, and inbound SI adapter and associated XD source module should be created.",XD-10,
Have a syslog.xml config file that can be added to a module and registered with a module registry.,XD-8,
The tuple data structure should be backward compatible in functionality for use in spring batch. Porting over FieldSet tests in spring batch to use the tuple data structure is one way help ensure that compatibility.,XD-7,
Simple file writer that has existed in the spring hadoop samples.,XD-2,
Base integration of core HDFS writer functionality with Spring Batch.,XD-1,
